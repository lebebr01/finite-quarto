<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Brandon LeBeau</title>
<link>https://brandonlebeau.org/posts/</link>
<atom:link href="https://brandonlebeau.org/posts/index.xml" rel="self" type="application/rss+xml"/>
<description>Academic website and blog</description>
<generator>quarto-1.8.24</generator>
<lastBuildDate>Mon, 06 Oct 2025 05:00:00 GMT</lastBuildDate>
<item>
  <title>simglm v0.9.23: Propensity Score Modeling</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2025-10-06-simglm-propensity-modeling.html</link>
  <description><![CDATA[ 




<section id="section" class="level1">
<h1></h1>
<p>Building on last week’s post about <a href="../posts/2015-09-24-simglm-propensity.html">propensity score simulation</a>, the <code>simglm</code> package has been extended to now allow for the estimation of power in addition to the propensity score simulations. Recall, propensity scores can be helpful for causal inference with intact groups, when random assignment was either not possible or not done. This allows for the estimation of power under all three supported propensity score methods:</p>
<ul>
<li>Covariate adjustment</li>
<li>Inverse propensity score weighting</li>
<li>Stabilized propensity score weighting</li>
</ul>
<p>One nice feature is that no additional simulation arguments are needed to handle the model fitting and replication procedures. These pass directly from the previous functionality handled from within the package. One small adjustment was made internally to allow for the inclusion of the propensity score covariate when that option is specified. Since this term is not usually of substantive value, it can be filtered out from the final output as well.</p>
<p>If you haven’t already, remember to first install the simglm package from GitHub.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">remotes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lebebr01/simglm'</span>)</span></code></pre></div></div>
</div>
<section id="fitting-a-covariate-adjusted-model." class="level2">
<h2 class="anchored" data-anchor-id="fitting-a-covariate-adjusted-model.">Fitting a covariate adjusted model.</h2>
<p>The below code does the following steps:<br>
1. Simulates the data with the propensity model. That is, the treatment attribute is simulated as a function of age and SES so that those that are older and higher SES are more likely to be in the treatment group. 2. Simulates the full model to generate scores for student achievement. 3. Fit propensity score model to the simulated data. 4. Fit the final model, with the estimated propensity scores included as a covariate, and store model estimates. 5. Repeat steps 1–4 for 500 replications (illustrative only; use more in practice).</p>
<p>To fit the propensity score adjusted covariate model, <code>propensity_type = 'covariate'</code> is added to the propensity model simulation arguments.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(simglm)</span>
<span id="cb2-2"></span>
<span id="cb2-3">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb2-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb2-7">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb2-8">    ),</span>
<span id="cb2-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb2-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb2-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb2-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-13">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb2-14">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb2-15">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb2-16">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb2-17">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb2-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb2-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb2-20">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb2-21">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb2-22">    ),</span>
<span id="cb2-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_fit =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb2-24">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_function =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lm'</span>),</span>
<span id="cb2-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-26">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb2-27">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'covariate'</span></span>
<span id="cb2-28">    ),</span>
<span id="cb2-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replications =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb2-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extract_coefficients =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb2-31">)</span>
<span id="cb2-32"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replicate_simulation</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-33">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">compute_statistics</span>(sim_arguments, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alternative_power =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, </span>
<span id="cb2-34">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type_1_error =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  term   avg_estimate power param_estimate_sd avg_standard_error precision_ratio
  &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt;             &lt;dbl&gt;              &lt;dbl&gt;           &lt;dbl&gt;
1 (Inte…      50.0    1               0.814              0.850             0.957
2 age          0.101  0.6             0.0383             0.0401            0.954
3 motiv…       0.400  1               0.00519            0.00500           1.04 
4 prope…      -0.0192 0.028           1.19               1.25              0.955
5 ses          0.249  0.984           0.0547             0.0572            0.956
6 trt          1.18   0.986           0.264              0.262             1.01 
# ℹ 1 more variable: replications &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="fitting-a-ipw-adjusted-model." class="level2">
<h2 class="anchored" data-anchor-id="fitting-a-ipw-adjusted-model.">Fitting a IPW adjusted model.</h2>
<p>The below code does the following steps:<br>
1. Simulates the data with the propensity model. That is, the treatment attribute is simulated as a function of age and SES so that those that are older and higher SES are more likely to be in the treatment group. 2. Simulates the full model to generate scores for student achievement. 3. Fit the propensity score model to the simulated data 4. Fit the final model, using inverse propensity score weighting, and store model estimates. 5. Repeat steps 1–4 for 500 replications (illustrative only; use more in practice).</p>
<p>The only addition needed is to add, <code>propensity_type = 'ipw'</code> to the propensity model simulation arguments.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb4-2">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb4-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb4-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb4-5">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb4-6">    ),</span>
<span id="cb4-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb4-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb4-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb4-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb4-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb4-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb4-13">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb4-14">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb4-15">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb4-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb4-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb4-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb4-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb4-20">    ),</span>
<span id="cb4-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_fit =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb4-22">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_function =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lm'</span>),</span>
<span id="cb4-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb4-24">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb4-25">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ipw'</span></span>
<span id="cb4-26">    ),</span>
<span id="cb4-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replications =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb4-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extract_coefficients =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb4-29">)</span>
<span id="cb4-30"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replicate_simulation</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">compute_statistics</span>(sim_arguments, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alternative_power =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, </span>
<span id="cb4-32">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type_1_error =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  term   avg_estimate power param_estimate_sd avg_standard_error precision_ratio
  &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt;             &lt;dbl&gt;              &lt;dbl&gt;           &lt;dbl&gt;
1 (Inte…      50.0    1               0.312              0.216              1.44
2 age          0.0978 0.856           0.0434             0.0252             1.72
3 motiv…       0.400  1               0.00978            0.00501            1.95
4 ses          0.254  1               0.0550             0.0204             2.70
5 trt          1.23   0.958           0.377              0.263              1.43
# ℹ 1 more variable: replications &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="fitting-a-sbw-adjusted-model." class="level2">
<h2 class="anchored" data-anchor-id="fitting-a-sbw-adjusted-model.">Fitting a SBW adjusted model.</h2>
<p>The code below performs the following steps.</p>
<ol type="1">
<li>Simulates the data with the propensity model. That is, the treatment attribute is simulated as a function of age and SES so that those that are older and higher SES are more likely to be in the treatment group.</li>
<li>Simulates the full model to generate scores for student achievement.</li>
<li>Fit the propensity score model to the simulated data</li>
<li>Fit the final model, using stabilized propensity score weighting, and store model estimates.</li>
<li>Repeat steps 1–4 for 500 replications (illustrative only; use more in practice).</li>
</ol>
<p>The only addition needed is to add, <code>propensity_type = 'sbw'</code> to the propensity model simulation arguments.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb6-2">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb6-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb6-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb6-5">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb6-6">    ),</span>
<span id="cb6-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb6-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb6-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb6-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb6-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb6-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb6-13">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb6-14">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb6-15">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb6-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb6-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb6-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb6-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb6-20">    ),</span>
<span id="cb6-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_fit =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb6-22">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_function =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lm'</span>),</span>
<span id="cb6-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb6-24">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb6-25">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sbw'</span></span>
<span id="cb6-26">    ),</span>
<span id="cb6-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replications =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb6-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extract_coefficients =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb6-29">)</span>
<span id="cb6-30"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replicate_simulation</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">compute_statistics</span>(sim_arguments, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alternative_power =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, </span>
<span id="cb6-32">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type_1_error =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  term   avg_estimate power param_estimate_sd avg_standard_error precision_ratio
  &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt;             &lt;dbl&gt;              &lt;dbl&gt;           &lt;dbl&gt;
1 (Inte…       50.0   1                0.337             0.217              1.55
2 age           0.101 0.858            0.0433            0.0253             1.71
3 motiv…        0.401 1                0.0103            0.00504            2.04
4 ses           0.254 0.998            0.0579            0.0205             2.83
5 trt           1.19  0.928            0.402             0.264              1.52
# ℹ 1 more variable: replications &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="comparing-model-estimates-with-and-without-propensity-scores." class="level2">
<h2 class="anchored" data-anchor-id="comparing-model-estimates-with-and-without-propensity-scores.">Comparing model estimates with and without propensity scores.</h2>
<p>As a final example, let’s see what happens when we generate data with propensity scores, but do not account for this within the model fitting. To omit the propensity scores being fitted, the <code>propensity_model</code> simulation arguments can be omitted. I’m fitting three different types of models to this:</p>
<ul>
<li>The full model, including a propensity score analysis using stabilized propensity weights.</li>
<li>The full model without any propensity score analysis, but statistically adjusting for the observed covariates used in the propensity score model.</li>
<li>A reduced, misspecified model that omits age and SES and does not include a propensity score model.</li>
</ul>
<p>The last misspecified model should produce an average treatment effect that is severely biased as the treatment group was not random, instead, the treatment group specification was a function of age and SES.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-2">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb8-5">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb8-6">    ),</span>
<span id="cb8-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb8-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb8-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb8-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb8-13">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb8-14">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb8-15">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb8-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb8-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb8-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb8-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb8-20">    ),</span>
<span id="cb8-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_fit =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-22">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_function =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lm'</span>),</span>
<span id="cb8-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replications =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb8-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extract_coefficients =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb8-25">)</span>
<span id="cb8-26">no_propensity <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replicate_simulation</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-27">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-28">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'no_prop'</span>)</span>
<span id="cb8-29"></span>
<span id="cb8-30">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-32">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-33">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb8-34">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb8-35">    ),</span>
<span id="cb8-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb8-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb8-38">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb8-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-40">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-41">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb8-42">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb8-43">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb8-44">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb8-45">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb8-46">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb8-47">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb8-48">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb8-49">    ),</span>
<span id="cb8-50">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_fit =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt,</span>
<span id="cb8-51">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_function =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lm'</span>),</span>
<span id="cb8-52">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replications =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb8-53">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extract_coefficients =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb8-54">)</span>
<span id="cb8-55">missspec <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replicate_simulation</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-56">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-57">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'miss_spec'</span>)</span>
<span id="cb8-58"></span>
<span id="cb8-59">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-60">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-61">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-62">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb8-63">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb8-64">    ),</span>
<span id="cb8-65">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb8-66">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb8-67">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb8-68">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-69">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-70">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb8-71">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb8-72">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb8-73">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb8-74">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb8-75">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb8-76">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb8-77">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb8-78">    ),</span>
<span id="cb8-79">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_fit =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-80">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_function =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lm'</span>),</span>
<span id="cb8-81">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-82">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-83">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sbw'</span></span>
<span id="cb8-84">    ),</span>
<span id="cb8-85">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replications =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>,</span>
<span id="cb8-86">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extract_coefficients =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb8-87">)</span>
<span id="cb8-88">sbw_propensity <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replicate_simulation</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-89">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-90">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sbw'</span>)</span></code></pre></div></div>
</details>
</div>
<p>Let’s visualize the differences across the three methods, with a vertical line at the specified population treatment effect. You can see that when nothing is done with the misspecified model, the estimated treatment effect is biased severely. The simple covariate adjusted effect without fitting the propensity score model produces an estimated effect similar to the specified population treatment effect, but may slightly underestimate variance. Finally, the propensity score model with the stabilized propensity score weighting produces an unbiased treatment effect and may produce a more accurate picture of variability in this treatment effect.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">sbw_propensity <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb9-2">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(no_propensity)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb9-3">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(missspec) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-4">    dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(term <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'trt'</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb9-5">    ggformula<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gf_density</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>estimate, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> group) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb9-6">    ggformula<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gf_vline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>)</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://brandonlebeau.org/posts/2025-10-06-simglm-propensity-modeling_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>These examples show how simglm can be used not only to simulate propensity score models but also to estimate power under different adjustment strategies. By simulating under known conditions, you can evaluate the robustness of your causal modeling choices before applying them to real data. Because these same simulations can also track significance rates across replications, you can easily extend them to estimate statistical power under different adjustment strategies.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sessionInfo</span>()</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.0 (2025-04-11)
Platform: aarch64-apple-darwin20
Running under: macOS 26.0.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] C.UTF-8/C.UTF-8/C.UTF-8/C/C.UTF-8/C.UTF-8

time zone: America/Chicago
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] future_1.58.0 simglm_0.9.23 ggplot2_4.0.0

loaded via a namespace (and not attached):
 [1] utf8_1.2.6          generics_0.1.4      tidyr_1.3.1        
 [4] gtools_3.9.5        stringi_1.8.7       listenv_0.9.1      
 [7] hms_1.1.3           digest_0.6.37       magrittr_2.0.3     
[10] evaluate_1.0.5      grid_4.5.0          RColorBrewer_1.1-3 
[13] fastmap_1.2.0       ggformula_0.12.0    jsonlite_2.0.0     
[16] backports_1.5.0     purrr_1.1.0         scales_1.4.0       
[19] codetools_0.2-20    cli_3.6.5           labelled_2.14.1    
[22] rlang_1.1.6         parallelly_1.45.0   future.apply_1.20.0
[25] withr_3.0.2         yaml_2.3.10         tools_4.5.0        
[28] parallel_4.5.0      dplyr_1.1.4         mosaicCore_0.9.4.0 
[31] forcats_1.0.0       globals_0.18.0      broom_1.0.8        
[34] vctrs_0.6.5         R6_2.6.1            ggridges_0.5.6     
[37] lifecycle_1.0.4     stringr_1.5.2       htmlwidgets_1.6.4  
[40] MASS_7.3-65         pkgconfig_2.0.3     pillar_1.11.0      
[43] gtable_0.3.6        glue_1.8.0          haven_2.5.4        
[46] xfun_0.53           tibble_3.3.0        tidyselect_1.2.1   
[49] knitr_1.50          farver_2.1.2        htmltools_0.5.8.1  
[52] labeling_0.4.3      rmarkdown_2.29      compiler_4.5.0     
[55] S7_0.2.0           </code></pre>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>R</category>
  <category>simglm</category>
  <category>modeling</category>
  <category>propensity scores</category>
  <guid>https://brandonlebeau.org/posts/2025-10-06-simglm-propensity-modeling.html</guid>
  <pubDate>Mon, 06 Oct 2025 05:00:00 GMT</pubDate>
</item>
<item>
  <title>simglm v0.9.22: Propensity Score Simulation</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2025-09-24-simglm-propensity.html</link>
  <description><![CDATA[ 




<p>I haven’t written about my <code>simglm</code> package in a while. Behind the scenes, numerous changes have been made to enhance the package. The current CRAN version is significantly behind, but my goal is to submit the most recent version to CRAN soon, once I finalize the details for my upcoming book on simulation and power analysis with R, published by CRC Press.</p>
<p>One of the final implementations required for this book is conducting a simulation and power analysis for propensity scores. Propensity scores can be helpful to adjust for observed/collected data when randomization was not done or was not feasible. Propensity scores are used to estimate the probability that a data unit is included in the treatment condition using a function of observed data attributes. This procedure can help adjust, statistically, for differences in data attributes across the treatment and control groups.</p>
<p>For example, we would not be able to assign people to smoke randomly, so instead, we need to collect information from people who already smoke compared to those who do not smoke. Due to people self-selecting to smoke or not, these groups would likely differ, which would make the impact of any potential health outcomes vary due to baseline differences. Propensity scores help balance the groups based on observed characteristics before any intervention.</p>
<p>With these simulation tools, you can now not only model realistic quasi-experimental data but also assess how much sample size you need to detect treatment effects reliably.</p>
<section id="simglm-simulation-for-propensity-scores" class="level2">
<h2 class="anchored" data-anchor-id="simglm-simulation-for-propensity-scores"><code>simglm</code> simulation for propensity scores</h2>
<p>In the most recent version of the <code>simglm</code> package on GitHub, support for simulating data using propensity scores is now available. The simulation procedure takes a two-step approach.</p>
<ul>
<li><strong>Step 1</strong>: Simulate the group membership using logistic regression as a function of some data attributes.</li>
<li><strong>Step 2</strong>: Simulate any additional attributes and incorporate the group membership from step 1. Step 1 is essential, as now the group membership would not be randomly assigned; instead, whether someone is simulated to be in the treatment group would depend on the attributes specified in step 1.</li>
</ul>
<p>First, ensure that you install the updated <code>simglm</code> package from GitHub, along with the <code>remotes</code> package.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">remotes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lebebr01/simglm'</span>)</span></code></pre></div></div>
</div>
<p>Here is an example of how step 1 can be specified within the <code>simglm</code> package. A new named element to the simulation arguments, called “propensity,” specifies the components used to generate the group membership. The required elements in here are similar to those from the <a href="https://simglm.brandonlebeau.org/articles/tidy_simulation.html">Tidy Simulation vignette</a>. It is essential to define the attributes that distinguish a person’s inclusion in the treatment or control group using the model formula. In the example below, age and socio-economic status (SES) are the two data attributes being used to define who belongs in the treatment or control group. The regression weights argument specifies the relationship between being in the treatment or control group.</p>
<p>Finally, with the <code>outcome_type = 'binary'</code> specification, logistic regression is used to estimate the propensity scores and generate the probability of being in the treatment or control group.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(simglm)</span>
<span id="cb2-2"></span>
<span id="cb2-3">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb2-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb2-7">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb2-8">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb2-9">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb2-10">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">250</span>,</span>
<span id="cb2-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb2-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.15</span>),</span>
<span id="cb2-13">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb2-14">    )</span>
<span id="cb2-15">)</span>
<span id="cb2-16"></span>
<span id="cb2-17">prop_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_propensity</span>(sim_arguments)</span></code></pre></div></div>
</div>
<p>Once we simulate the propensity data, we can visualize the balance between the treatment and control groups by the two data attributes, age and SES.</p>
<section id="age-balance" class="level3">
<h3 class="anchored" data-anchor-id="age-balance">Age balance</h3>
<p>First, examining the balance by age reveals that individuals in the treatment group tend to be older than those in the control group. These are differences that may be meaningful and impact the estimation of the actual treatment effect.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggformula)</span>
<span id="cb3-2"></span>
<span id="cb3-3">prop_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gf_density</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> age, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(trt)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gf_labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Treatment"</span>)</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://brandonlebeau.org/posts/2025-09-24-simglm-propensity_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ses-balance" class="level3">
<h3 class="anchored" data-anchor-id="ses-balance">SES balance</h3>
<p>The SES balance is again in the positive direction, with the treatment group coming from slightly higher SES backgrounds compared to those in the control group. Without adjusting for this, the treatment effect would likely be biased.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">prop_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb4-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gf_density</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> ses, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(trt)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gf_labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Treatment"</span>)</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://brandonlebeau.org/posts/2025-09-24-simglm-propensity_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="full-data-simulation-with-propensity-scores" class="level2">
<h2 class="anchored" data-anchor-id="full-data-simulation-with-propensity-scores">Full data simulation with propensity scores</h2>
<p>Below is an example that incorporates a full data simulation with the treatment group generated from the propensity score model (i.e., logistic regression). In this hypothetical example, we aim to model student achievement as a function of motivation, the treatment group (generated via propensity scores), age, and SES. The simulated treatment effect was specified as 1.2. This effect was generated not to be a standardized effect size here, as this is entirely hypothetical; however, it is often easiest to specify effects as standardized effect sizes.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb5-2">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb5-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb5-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb5-5">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb5-6">    ),</span>
<span id="cb5-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">250</span>,</span>
<span id="cb5-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb5-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb5-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb5-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb5-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb5-13">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb5-14">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb5-15">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb5-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">250</span>,</span>
<span id="cb5-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb5-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb5-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb5-20">    )</span>
<span id="cb5-21">)</span>
<span id="cb5-22">sim_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_fixed</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sim_args =</span> sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-23">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_error</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sim_args =</span> sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-24">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_response</span>(sim_arguments)</span>
<span id="cb5-25"></span>
<span id="cb5-26">DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(sim_data)</span></code></pre></div></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-3e645c7c1cd6dda2f073" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3e645c7c1cd6dda2f073">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[-16.55845890248592,17.29923940026248,9.701212938868657,18.52446526932389,-0.9409835851450509,14.80483305788772,-14.13416960535694,-3.138071987607506,27.44647601675095,-27.26698092793321,0.428597426496982,4.477250552642113,-6.085744616196735,-10.3485671405797,-20.26581962291063,10.53020524333922,8.603972250691028,8.286733526278004,-7.303090883442868,-46.24272019956182,13.56173495222184,-14.15524124500364,-38.18497894330684,-6.071537338325513,17.1468218240721,28.39093519235439,-8.50713236315219,5.042612681590456,13.66406578875017,-30.69700574726478,20.12418730877472,45.53493250301324,2.900134636450082,-2.236324864634048,42.24962260234746,-7.100619367338181,44.41673938443834,26.65468771977971,-37.67253265995442,-2.40581903121987,-25.83227925779682,41.8733923062898,-7.343050635382947,17.98941640419773,-19.26909995746879,23.90818050747025,0.5584394607066139,9.172883400424656,9.239809013432209,24.73681111546517,-34.77012118845649,33.94985701098665,13.35290550283043,-2.300496244700075,-1.491953257877089,-28.83741565278581,-1.219931520511901,-35.15320670383323,3.017308561228611,-1.945887162301276,23.93364092177222,4.931948080713309,18.09762216176462,32.17451186890595,-41.14400322301158,-3.318953839898384,2.876235834289242,0.5728649288363266,15.3807203374488,18.13620435077761,-38.77814231649186,26.97860422565028,25.56686249797091,-17.0036673331174,-30.3806538689179,10.70847907652514,-7.596001782677141,16.65821861728465,3.393109038744336,-22.80264114212516,14.91820506529285,-8.284270168762101,-27.40672187072572,-11.96825769004681,13.84804044830275,0.6833210217806508,-20.54697567395236,8.874968451860534,-27.08027126547541,-20.45199046102216,-4.333109549460267,15.66170708946872,25.48351335498129,5.646657754369656,1.552805942576852,-27.37175009604998,44.1600022860576,-6.817594958927563,-8.862771102683764,-16.45603732341294,-43.59725818867307,2.480430232716339,-24.27588106124826,-12.85296805957903,-43.90864140427328,-21.7350263143189,-1.050307954327585,11.43733699653775,3.315690572748914,-18.16205298809074,13.58877244123342,41.59636312796358,40.82527381145916,-47.88043822057145,-4.456055264154759,-7.396529337545506,-26.05437494288935,12.31227848843316,-17.11173826835937,1.55347587482592,-7.394556595817138,13.64389360659302,-1.678323372471594,24.77324592681627,23.26780471752305,24.2763172593412,-15.35501934283107,-0.6354400318591027,14.2554484322648,17.27123025939448,-12.06054051283826,22.06607936794983,-27.01044678467724,5.197352954496878,4.421627461017471,7.313157937388649,-20.8749329339412,-8.26417993676816,-26.58088633184399,-12.18873400132542,24.5511292343209,-1.921963620787735,16.84171468505493,15.76155441004192,23.23529791144836,21.49829076594619,12.07843339888906,-22.77681097519452,-35.91947386878233,2.703099028783671,7.966790118742678,-13.85877577796134,-10.39876860038603,8.289448913968933,-25.12910405341611,-26.43143670675071,11.72384510376607,-0.370606047027141,27.52266540581109,-11.0874851184684,-25.62150039587912,5.999627489536406,9.657931278079264,-2.552875463820439,18.21198862993963,13.16007548053502,8.21035356089428,20.82796877657735,-9.697123784114691,8.965627458272929,-8.152753324946115,-17.6997577591943,-6.461133745859408,17.2094648585025,-45.00618300078276,1.677629694695227,6.753396674907136,3.834760816842659,-35.47469773503118,9.025467759531397,-14.61270618138413,4.389618991050192,-16.58753623579161,-12.03680336333801,14.86066331833145,-17.90702159466649,21.42292750342666,-5.572859852424973,13.56831805250456,-15.6745108602843,13.70866627983224,34.73485134586391,-1.557598691323445,-5.203711881258272,-16.40388682592403,36.38565393687436,-28.5320554054541,1.814818825512794,-5.395238666451529,-41.83018696420937,-1.516208534567222,10.65256953538318,-5.667748995912614,8.434698654104213,15.24254804730094,6.314365164363464,13.26263496426614,25.87263929435196,-17.2080159736773,-19.07101932349395,3.114756054203565,4.416131194741259,8.574836342380227,27.71255633293357,26.16398114133734,-41.47521305554876,1.023709234892819,13.5183557628988,-11.49458498310866,-7.082639999798564,11.84906087647126,14.89207845713697,-10.80921872164412,-27.8326718328033,-35.17887019070005,2.886956087935841,-7.757819195409733,-12.1855131199057,-52.96369177724721,7.074463634027621,32.08990948518589,-23.0254240843293,34.1779643896953,-19.52538967782719,-9.015869962689143,1.215894244527626,12.35465935923471,-44.27322715008293,-2.119756569141113,23.75620976201041,-22.72833861201397,-0.7748176507205797,-20.32851590040576,5.194081080801008,-20.20333466111067,-21.77718614656908,29.71790534741652,-18.31689044553388,-21.39381034891035,-1.782145802194254],[1,1,0,1,1,1,1,0,0,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,0,1,0,1,0,0,0,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,1,0,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,0,0,1,0,1,1,1,1,1,0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,0,0,1,0,0,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,0,0,1,1,0,0,0,0,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0,1,1,1,0,0,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,0,0,1,1,1,1,0,1,0,0,1,0,0,1,0,1,1,1,1,0,0,1,0,1,0,1,1,0],[-7,-5,-7,-2,-6,-6,1,7,-5,-3,5,6,1,-7,2,7,-4,-4,1,3,7,-6,5,1,-7,-3,7,-6,0,-7,-4,-7,-1,6,6,7,7,-6,-7,1,0,7,-6,-5,3,3,7,-6,4,0,-1,-2,-4,0,-2,-7,5,2,2,6,-4,3,-2,-7,-6,2,3,3,6,4,7,-1,-5,-7,5,-3,-4,4,4,-3,-3,7,-6,6,-7,-5,-1,4,4,-7,-6,4,-5,6,-4,-3,3,-4,5,-2,-2,-5,0,-5,1,-7,3,4,-6,3,-7,-1,-1,5,-7,2,4,5,0,-6,-4,-2,7,-7,4,-3,-4,5,-7,4,4,-5,5,-6,5,-4,-4,7,-5,-1,-1,-6,-2,6,3,4,6,0,4,-2,2,-6,0,7,1,1,6,0,-3,7,5,-5,-2,6,0,-3,-1,0,5,-7,0,-5,6,6,1,6,0,7,-4,-2,1,-5,-3,5,-6,4,-5,-6,5,-1,-7,4,-1,-7,3,-7,1,-7,1,1,4,-2,-5,-5,-6,0,-1,-1,3,6,2,-7,-5,-1,1,-2,0,-1,3,0,2,1,-5,-4,6,1,1,4,0,1,6,-3,7,6,5,-7,1,6,5,1,5,-6,-7,-1,-1,3,-4,0,-2,-7],[-0.5668457047442026,6.625256175252963,9.73809159474278,-4.108464734025224,-0.691790126471442,-2.34443566411296,-5.679145272468562,5.097174319233294,2.9208452561578,6.569923316056786,-12.44861145127066,-4.65326843212136,-5.687166590597831,4.189817859204343,-1.010888459751025,1.594815831835537,-0.8344142323376609,2.954128799984772,2.457056005567118,2.008448514871862,5.041645515558848,-10.684153047889,-1.04201159680134,-1.872634780307984,1.477369782025335,-7.515289433461053,3.65413575340902,-0.5114714704274889,-3.883984684780344,7.763307510953926,4.920464783404968,1.039276692045709,-4.861231304195584,5.306111261505825,-11.84541887258619,-2.926892233438049,2.735389543486954,1.990916683877939,-5.33852033896295,1.467300020735296,2.812603952673065,10.22090835703349,-6.655138153849594,2.464636635094234,-9.226469451836467,3.692150346594874,-2.01878154568496,7.722826413227009,-3.130618710049191,-1.235046075703161,-2.086129306973785,-6.52723143732966,3.862428613561673,5.464324105596814,0.2800892615708512,3.076812043027077,-3.035679038514052,0.3166092977937163,3.894809652351654,-3.729003802377526,9.924350566447179,7.369133088900367,3.332760507401274,-6.279207908336893,1.320785853887306,-6.380594850534993,-3.020325029740428,1.654979469804705,4.314599783634689,-4.478981064068116,1.155872882201042,1.620726523857735,7.73466865646891,6.350044789837308,0.2430078757330123,-1.448691156225461,0.1285615979958726,-10.96661961306703,0.894918862889049,-3.68960449428275,10.63556426430708,0.9119204452787543,4.280479386051713,-6.379528181533791,-3.912617044798024,-3.632691101434587,0.401581963399291,-2.82761786415175,3.637231658037061,-0.5913843272220566,-2.772835747458527,-0.5117621180944263,-2.535295431719675,-1.150777235404185,0.5574724371424915,10.37668391050936,5.267958330043049,5.537827262780742,-2.701166232779765,2.522536366894431,0.6940880456111926,-6.085200322149542,5.560044830791725,-6.64054763188238,-3.496872951464112,-3.62331872100475,-4.967711965088687,-7.63772438628758,-11.4636630223683,-3.108800491046063,3.050337827370897,-3.045870773187384,-6.84985623515094,-9.260100054411787,-2.179407241885081,-1.207834207836973,2.587330631909323,-1.895387950877575,3.752675861115593,0.5508701120912097,5.969129943616821,4.300954468143888,-6.785636864417787,1.879469732315574,-3.187829768859744,-1.997112796757327,-1.866029717662205,6.569549209006019,3.358453790877735,4.704508985624797,4.28247332681728,1.579135152729397,-3.354784396653984,-2.852772750385706,-6.867246290446619,1.848489517530112,10.9850012432611,3.934371657127226,-0.4482245134214571,-4.872886900311643,-4.349661118953405,-8.249251782404709,-2.102953375647686,2.289845087310945,-9.906145184458088,-6.044496936003894,-4.077453094565558,0.5294293333482316,1.453780825528149,2.470347325723408,2.210864093640994,4.346712946739697,-3.021709062020581,-4.790789955303213,-4.771097657276288,0.8682084256760951,0.5637865708433188,-3.353009199748592,-0.4997391798259301,-11.84250989879932,-0.5738474534942746,-2.055404324137824,0.9921636435106043,8.730795685435851,3.069138940601474,2.746596733810776,5.446824884332095,-3.887999051175609,2.723311780008575,3.418709576668606,0.3027068703844082,0.4638093995769824,-1.848032534551543,3.404522192447963,3.263542322242184,5.354169139696595,13.11548445863712,-9.701065790819024,9.237398716991516,-0.2242524186646407,-2.087985055934745,-5.295788501079231,-1.576868507611608,-1.829255372494107,3.963953543817677,-0.8919748040894888,-3.624005085737836,-9.885019360206007,4.568403025393065,6.184766686574401,0.8166093880557806,8.7339306867757,-5.146270837991946,0.340110936841073,-1.61222951494303,-5.091209146095928,0.9528992779529265,-5.548414837018855,8.393392004716356,7.004502336912916,-3.048834775969818,-1.538490873911576,2.985108922154423,1.445897969385556,11.78182956119013,-6.081233110207691,7.998113153271436,6.643751960708783,1.774385764230015,-4.468519155823408,-2.822946761784022,-1.201151091859724,-1.976782905004849,1.507453102791779,3.206999049737042,11.46976482504902,-3.790264524106569,1.954729779080937,-12.44958508983462,-4.942621283383419,6.657321013140961,-0.7934155703934735,1.060649550326108,-0.3117444849528598,-10.8276149783334,-9.053135325919454,-5.312500209409635,-6.147469176747048,1.791179898366153,0.05380448336849798,4.302967539114849,7.984939603556641,-4.591920070387112,4.382732098768985,-1.075803886646556,-5.443734639730065,5.914230496124727,-4.861874150069683,-2.868655705514682,-0.4762313030698368,7.646170995577459,0.7027030103886229,1.340239565886995,-4.006252241392149,1.732506505827153,-2.30479724364731,5.692807461567222,1.487063274685764,-3.83976185325269,-0.2155058937655596],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250],[-3.425243366729406,-3.723872841970961,-3.078326259438465,5.245247118050915,0.5307832045558641,-2.07100967534756,-0.5854613536696461,0.4384622671262099,-2.931924732175457,1.698205991259877,0.06853277807271557,-2.212714158930331,-0.3055543538185877,-4.085197970719627,-6.031925063583844,-2.140216091450667,4.591372263986766,-7.728181229228253,-1.018336703836586,3.137529752565141,-2.138565883449017,-0.08492461480101508,-0.7082494194339866,1.635448582962554,-0.6706314339752364,-2.350050486431297,1.605908837967867,0.3964230692080143,0.2595926747043157,7.96709493155864,-1.829511271563591,-2.486941368732572,3.686538938632903,2.51148733044558,-4.92383994528912,1.85023700378965,-1.10518267477508,-7.874898966935078,0.9673024414992006,3.197089821592768,1.824626308069635,-2.922666583482085,-7.685909756217782,-0.3567533501733109,1.655681836435394,-0.2356237433001758,-3.610890522534211,0.9671897409384076,-1.652525318537087,-4.958299562487731,-1.853428582038681,1.291413416866193,0.7720376950721923,0.8393342112219431,-0.2954253947561827,-5.503046031136953,2.348181889171016,0.8090277984417618,-0.3804896152457887,0.3885684283144496,-1.582227851936296,0.6994975382619334,0.4502226663810938,-0.6205717983689868,3.841130863535367,0.9344722882265063,0.5753168302330917,0.7870840400030306,-0.6120268148802382,4.708764740210771,-3.680500580337674,-1.622263757721598,4.079231859824328,5.463850683994083,-1.6677751175052,3.461147142766395,-2.908906604192808,3.41814801991921,1.623533371435185,-0.08282887327774216,-1.83432696813763,-4.756838088043952,-0.02869952017039232,-4.222202339844292,-2.523233519560401,-5.084775302765106,3.326595579806014,-4.455427289555426,7.603611912534933,-0.4529275310683488,4.568302097388284,2.432858483571321,3.177718207738133,-1.974401283302359,-2.75188814300295,2.278731704961784,2.32777720184835,1.282678483424599,-2.208022832085366,-3.022014763292178,0.9898388445927069,-1.12675096842153,1.17406507357879,-1.17094991312706,-0.8412897445451443,-0.9052072737565594,-2.301979719576072,2.17919486594656,2.315379018954409,2.52023484293379,0.4746516924887326,4.25596473091821,2.267902908271146,-0.6084494796073194,6.289407773981322,0.5705267168134308,-2.102375811473357,3.175867624078354,-2.438957412381099,0.7880670757956473,-2.656964035922448,-0.2787078652877469,3.898593512307463,-0.5274065230179149,6.381753938616047,-2.196023713572595,4.720413203812158,4.430831187998134,5.638535841404022,-3.245188318869551,-0.208683042902622,-1.91616537014522,-0.2685862224198532,1.124872216061314,1.056727679683155,-2.935187546652398,-0.8517317250473015,-1.118553231765945,-1.37475594251596,0.7193690374558771,-0.8781016960877547,1.547630514878411,0.9427479931888013,-2.254748897244021,-3.219177124569796,0.2142762741328437,-0.4096526684800967,10.12362405463166,-2.279300955923391,-0.8321415302119602,4.614710211107152,1.877469161803094,3.288311267624886,-2.074711383337268,-3.522850773944294,-0.01557740730387071,0.7073870888919863,-3.449291017755609,1.66760306239967,-0.9012614762033953,-6.157405563070357,1.167951110914507,-1.899931698762311,-3.005279057006933,6.493138078321995,-2.524647830129905,-1.319887080346277,-0.9043212899127926,-1.160715217638896,-3.334413495432309,-1.357388873422274,2.618378673660295,0.2642750012911342,2.734866011805584,2.014174057721707,0.8193867998816453,1.185583517003448,1.420974833790937,3.554743662989642,2.864311805629602,-0.4570345960870497,-2.092630774961079,0.7812979214783955,-2.454636827769475,2.747875188003513,0.8786870443752305,3.00358751371594,0.6442934381865583,-1.065463030576793,1.76675607829296,1.563824586056346,-3.470177628589215,-5.364380169835634,2.244735694150217,1.073584736596905,4.304540868943297,1.099203006307767,-0.4709582760293033,-3.344228658344678,3.728260930944006,-2.43741278922565,5.49511748962086,2.034966985260796,1.475717822118873,0.1959583527699496,1.306109669235363,0.6266855025112131,4.248584549974236,-0.4525616309566651,3.977766845590075,2.491980255456075,0.01157011309584581,-0.3614211518111787,-0.6766964005654647,0.6309983692135889,1.751141717791936,7.381531904967448,4.742696919904063,-1.076406464216402,4.027814246979125,-3.678602260322423,9.550653617363396,-2.554089719588347,-1.100687512223623,2.616298258009222,4.184467128648705,0.3510676862761439,0.2171513821871607,-2.863695723825071,0.02338590435634466,-3.826480824107969,-1.648942185399633,4.314649419386618,-2.311501629666958,0.05497824003565751,-3.61545574017924,2.648030634016356,0.1125632912696495,-2.813333107643236,-2.709366578055062,-6.196336018413316,4.514995933922968,5.524958469573407,-5.181677048225765,-3.549387454187056,5.859059952766536,-3.313539913913943,3.395986042578131,3.891266564070795,-1.157877156395171],[43.73490501281958,59.27600980391824,55.61500807423315,57.38266992422325,50.05065903432412,55.93582430712685,44.22654583974009,50.71906478476532,61.20880172073983,41.63568845784092,48.75928610778113,52.42758311302651,47.44391050587186,46.2080276085692,43.040950035898,56.51078605529458,54.03298534219201,53.6532256105074,48.99302764801464,33.50502404889324,58.58510535977845,42.26686524002629,36.16550552347693,47.20322636959281,56.52807117513517,60.3775517185765,48.21068099309138,52.48917720502931,54.49463014430498,38.96202457883257,58.87979111936114,68.97379217421671,51.04474602853114,51.03199786952284,65.73849432279243,48.32802919470522,70.35054313964709,61.75960425888137,34.09635685127749,50.70449739269588,41.57023928504955,70.00458401177428,45.99899520738442,58.51192572045265,41.48574265405337,60.78630978963682,51.61868039786141,54.99985996347662,54.51326892786059,60.78596292726028,36.67041919787395,61.74813494506225,57.10676935452259,51.64588252851917,50.47324101224188,38.53423674964244,50.45310763216673,37.41786964291514,52.38062583757936,50.08939418448512,61.65454401032068,54.11506250451041,57.87223899155617,61.80000277047816,34.4725951742672,48.4772697514069,51.89541307628059,52.14289083898571,59.0309380808882,57.73473647429402,36.67771129395352,62.29662332122455,61.66041216330559,44.08604426421236,39.60849042136609,54.82121884155369,46.59373968642812,55.52163254364711,51.98097333122,40.85654241957926,58.32617309219391,48.81427204381485,40.70743109822264,45.41781487859783,55.0610619181216,50.06515563335362,42.98160522126888,54.44308291470627,41.6771994083191,40.97135773378562,48.17354724335127,57.73674230626388,59.0595814840626,53.77096879289682,50.36049048631637,41.34547093920735,69.2809904969338,48.25741883212417,47.47960000073155,43.84821916235843,33.73461873593357,50.17087201254915,42.87965878319863,43.8986758681978,32.86232520042466,39.70015979402125,49.83794882699679,54.26550370204321,47.86036047350748,43.45797868200219,55.49809343333609,66.97707755788859,65.71764546579594,30.23279969816847,48.17272608386683,48.13942971302256,40.62508268082158,56.15106440765388,45.29347365793515,51.35910787795317,48.13445984757735,57.53279605967318,49.53226143490692,59.6791658038054,60.11016444479428,60.11124870454715,44.19148483345202,51.88821128950786,55.84179282062535,59.68461935016399,46.64640212656901,58.72121553536228,40.05712518696561,51.96574799420233,51.75183941179534,54.18738555433799,43.9962771372388,49.57792093957455,38.75558933890704,45.00628467439192,59.83303641399001,47.76890160608373,57.21094753011005,58.6770830358445,58.31758286846482,58.6881920723775,55.61201008591424,42.22163294325925,37.59565565886911,52.69882644294432,55.13943207090733,44.94316792550039,46.28506529434044,54.01808207676178,40.05558396431449,40.94447742371874,56.63048468421727,50.213505281252,60.58413136736796,44.50437847791282,41.30793797827479,52.58599991478011,55.11121342210935,52.96154873583079,58.05208018712622,55.65067937566671,54.54584764544074,58.55918774783704,48.50197843135627,53.74092837747632,46.81457538761766,42.53604924621652,47.55353836801835,59.53491649151299,34.11341238024745,53.80959416280225,55.98022978462214,51.00863787903231,37.71947058523541,54.5541239991464,44.93292126346267,51.13190047115027,42.67076837878046,46.42796481154127,56.335253713287,44.21419766111103,58.3631697299362,45.89960121897851,58.26942797735009,45.17638732752987,54.98761885894684,66.47742321003949,49.19039281397264,48.50354298170696,44.53538789089463,63.78145928822576,40.12540265730659,48.6388238209504,50.04025253459848,35.11905079854448,50.23130789218066,54.87640509567538,49.17917763217356,53.23535395398807,58.44247660921791,52.20543778819346,57.20458227402432,63.10999370791798,45.06039005158658,43.05446248164657,51.94016573123543,50.76616470493157,53.63573881070088,62.56188580887137,62.5673422189692,36.07735598404275,50.66191756293049,56.99602474992976,43.78976973429788,47.13128867923472,56.60395460387375,57.05847749025642,45.44147489892388,38.38899514564046,35.02154817913664,50.19149860369448,46.86874726948371,45.18892745785096,29.26231826369266,54.14323657445318,64.51170567885308,42.48606526715744,64.42320573828134,43.88552715356138,46.6247010432627,49.62542403787854,56.52042136772507,32.87524060244941,50.13493344596489,60.68342607903671,44.52020730408878,49.26574869230893,41.50365353130945,52.17606937197237,42.25179276201252,42.21292623046055,62.91036400435841,44.24500964045789,41.48253539712269,48.53326520568091],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[[40.30966164609018],[55.55213696194728],[52.53668181479469],[62.62791704227416],[50.58144223887999],[53.86481463177929],[43.64108448607045],[51.15752705189153],[58.27687698856437],[43.3338944491008],[48.82781888585384],[50.21486895409618],[47.13835615205327],[42.12282963784958],[37.00902497231416],[54.37056996384391],[58.62435760617877],[45.92504438127914],[47.97469094417805],[36.64255380145838],[56.44653947632943],[42.18194062522527],[35.45725610404294],[48.83867495255536],[55.85743974115993],[58.0275012321452],[49.81658983105925],[52.88560027423732],[54.7542228190093],[46.92911951039121],[57.05027984779755],[66.48685080548414],[54.73128496716404],[53.54348519996842],[60.81465437750332],[50.17826619849487],[69.24536046487201],[53.88470529194629],[35.06365929277669],[53.90158721428865],[43.39486559311918],[67.0819174282922],[38.31308545116664],[58.15517237027934],[43.14142449048876],[60.55068604633664],[48.0077898753272],[55.96704970441503],[52.8607436093235],[55.82766336477255],[34.81699061583527],[63.03954836192844],[57.87880704959478],[52.48521673974112],[50.1778156174857],[33.03119071850548],[52.80128952133774],[38.2268974413569],[52.00013622233357],[50.47796261279957],[60.07231615838439],[54.81456004277234],[58.32246165793726],[61.17943097210917],[38.31372603780257],[49.41174203963341],[52.47072990651368],[52.92997487898874],[58.41891126600796],[62.44350121450479],[32.99721071361585],[60.67435956350295],[65.73964402312991],[49.54989494820644],[37.94071530386089],[58.28236598432009],[43.68483308223531],[58.93978056356632],[53.60450670265519],[40.77371354630152],[56.49184612405628],[44.0574339557709],[40.67873157805225],[41.19561253875354],[52.5378283985612],[44.98038033058852],[46.30820080107489],[49.98765562515085],[49.28081132085403],[40.51843020271728],[52.74184934073955],[60.16960078983521],[62.23729969180073],[51.79656750959447],[47.60860234331341],[43.62420264416914],[71.60876769878215],[49.54009731554876],[45.27157716864618],[40.82620439906626],[34.72445758052627],[49.04412104412762],[44.05372385677742],[42.72772595507074],[32.02103545587952],[38.79495252026469],[47.53596910742072],[56.44469856798978],[50.17573949246189],[45.97821352493598],[55.97274512582482],[71.2330422888068],[67.98554837406708],[29.62435021856115],[54.46213385784815],[48.70995642983599],[38.52270686934823],[59.32693203173223],[42.85451624555405],[52.14717495374882],[45.4774958116549],[57.25408819438543],[53.43085494721439],[59.15175928078748],[66.49191838341032],[57.91522499097456],[48.91189803726418],[56.319042477506],[61.48032866202937],[56.43943103129444],[46.43771908366639],[56.80505016521706],[39.78853896454575],[53.09062021026364],[52.80856709147849],[51.25219800768559],[43.1445454121915],[48.4593677078086],[37.38083339639108],[45.7256537118478],[58.95493471790225],[49.31653212096214],[58.15369552329886],[56.42233413860048],[55.09840574389502],[58.90246834651035],[55.20235741743414],[52.34525699789091],[35.31635470294572],[51.86668491273235],[59.75414228201448],[46.82063708730348],[49.57337656196533],[51.94337069342451],[36.53273319037019],[40.92890001641487],[57.33787177310925],[46.76421426349638],[62.25173442976763],[43.60311700170942],[35.15053241520443],[53.75395102569462],[53.21128172334704],[49.95626967882386],[64.54521826544821],[53.1260315455368],[53.22596056509446],[57.65486645792425],[47.34126321371738],[50.40651488204401],[45.45718651419539],[45.15442791987682],[47.81781336930948],[62.26978250331858],[36.12758643796916],[54.6289809626839],[57.16581330162559],[52.42961271282325],[41.27421424822505],[57.418435804776],[44.47588666737562],[49.03926969618919],[43.45206630025886],[43.97332798377179],[59.08312890129051],[45.09288470548626],[61.36675724365215],[46.54389465716507],[57.2039649467733],[46.94314340582283],[56.55144344500319],[63.00724558145028],[43.826012644137],[50.74827867585718],[45.60897262749153],[68.08600015716905],[41.22460566361436],[48.1678655449211],[46.6960238762538],[38.84731172948848],[47.79389510295501],[60.37152258529624],[51.21414461743436],[54.71107177610695],[58.63843496198785],[53.51154745742883],[57.83126777653553],[67.35857825789222],[44.60782842062991],[47.03222932723665],[54.43214598669151],[50.77773481802741],[53.2743176588897],[61.88518940830591],[63.19834058818279],[37.82849770183469],[58.04344946789794],[61.73872166983382],[42.71336327008148],[51.15910292621385],[52.92535234355133],[66.60913110761982],[42.88738517933553],[37.28830763341684],[37.63784643714586],[54.37596573234318],[47.21981495575985],[45.40607884003812],[26.39862253986758],[54.16662247880953],[60.68522485474511],[40.83712308175781],[68.73785515766795],[41.57402552389442],[46.67967928329836],[46.0099682976993],[59.16845200174143],[32.98780389371906],[47.32160033832165],[57.97405950098165],[38.32387128567547],[53.78074462623189],[47.02861200088285],[46.9943923237466],[38.70240530782547],[48.07198618322708],[59.59682409044447],[47.64099568303602],[45.37380196119349],[47.37538804928573]]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>X.Intercept.<\/th>\n      <th>motivation<\/th>\n      <th>trt<\/th>\n      <th>age<\/th>\n      <th>ses<\/th>\n      <th>level1_id<\/th>\n      <th>error<\/th>\n      <th>fixed_outcome<\/th>\n      <th>random_effects<\/th>\n      <th>achievement<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"X.Intercept.","targets":1},{"name":"motivation","targets":2},{"name":"trt","targets":3},{"name":"age","targets":4},{"name":"ses","targets":5},{"name":"level1_id","targets":6},{"name":"error","targets":7},{"name":"fixed_outcome","targets":8},{"name":"random_effects","targets":9},{"name":"achievement","targets":10}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The simulation process uses the treatment, age, and SES data generated from the propensity score process. That is, these attributes are not regenerated in the process, but are simulated first, then any additional fixed effects are simulated to work through the simulation pipeline.</p>
</section>
<section id="estimate-propensity-models-with-simglm" class="level2">
<h2 class="anchored" data-anchor-id="estimate-propensity-models-with-simglm">Estimate propensity models with <code>simglm</code></h2>
<p>The model estimation process is done similarly to the simulation process. Two models are estimated via a two-step process.</p>
<ul>
<li><strong>Step 1</strong>: A propensity score model is estimated to estimate the probability of being in the treatment group. This is controlled via the <code>propensity_model</code> simulation arguments below.</li>
<li><strong>Step 2</strong>: A full model is estimated, specified via the <code>model_fit</code> simulation arguments. The propensity scores can be included in three different ways via the “propensity_type” simulation argument:
<ul>
<li><strong>covariate</strong>: The propensity score probabilities are included as a covariate in the final model.</li>
<li><strong>ipw</strong>: Inverse propensity score weighting is used and passed to the weights argument of the model.</li>
<li><strong>sbw</strong>: Stabilized propensity score weighting is used and passed to the weights arguments of the model. The stabilized weights use the mean of the propensity scores instead of 1, which can help limit weights that are excessively large or small.</li>
</ul></li>
</ul>
<section id="covariate-adjusted-model" class="level3">
<h3 class="anchored" data-anchor-id="covariate-adjusted-model">Covariate-adjusted model</h3>
<p>The covariate-adjusted model includes the propensity score as a covariate in the final model via the <code>propensity_type = 'covariate'</code> argument.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb6-2">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb6-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb6-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb6-5">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb6-6">    ),</span>
<span id="cb6-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb6-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb6-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb6-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb6-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb6-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb6-13">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb6-14">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb6-15">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb6-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb6-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb6-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb6-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb6-20">    ),</span>
<span id="cb6-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_fit =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb6-22">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model_function =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lm'</span>),</span>
<span id="cb6-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb6-24">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb6-25">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'covariate'</span></span>
<span id="cb6-26">    )</span>
<span id="cb6-27">)</span>
<span id="cb6-28"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_fixed</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sim_args =</span> sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_error</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sim_args =</span> sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-30">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_response</span>(sim_arguments)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fit_propensity</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-32">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model_fit</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-33">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extract_coefficients</span>()</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  term        estimate std.error statistic   p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)   51.1     0.912       56.0  6.71e-310
2 motivation     0.402   0.00480     83.7  0        
3 trt            1.34    0.257        5.21 2.30e-  7
4 age            0.145   0.0383       3.79 1.58e-  4
5 ses            0.208   0.0582       3.57 3.75e-  4
6 propensity    -1.75    1.31        -1.34 1.80e-  1</code></pre>
</div>
</div>
</section>
<section id="inverse-propensity-score-weighting" class="level3">
<h3 class="anchored" data-anchor-id="inverse-propensity-score-weighting">Inverse Propensity Score Weighting</h3>
<p>To specify inverse propensity score weighting, <code>propensity_type = 'ipw'</code> is specified. Note that the propensity scores are no longer included as a covariate.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-2">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb8-5">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb8-6">    ),</span>
<span id="cb8-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb8-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb8-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb8-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb8-13">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb8-14">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb8-15">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb8-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb8-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb8-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb8-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb8-20">    ),</span>
<span id="cb8-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb8-22">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb8-23">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ipw'</span></span>
<span id="cb8-24">    )</span>
<span id="cb8-25">)</span>
<span id="cb8-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_fixed</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sim_args =</span> sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_error</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sim_args =</span> sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_response</span>(sim_arguments)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fit_propensity</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-30">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model_fit</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extract_coefficients</span>()</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)   49.9     0.203      246.   0       
2 motivation     0.406   0.00510     79.7  0       
3 trt            1.12    0.253        4.43 1.03e- 5
4 age            0.129   0.0241       5.35 1.07e- 7
5 ses            0.272   0.0226      12.0  3.50e-31</code></pre>
</div>
</div>
</section>
<section id="stabilized-propensity-score-weighting" class="level3">
<h3 class="anchored" data-anchor-id="stabilized-propensity-score-weighting">Stabilized Propensity Score Weighting</h3>
<p>To specify stabilized propensity score weighting, <code>propensity_type = 'sbw'</code> is specified. Note that the propensity scores are no longer included as a covariate.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb10-2">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> achievement <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> motivation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb10-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb10-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">motivation =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>,</span>
<span id="cb10-5">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb10-6">    ),</span>
<span id="cb10-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb10-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb10-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>),</span>
<span id="cb10-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb10-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb10-12">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ordinal'</span>, </span>
<span id="cb10-13">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>),</span>
<span id="cb10-14">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ses =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continuous'</span>, </span>
<span id="cb10-15">                         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb10-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb10-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb10-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb10-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary'</span></span>
<span id="cb10-20">    ),</span>
<span id="cb10-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb10-22">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> trt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ses,</span>
<span id="cb10-23">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">propensity_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sbw'</span></span>
<span id="cb10-24">    )</span>
<span id="cb10-25">)</span>
<span id="cb10-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_fixed</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sim_args =</span> sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_error</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sim_args =</span> sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_response</span>(sim_arguments)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb10-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fit_propensity</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-30">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model_fit</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extract_coefficients</span>()</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)  50.2      0.206      244.   0       
2 motivation    0.402    0.00528     76.1  0       
3 trt           1.03     0.259        3.99 6.99e- 5
4 age           0.0942   0.0248       3.80 1.54e- 4
5 ses           0.239    0.0232      10.3  1.35e-23</code></pre>
</div>
</div>
<p>Each of these approaches has the potential to produce a more balanced comparison between the treatment and control groups for observed data attributes. The primary limitation of propensity scores compared to actual random assignment is that they cannot adjust for any differences in data attributes that are unobserved. True random assignment can help ensure that the treatment and control groups are balanced with respect to observed and unobserved data attributes. Even with this limitation, propensity scores are preferable to doing nothing when random assignment is not possible or cannot be performed.</p>
</section>
</section>
<section id="next-steps" class="level2">
<h2 class="anchored" data-anchor-id="next-steps">Next Steps</h2>
<p>The next step is to ensure that these propensity score simulation and model estimation steps are included in the broader functions to perform replications. This will enable the estimation of power for planning a study that aims to implement propensity scores.</p>
<p>If you work with non-randomized designs, simglm can now help you simulate realistic scenarios, test different adjustment methods, and plan studies with more confidence.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>simglm</category>
  <category>simulation</category>
  <category>propensity scores</category>
  <guid>https://brandonlebeau.org/posts/2025-09-24-simglm-propensity.html</guid>
  <pubDate>Wed, 24 Sep 2025 05:00:00 GMT</pubDate>
</item>
<item>
  <title>simglm v0.7.4: Tidy Simulation</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/simglm-0-7-4.html</link>
  <description><![CDATA[ 




<p>I’m happy to formally announce a major update to the <a href="https://github.com/lebebr01/simglm">simglm</a> R package. In brief, the updated package contains a new more robust syntax for simulating data, adds parallel processing support for replicating the simulation (or power analysis) using the <code>future.apply</code> package/framework, and new updated vignettes showing off the many options available in the tidy simulation syntax.</p>
<p>The package can be installed with the following code:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"simglm"</span>)</span></code></pre></div></div>
</div>
<p>The package can then be loaded with:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(simglm)</span></code></pre></div></div>
</div>
<section id="tidy-simulation-syntax" class="level2">
<h2 class="anchored" data-anchor-id="tidy-simulation-syntax">Tidy simulation syntax</h2>
<p>The tidy simulation syntax and new simulation functions take full advantage of using the pipe (i.e.&nbsp;<code>%&gt;%</code>) from the magrittr package to chain together commands for readable code that highlights what is being simulated and when. In this framework, the simulation arguments are specified outside of the simulation commands to separate the specification of how the data should be simulated from the actual simulation. An example is most useful here.</p>
<section id="tidy-simulation-example" class="level3">
<h3 class="anchored" data-anchor-id="tidy-simulation-example">Tidy simulation example</h3>
<p>Suppose we wanted to generate data for two groups, such as the sex of the individual (male or female). We could write this statistical model as the following:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Aoutcome%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7D%20male%20+%20%5Cepsilon%0A"> where <img src="https://latex.codecogs.com/png.latex?male"> is an indicator (i.e.&nbsp;dichomotous or dummy variable) that represents if the individual is a male or not. The outcome is the observed score of interest, could be test scores, depression scores, blood pressure, really anything of interest. The regression coefficients, <img src="https://latex.codecogs.com/png.latex?%5Cbeta_%7B0%7D"> and <img src="https://latex.codecogs.com/png.latex?%5Cbeta_%7B1%7D"> are estimated from the data and would be the intercept (in this case would be the mean of the females on the outcome) and the mean difference between the males and females respectively. Finally, it is common to have error, represented with <img src="https://latex.codecogs.com/png.latex?%5Cepsilon">. This model is the linear regression version of a two-sample t-test.</p>
<p>To simulate this data, the values for the regression coefficients (<img src="https://latex.codecogs.com/png.latex?%5Cbeta_%7B0%7D"> and <img src="https://latex.codecogs.com/png.latex?%5Cbeta_%7B1%7D">) need to be specified, the <img src="https://latex.codecogs.com/png.latex?male"> indicator variable, and the variance and distribution of the error term. The outcome is then determined based on those three terms. Let’s now use simglm to simulate data based on this two group model.</p>
</section>
<section id="specify-simulation-arguments" class="level3">
<h3 class="anchored" data-anchor-id="specify-simulation-arguments">Specify simulation arguments</h3>
<p>When using the <code>simglm</code> R package, the simulation arguments are first defined in a named list object. Required arguments to this named list that include the following arguments with a short description of what each represents.</p>
<ul>
<li><code>formula</code>: This mimics the model to be generated excluding any random error. If you have used the <code>lm</code> function to fit a linear regression, this would be the model equation that is fitted to that function.</li>
<li><code>fixed</code>: This includes variable specification as a list for the variable specified on the right hand side of the equation (i.e.&nbsp;to the right of the <code>~</code> in the <code>formula</code> argument). The <code>fixed</code> argument does not include the intercept or interaction terms.</li>
<li><code>sample_size</code>: The sample size or in this example, the number of rows in the data.</li>
<li><code>error</code>: This is a list of characteristics for the random error (i.e.&nbsp;variance, distribution, etc.), <img src="https://latex.codecogs.com/png.latex?%5Cepsilon"> in the above equation.</li>
<li><code>reg_weights</code>: These are the values for the <img src="https://latex.codecogs.com/png.latex?%5Cbeta"> terms in the model. In this example there are two, one for the intercept and one representing the mean difference between males and females.</li>
</ul>
<p>Below is an example specification for the linear model shown above that mimics a two-sample t-test.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">sim_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb3-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> outcome <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> sex,</span>
<span id="cb3-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sex =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'factor'</span>, </span>
<span id="cb3-4">                            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'male'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'female'</span>))),</span>
<span id="cb3-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb3-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb3-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)</span>
<span id="cb3-8">)</span></code></pre></div></div>
</div>
<p>From the above simulation arguments, the formula mimics the equation shown earlier with one small change, sex is used instead of male to reflect the grouping variable of male or female. The <code>fixed</code> argument warrants additional discussion. This argument is a named list where the named elements match the variable names specified on the right hand side of the <code>formula</code> argument. In this case, only one variable is specified, the sex variable. When specifying a variable, the type of variable to be generated is controlled with the argument, <code>var_type</code>. The <code>var_type</code> argument can take the following values:</p>
<ul>
<li><code>factor</code>: This represents a categorical or grouping variable that commonly only takes on a few unique values.</li>
<li><code>continuous</code>: This is a continuous variable that is generated using an r distribution function.</li>
<li><code>ordinal</code>: This generates ordinal or discrete data and is generated using the <code>sample</code> function.</li>
<li><code>time</code>: This is not as useful here, but would be used when repeated measures or longitudinal data are simulated to represent when multiple observations are collected.</li>
</ul>
<p>Of note, the “factor” and “ordinal” variable types are generated the same way, using the <code>sample</code> function, but are distinguished due to different general philosophies about the two variable types.</p>
<p>With “factor” and “ordinal” variable types, the different values that are possible for this variable can be specified with the <code>levels</code> argument. In the example above, “male” and “female” are passed as character strings indicating these are the values that will be passed to the <code>sample</code> function. The <code>levels</code> argument can take on characters or numeric values, although if character strings are meaningful, it is recommended to pass these to be more explicit about the different values generated.</p>
<p>Let’s now generate the data based on the simulation arguments above.</p>
</section>
<section id="generate-one-data-set" class="level3">
<h3 class="anchored" data-anchor-id="generate-one-data-set">Generate one data set</h3>
<p>There are four main simulation functions that will be used most frequently when doing the simulating of data. These simulation functions include:</p>
<ul>
<li><code>simulate_fixed</code>: This function simulates the fixed portion of the model or the portion to the right of the <code>~</code> in the model formula.</li>
<li><code>simulate_error</code>: This function simulates the random error (i.e.&nbsp;<img src="https://latex.codecogs.com/png.latex?%5Cepsilon">).</li>
<li><code>simulate_randomeffect</code>: This simulates random effects if the data are nested or cross-classified. The use of this will come in another post soon.</li>
<li><code>generate_response</code>: This function generates the outcome variable or the term to the left of the <code>~</code> in the model formula.</li>
</ul>
<p>The goal of each function is to simulate one aspect of the model which keeps the function specification simpler, allows users to see what is being simulated in specific steps, and allows users flexibility into what is being generated. Each of these functions take data as the first argument and the simulation arguments as the second argument. With the exception of the <code>generate_response</code> function, the three <code>simulate_*</code> function above can be specified in any order. The first time that a <code>simulate_*</code> function is called, the <code>data</code> argument needs to be specified as <code>NULL</code> meaning that no data has been generated.</p>
<p>Below is one way to generate the data using the simulation conditions and the first few rows of the simulated data are shown. Note, the seed was specified with the <code>set.seed</code> function to ensure replicable results. Without setting a seed, different results would be obtained everytime the simulation code was run.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span></code></pre></div></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb6-2"></span>
<span id="cb6-3">one_data_set <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_fixed</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">simulate_error</span>(sim_arguments) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_response</span>(sim_arguments)</span>
<span id="cb6-6"></span>
<span id="cb6-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(one_data_set)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X.Intercept. sex_1    sex level1_id      error fixed_outcome random_effects
1            1     0   male         1 -0.4006375          0.00              0
2            1     0   male         2 -0.3345566          0.00              0
3            1     1 female         3  1.3679540          0.15              0
4            1     1 female         4  2.1377671          0.15              0
5            1     1 female         5  0.5058193          0.15              0
6            1     0   male         6  0.7863424          0.00              0
     outcome
1 -0.4006375
2 -0.3345566
3  1.5179540
4  2.2877671
5  0.6558193
6  0.7863424</code></pre>
</div>
</div>
<p>The data is similar regardless of the model run and the columns are appended based on the order that the <code>simulate_*</code> functions are called. For example, since the <code>simulate_fixed</code> function was called first above, these columns appear first in the simulated data. Then the error is shown and the outcome variable will always be last. In between the error and the outcome are two columns that can provide a check on various portions of the simulation. In this case, the “fixed_outcome” column is of most interest and can provide a check that the <code>simulate_fixed</code> function created data appropriately. The value for the “fixed_outcome” column should reflect the outcome for each row that does not depend on random quantities. In this case, since the only variable in the model is a dichotomous indicator variable, the “fixed_outcome” column should have two values, the mean for females and the mean for males.</p>
<p>To ensure that things look as they should based on the simulation arguments, we can do some descriptive and/or visual inspection.</p>
<section id="explore-error" class="level4">
<h4 class="anchored" data-anchor-id="explore-error">Explore error</h4>
<p>We can visualize the density of the random error term to ensure this makes sense.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(one_data_set, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> error)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_density</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xlab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Error"</span>)</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://brandonlebeau.org/posts/simglm-0-7-4_files/figure-html/error-dist-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We could also calculate the variance of this term to ensure it is close to the value specified. The larger the sample size, the closer it should be to the variance specified. Here is happens to be slightly less than 1, but it is close.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">one_data_set <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error_var =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">var</span>(error))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>  error_var
1 0.9402422</code></pre>
</div>
</div>
</section>
<section id="explore-sex-effect" class="level4">
<h4 class="anchored" data-anchor-id="explore-sex-effect">Explore sex effect</h4>
<p>The sex effect can also be explored. One simple check would be to count how many males and females are in the data. Note, I’m using the “sex1” variable which is the character version. The one named “sex” in the data represents the character variable turned into a numeric dummy variable used in the regression model.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">one_data_set <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(sex)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>     sex  n
1   male 53
2 female 47</code></pre>
</div>
</div>
<p>As can be seen, the number of males and females is about the same, but not exactly equal. The default behavior of the <code>sample</code> function is to generate groups with equal proportions. This can be specified directly however with an optional <code>prob</code> argument. See the <code>sample</code> function documentation for additional details for this.</p>
<p>Another useful check is to see how different the outcome is for the two groups. I will do this visually, but you can do it descriptively as well by calculating the mean values.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(one_data_set, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> sex, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> outcome)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb13-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb13-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb13-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb13-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xlab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sex"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb13-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ylab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Outcome"</span>)</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://brandonlebeau.org/posts/simglm-0-7-4_files/figure-html/sex-effect-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As you can see, the males have a larger median, but there is quite a bit of variation in the two groups.</p>
</section>
</section>
<section id="replicate-the-simulation" class="level3">
<h3 class="anchored" data-anchor-id="replicate-the-simulation">Replicate the simulation</h3>
<p>It is often common to generate multiple simulated data sets. This can be done with the help of a single function, <code>replicate_simulation</code>. This function takes the simulation arguments as its only argument. The only additional argument that needs to be specified is the number of replications which is controlled by the <code>replications</code> argument. Below is the inclusion of the replications argument to do 100 replications of the simulation arguments. Note, the <code>future.apply</code> package is used to simulate the data using all available cores on the local machine. This is done by setting <code>plan(multisession)</code> which should word regardless of the operating system this code is ran on.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(future)</span>
<span id="cb14-2"></span>
<span id="cb14-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plan</span>(multisession)</span>
<span id="cb14-4"></span>
<span id="cb14-5">simulation_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb14-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> outcome <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> sex,</span>
<span id="cb14-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sex =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'factor'</span>, </span>
<span id="cb14-8">                            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'male'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'female'</span>))),</span>
<span id="cb14-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb14-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variance =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb14-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>),</span>
<span id="cb14-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replications =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb14-13">)</span>
<span id="cb14-14"></span>
<span id="cb14-15">replicate_sim <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replicate_simulation</span>(simulation_arguments)</span></code></pre></div></div>
</div>
<p>The returned data element is a list that has the same length as the number of replications specified. The elements can be extracted as with any list.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(replicate_sim[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>]])</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X.Intercept. sex_1    sex level1_id      error fixed_outcome random_effects
1            1     1 female         1 -0.5592370          0.15              0
2            1     0   male         2  1.3319519          0.00              0
3            1     1 female         3  2.0973185          0.15              0
4            1     1 female         4  0.5767978          0.15              0
5            1     1 female         5 -1.2387176          0.15              0
6            1     1 female         6  2.1479337          0.15              0
     outcome
1 -0.4092370
2  1.3319519
3  2.2473185
4  0.7267978
5 -1.0887176
6  2.2979337</code></pre>
</div>
</div>
<p>The <code>replication_simulation</code> function calls the specific <code>simulate_*</code> functions based on what is included in the simulation arguments. For example, if the <code>error</code> simulation argument was omitted, the data would not include random error.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">simulation_arguments <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb17-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> outcome <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> sex,</span>
<span id="cb17-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sex =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'factor'</span>, </span>
<span id="cb17-4">                            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'male'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'female'</span>))),</span>
<span id="cb17-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sample_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb17-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">reg_weights =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>),</span>
<span id="cb17-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replications =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb17-8">)</span>
<span id="cb17-9"></span>
<span id="cb17-10">replicate_sim <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replicate_simulation</span>(simulation_arguments)</span>
<span id="cb17-11"></span>
<span id="cb17-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(replicate_sim[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]])</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X.Intercept. sex_1    sex level1_id fixed_outcome random_effects error
1            1     1 female         1          0.15              0     0
2            1     0   male         2          0.00              0     0
3            1     0   male         3          0.00              0     0
4            1     0   male         4          0.00              0     0
5            1     0   male         5          0.00              0     0
6            1     0   male         6          0.00              0     0
  outcome
1    0.15
2    0.00
3    0.00
4    0.00
5    0.00
6    0.00</code></pre>
</div>
</div>
<p>Notice that the error is specified as 0 for all records. This is likely not that as useful as specifying random error.</p>
</section>
</section>
<section id="next-steps" class="level2">
<h2 class="anchored" data-anchor-id="next-steps">Next Steps</h2>
<p>I plan to regularly post examples using the <code>simglm</code> package for simulating different models and also doing power for different models. I recently wrote a tutorial that includes some of this code and does power by simulation that can be found here: https://brandonlebeau.org/publication/simglm-power/.</p>
<p>More unit testing is needed for the new simulation syntax to test the new implementation and ensure that updates do not change other aspects of the code base. Implementing additional model features (such as increased support for GLM models, simulation non-linear models, etc) and writing about more examples of doing simulation or power analysis with the package.</p>
<p>Feedback on the syntax, suggested changes, and edits or collaborations are especially welcomed at this stage. Issues and collaborations can be submitted through the following two links: <a href="https://github.com/lebebr01/simglm/issues">GitHub Issues</a> and <a href="https://github.com/lebebr01/simglm/pulls">Pull Requests</a>.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>Simglm</category>
  <category>Simulation</category>
  <category>Tidy</category>
  <guid>https://brandonlebeau.org/posts/simglm-0-7-4.html</guid>
  <pubDate>Tue, 11 Jun 2019 05:00:00 GMT</pubDate>
</item>
<item>
  <title>pdfsearch v0.3.0</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/pdfsearch-0-3-0.html</link>
  <description><![CDATA[ 




<p>I’m happy to formally announce a major update to the developmental version of the <a href="https://github.com/lebebr01/pdfsearch">pdfsearch</a> R package. In brief, this version includes support for splitting the PDF by sentences instead of by lines of text. Secondly, initial testing of splitting PDFs that are aligned in multiple columns has been promising. This functionality attempts to align the multiple columns into a single column in which the keyword searching peformed by pdfsearch can be stronger with the search being done in context. Both of these new additions will be explored in more detail below.</p>
<section id="split-pdfs-into-sentences" class="level2">
<h2 class="anchored" data-anchor-id="split-pdfs-into-sentences">Split PDFs into sentences</h2>
<p>We will use the following PDF of a paper found on arXiv by Schifeling, Reiter, and DeYoreo called Data Fusion for Correcting Measurement Errors <a href="https://arxiv.org/abs/1610.00147">paper here</a>. Before version 0.3.0 of pdfsearch, the pdf was only split into individual lines, see <a href="https://brandonlebeau.org/2016/12/02/introduction-of-the-pdfsearch-package/">this blog post</a> for more examples of pdfsearch. To be more concrete, let’s see what that would look like for a search looking for the term “measurement error”. For this the <code>keyword_search</code> function can be used to parse the PDF to text using the <a href="https://ropensci.org/blog/2016/03/01/pdftools-and-jeroen/">pdftools package</a>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># load the package</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(pdfsearch)</span>
<span id="cb1-3"></span>
<span id="cb1-4">pdf_url <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://arxiv.org/pdf/1610.00147.pdf"</span></span>
<span id="cb1-5">search_result <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword_search</span>(pdf_url, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keyword =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'measurement error'</span>),</span>
<span id="cb1-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">path =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">remove_hyphen =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">convert_sentence =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Collapse to view results</span></span>
<span id="cb1-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(search_result))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>            keyword page_num line_num
1 measurement error        1        5
2 measurement error        1       19
3 measurement error        1       21
4 measurement error        2       28
5 measurement error        2       31
6 measurement error        2       32
                                                                                      line_text
1                 Often in surveys, key items are subject to measurement errors. Given just the
2            the sensitivity of various analyses to different choices for the measurement error
3                            KEY WORDS: fusion, imputation, measurement error, missing, survey.
4          Survey data often contain items that are subject to measurement errors. For example,
5 these measurement errors can result in degraded inferences (Kim et al., 2015). Unfortunately,
6                the distribution of the measurement errors typically is not estimable from the
                                                                                           token_text
1             often, in, surveys, key, items, are, subject, to, measurement, errors, given, just, the
2       the, sensitivity, of, various, analyses, to, different, choices, for, the, measurement, error
3                                 key, words, fusion, imputation, measurement, error, missing, survey
4      survey, data, often, contain, items, that, are, subject, to, measurement, errors, for, example
5 these, measurement, errors, can, result, in, degraded, inferences, kim, et, al, 2015, unfortunately
6           the, distribution, of, the, measurement, errors, typically, is, not, estimable, from, the</code></pre>
</div>
</div>
<p>The results show the keyword, the page number and line number where the match was found, the specific line of text that contains the search result, and the line of text tokenized into individual words. You may notice from the line_text output that the search result may be multiple sentences or a partial sentence instead of a full sentence. What the pdfsearch package was doing was taking the text in a single line of the PDF file and using that as the search string. One limitation of this approach is when phrases instead of single words are searched, if the phrase wraps to more than one line, the old version of pdfsearch would always miss these keywords.</p>
<p>As a side note, you may have noticed that both “measurement error” and “measurement errors” are returned (look at the first match above). If we did not want to include the “s” in the match, we would need to add some regular expression to omit the “s” using negative look ahead (there are likely other ways to omit the “s” as well).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">search_result_nos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword_search</span>(pdf_url, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keyword =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'measurement error(?!s)'</span>),</span>
<span id="cb3-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">path =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">remove_hyphen =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">convert_sentence =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Collapse to view results</span></span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(search_result_nos))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 keyword page_num line_num
1 measurement error(?!s)        1       19
2 measurement error(?!s)        1       21
3 measurement error(?!s)        4       82
4 measurement error(?!s)        4       84
5 measurement error(?!s)        4       89
6 measurement error(?!s)        4      100
                                                                              line_text
1    the sensitivity of various analyses to different choices for the measurement error
2                    KEY WORDS: fusion, imputation, measurement error, missing, survey.
3         the general framework for specifying measurement error models to leverage the
4            measurement error in educational attainment in the 2010 American Community
5 to different measurement error model specifications. In Section 5, we provide a brief
6                                             attainment is prone to measurement error.
                                                                                       token_text
1   the, sensitivity, of, various, analyses, to, different, choices, for, the, measurement, error
2                             key, words, fusion, imputation, measurement, error, missing, survey
3         the, general, framework, for, specifying, measurement, error, models, to, leverage, the
4             measurement, error, in, educational, attainment, in, the, 2010, american, community
5 to, different, measurement, error, model, specifications, in, section, 5, we, provide, a, brief
6                                                   attainment, is, prone, to, measurement, error</code></pre>
</div>
</div>
<section id="splitting-by-sentences" class="level3">
<h3 class="anchored" data-anchor-id="splitting-by-sentences">Splitting by sentences</h3>
<p>The new default behavior in pdfsearch is to split the text into separate sentences instead of by text lines in the PDF document. Let’s do the first search that includes the “s” in the search, but now instead of splitting by lines split the text into sentences.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">search_result_sent <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword_search</span>(pdf_url, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keyword =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'measurement error'</span>),</span>
<span id="cb5-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">path =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">remove_hyphen =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">convert_sentence =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(search_result_sent)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(search_result)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 31</code></pre>
</div>
</div>
<p>You’ll notice now that an additional 5 search results were returned. One note, currently the line_num output in both do not match, in the future these will match and when sentences are returned a new output variable representing sentence number will also be returned. We can view the first few results to see how the line_text output differs from before. Internally, <code>stringi::stri_split_boundaries(text_lines, type = "sentence")</code> is used to split the PDF text into sentences instead of lines of text.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(search_result_sent))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>            keyword page_num line_num
1 measurement error        1        2
2 measurement error        1       10
3 measurement error        1       12
4 measurement error        2       16
5 measurement error        2       18
6 measurement error        2       19
                                                                                                                                line_text
1 Reiter, Maria DeYoreo∗ arXiv:1610.00147v1 [stat.ME] 1 Oct 2016 Abstract Often in surveys, key items are subject to measurement errors. 
2     We also present a process for assessing the sensitivity of various analyses to different choices for the measurement error models. 
3                                                                     KEY WORDS: fusion, imputation, measurement error, missing, survey. 
4                                             1     Introduction Survey data often contain items that are subject to measurement errors. 
5                                       Left uncorrected, these measurement errors can result in degraded inferences (Kim et al., 2015). 
6                       Unfortunately, the distribution of the measurement errors typically is not estimable from the survey data alone. 
                                                                                                                                            token_text
1  reiter, maria, deyoreo, arxiv, 1610.00147v1, stat.me, 1, oct, 2016, abstract, often, in, surveys, key, items, are, subject, to, measurement, errors
2 we, also, present, a, process, for, assessing, the, sensitivity, of, various, analyses, to, different, choices, for, the, measurement, error, models
3                                                                                  key, words, fusion, imputation, measurement, error, missing, survey
4                                                    1, introduction, survey, data, often, contain, items, that, are, subject, to, measurement, errors
5                                              left, uncorrected, these, measurement, errors, can, result, in, degraded, inferences, kim, et, al, 2015
6                        unfortunately, the, distribution, of, the, measurement, errors, typically, is, not, estimable, from, the, survey, data, alone</code></pre>
</div>
</div>
</section>
</section>
<section id="splitting-multi-column-pdf-documents" class="level2">
<h2 class="anchored" data-anchor-id="splitting-multi-column-pdf-documents">Splitting Multi-Column PDF Documents</h2>
<p>The next major upgrade is the default behavior for splitting PDF documents that are aligned in multiple columns. One example of this can be found in a paper on arXiv by Guo and Deng called Flexible Online Repeated Measures Experiment <a href="https://arxiv.org/abs/1501.00450">paper here</a>.</p>
<p>Let’s first look at the output of a search without splitting the PDF.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">pdf_url <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://arxiv.org/pdf/1501.00450.pdf"</span></span>
<span id="cb11-2"></span>
<span id="cb11-3">no_split <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword_search</span>(pdf_url, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keyword =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'repeated measures'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'mixed effects'</span>),</span>
<span id="cb11-4">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">path =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">remove_hyphen =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, </span>
<span id="cb11-5">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">convert_sentence =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb11-6"></span>
<span id="cb11-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(no_split))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>            keyword page_num line_num
1 repeated measures        1       24
2 repeated measures        2       57
3 repeated measures        2      108
4 repeated measures        2      110
5 repeated measures        2      125
6 repeated measures        6      454
                                                                                                                               line_text
1 cally the repeated measures design, including the crossover           get false confidence about lack of negative effects. Statistical
2          fast iterations and testing many ideas can reap the most           erations to repeated measures design, with variants to the
3          repeated measures design in different stages of treatment          in this section we assume all users appear in all periods,
4            ing the repeated measures analysis, reporting a “per week”         to metrics that are defined as simple average and assume
5            In fact, the crossover design is a type of repeated measures       designs considered can be examined in the same framework
6         values and the absence in a specific time window can still          It is common to analyze data from repeated measures design
                                                                                                                                  token_text
1 cally, the, repeated, measures, design, including, the, crossover, get, false, confidence, about, lack, of, negative, effects, statistical
2       fast, iterations, and, testing, many, ideas, can, reap, the, most, erations, to, repeated, measures, design, with, variants, to, the
3      repeated, measures, design, in, different, stages, of, treatment, in, this, section, we, assume, all, users, appear, in, all, periods
4         ing, the, repeated, measures, analysis, reporting, a, per, week, to, metrics, that, are, defined, as, simple, average, and, assume
5    in, fact, the, crossover, design, is, a, type, of, repeated, measures, designs, considered, can, be, examined, in, the, same, framework
6  values, and, the, absence, in, a, specific, time, window, can, still, it, is, common, to, analyze, data, from, repeated, measures, design</code></pre>
</div>
</div>
<p>You’ll notice from the output that again the lines of text have a gap in the middle representing the white space between the multi-column layout. What the new <code>split_pdf</code> argument behavior attempts to recreate is the document structure that a reader would perform, namely read the left column first followed by the right column. A specific note, the <code>split_pdf</code> argument has only been tested on two column PDF layouts.</p>
<p>Let’s now run the same search with splitting the PDF and also converting into sentences. This is done by setting the argument <code>split_pdf = TRUE</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">split_yes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword_search</span>(pdf_url, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keyword =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'repeated measures'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'mixed effects'</span>),</span>
<span id="cb13-2">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">path =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">remove_hyphen =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">split_pdf =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb13-3">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">convert_sentence =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb13-4"></span>
<span id="cb13-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(split_yes))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>            keyword page_num line_num
1 repeated measures        1        5
2 repeated measures        2       40
3 repeated measures        2       42
4 repeated measures        2       43
5 repeated measures        2       50
6 repeated measures        2       51
                                                                                                                                                                                                                                  line_text
1 We introduce more sophisticated experimental designs, specifically the repeated measures design, including the crossover design and related variants, to increase KPI sensitivity with the same traffic size and duration of experiment. 
2                                                                                                                        CUPED is in fact a form of repeated measures design, where multiple mea on the same subjects are taken over time. 
3                Groups A/B Test CUPED Parallel Crossover Re-Randomized Table 1: Repeated Measures Designs In this paper we extend the idea further by employing the repeated measures design in different stages of treatment assignment. 
4                                                                      The traditional A/B test can be analyzed using the repeated measures analysis, report a “per week” treatment effect, as show in row 3 “parallel” design in table 1. 
5                                                                                        In fact, the crossover design is a type of repeated measures design commonly used in biomedical research to control for within-subject variation. 
6                                     We also discuss practical considerations to repeated measures design, with variants to the crossover design to study the carry over effect, including the “re-randomized” design (row 5 in table 1). 
                                                                                                                                                                                                                                                          token_text
1 we, introduce, more, sophisticated, experimental, designs, specifically, the, repeated, measures, design, including, the, crossover, design, and, related, variants, to, increase, kpi, sensitivity, with, the, same, traffic, size, and, duration, of, experiment
2                                                                                                                                cuped, is, in, fact, a, form, of, repeated, measures, design, where, multiple, mea, on, the, same, subjects, are, taken, over, time
3           groups, a, b, test, cuped, parallel, crossover, re, randomized, table, 1, repeated, measures, designs, in, this, paper, we, extend, the, idea, further, by, employing, the, repeated, measures, design, in, different, stages, of, treatment, assignment
4                                                                           the, traditional, a, b, test, can, be, analyzed, using, the, repeated, measures, analysis, report, a, per, week, treatment, effect, as, show, in, row, 3, parallel, design, in, table, 1
5                                                                                              in, fact, the, crossover, design, is, a, type, of, repeated, measures, design, commonly, used, in, biomedical, research, to, control, for, within, subject, variation
6                                        we, also, discuss, practical, considerations, to, repeated, measures, design, with, variants, to, the, crossover, design, to, study, the, carry, over, effect, including, the, re, randomized, design, row, 5, in, table, 1</code></pre>
</div>
</div>
<p>If you look at the text returned in the line_text output, the sentences now appear to make sense, are in context, and phrases of text are more likely to be returned if they happen to wrap to another line. The limitation of wrapping text is more pronounced in multiple column PDFs as there is much less text on a single line in each column of the PDF. Therefore, I think the search results should be more representative of the text in the document and should return better search results.</p>
</section>
<section id="next-steps" class="level2">
<h2 class="anchored" data-anchor-id="next-steps">Next Steps</h2>
<p>A few next steps prior to release to CRAN these new additions.</p>
<ol type="1">
<li>More testing of the <code>split_pdf</code> pdfsearch behavior.</li>
<li>Exploration of automatic detection of two column PDFs to split automatically.</li>
<li>Verify page and line number output when splitting into sentences instead of lines of text.</li>
</ol>
<p>If others test out the developmental version of the package, I’d welcome collaborators or testers of the new functionality. If you have issues, please log these through <a href="https://github.com/lebebr01/pdfsearch/issues">GitHub Issues</a> or have any contributions through <a href="https://github.com/lebebr01/pdfsearch/pulls">Pull Requests</a>.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>Pdfsearch</category>
  <category>Pdf</category>
  <guid>https://brandonlebeau.org/posts/pdfsearch-0-3-0.html</guid>
  <pubDate>Wed, 22 Aug 2018 05:00:00 GMT</pubDate>
</item>
<item>
  <title>Hierarchical Cluster Analysis of Coach ELO Ratings</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/cluster-coaches.html</link>
  <description><![CDATA[ 




<p>For the past few years (quickly approaching a decade), a colleague and I started scraping information about college football coaches to explore the question, which coach should the University of Minnesota hire. This project started, as most interesting project do, at happy hour one day debating who should be hired to replace Tim Brewster, the latest college football coaching disaster at the University of Minnesota. We decided to collect some data to explore the idea in more detail.</p>
<p>Fast forward about 8 years and we have gathered a fair amount of college football data going back to the 19th century. We have prepared a few presentations using the data (https://brandonlebeau.org/slides/2016-07-31-jsm2016/ and https://brandonlebeau.org/slides/2015-12-04-centraliowaruser/) and are currently working on a new manuscript. Hope to share more on that soon.</p>
<p>In addition to these topics, I’ve been fiddling with hierarchical cluster analysis for another project and wanted to try it on the college football data to try and get a better handle on all the details. Below is a cluster analysis based on some of our data.</p>
<section id="hierarchical-clustering-elo-ratings-of-college-football-coaches" class="level2">
<h2 class="anchored" data-anchor-id="hierarchical-clustering-elo-ratings-of-college-football-coaches">Hierarchical clustering ELO ratings of college football coaches</h2>
<p>For the paper we are exploring, we computed ELO ratings for college football coaches. This is more commonly done on teams instead of coaches, but we are more interested in the coach level compared to the team level. Admittedly, there are some coach/team pairs that would be identical for the two, but many coaches move around a bit and the two need not be the same.</p>
<p>The following bit of code reads the ELO rating data and some coach information from a GitHub repository. Then these two data frames are merged together, the data are filtered to only include ratings since 2010, and missing data is omitted. Cluster analysis works best without missing data, therefore this is a simple way to achieve no missing data.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(readr)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(forcats)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cluster)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dendextend)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(colorspace)</span>
<span id="cb1-7"></span>
<span id="cb1-8">ELO <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://raw.githubusercontent.com/lebebr01/sloan-2018/master/data/elo-ratings-2017-09-18.csv"</span>)</span>
<span id="cb1-9">coach_info <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://raw.githubusercontent.com/lebebr01/sloan-2018/master/data/coaches_to2015.csv"</span>)</span>
<span id="cb1-10"></span>
<span id="cb1-11"></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># transform</span></span>
<span id="cb1-13">ELO_wide <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ELO <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2010</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(Coach, Year, Rating, Rank) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gather</span>(Rating<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>Rank, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'variable'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">value =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'value'</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unite</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'variable'</span>, variable, Year) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">spread</span>(variable, value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na.omit</span>()</span></code></pre></div></div>
</div>
<p>This results in a total of 71 coaches that have been coaching continuously between 2011 and 2015, a total of five years. This does not mean that each coach was with the same team for these five years, rather that they have had no gaps in coaching between 2011 and 2015 (i.e.&nbsp;taking a year off of coaching) or are new coaches since 2011.</p>
<p>Then to perform the cluster analysis, I used the <code>select</code> function to select only the ELO Rating variables. This is passed to the <code>daisy</code> function from the cluster package to create a pairwise distance matrix. I chose euclidean distance for this example which represents the root sum of squares of differences, but other options are available and results may differ based on the choice of distance metric.</p>
<p>Lastly, I also chose the ward clustering method, primarily for simplicity. From what I’ve read this tends to be a good starting method, but others do exist that use slightly different criteria when combining clusters. Therefore others should be explored to undertsand the sensitivity of the results to a specific clustering method.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Attempt cluster analysis</span></span>
<span id="cb2-2">ward_clust <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ELO_wide <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">starts_with</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Rating'</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">daisy</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">metric =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'euclidean'</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">agnes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">diss =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ward'</span>)</span></code></pre></div></div>
</div>
<p>Once the clustering algorithm is done, visualizing this with a dendrogram. Below is an example using the <code>dendextend</code> package.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">coach_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rev</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">levels</span>(ELO_wide<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Coach))</span>
<span id="cb3-2">dend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.dendrogram</span>(ward_clust)</span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># order the observations:</span></span>
<span id="cb3-4">dend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rotate</span>(dend, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">71</span>)</span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Color the branches based on the clusters:</span></span>
<span id="cb3-7">dend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">color_branches</span>(dend, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb3-8"></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Manually match the labels</span></span>
<span id="cb3-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labels_colors</span>(dend) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb3-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rainbow_hcl</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort_levels_values</span>(</span>
<span id="cb3-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(ELO_wide<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Coach)[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">order.dendrogram</span>(dend)]</span>
<span id="cb3-13">  )]</span>
<span id="cb3-14"></span>
<span id="cb3-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># We shall add the flower type to the labels:</span></span>
<span id="cb3-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labels</span>(dend) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(ELO_wide<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Coach)[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">order.dendrogram</span>(dend)],</span>
<span id="cb3-17">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"("</span>,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labels</span>(dend),<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">")"</span>, </span>
<span id="cb3-18">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb3-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># We hang the dendrogram a bit:</span></span>
<span id="cb3-20">dend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hang.dendrogram</span>(dend, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hang_height=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>)</span>
<span id="cb3-21">dend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set</span>(dend, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"labels_cex"</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)</span>
<span id="cb3-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># And plot:</span></span>
<span id="cb3-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mar =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>))</span>
<span id="cb3-24"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(dend, </span>
<span id="cb3-25">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Clustered ELO data set</span></span>
<span id="cb3-26"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">     (the labels give the Coach Name)"</span>, </span>
<span id="cb3-27">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">horiz =</span>  <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nodePar =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cex =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">007</span>))</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://brandonlebeau.org/posts/cluster-coaches_files/figure-html/dendrogram-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>From the dendrogram, it appears from these 71 coaches, there are three groups that stand out from the rest. A further exploration of the results can be done with a heatmap. Below I create a d3 heatmap of the ELO Ratings and also include the dendrogram for the rows. The heatmap can be useful to explore similarities within the different groups. From the heatmap, it is a bit easier to see that the top cluster is the highest performing coaches, the middle cluster is the lowest performing, and the bottom cluster is an average group of coaches over this period based on ELO ratings.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">d3heatmap<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">d3heatmap</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(ELO_wide, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">starts_with</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Rating'</span>))),</span>
<span id="cb4-2">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dendrogram =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"row"</span>,</span>
<span id="cb4-3">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Rowv =</span> dend,</span>
<span id="cb4-4">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Greens"</span>,</span>
<span id="cb4-5">                     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># scale = "row",</span></span>
<span id="cb4-6">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1200</span>,</span>
<span id="cb4-7">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show_grid =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette RdYlBu is 11
Returning the palette you asked for with that many colors
Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette RdYlBu is 11
Returning the palette you asked for with that many colors</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-e250a8500734382751c2" style="width:100%;height:1160px;" class="d3heatmap html-widget"></div>
<script type="application/json" data-for="htmlwidget-e250a8500734382751c2">{"x":{"rows":{"members":71,"height":625.1709734230328,"edgePar":{"col":""},"children":[{"members":56,"height":441.395793231201,"edgePar":{"col":""},"children":[{"members":33,"height":303.3385442302865,"edgePar":{"col":""},"children":[{"members":28,"height":196.5088820920211,"edgePar":{"col":""},"children":[{"members":15,"height":164.7940910092465,"edgePar":{"col":""},"children":[{"members":10,"height":132.4997838204882,"edgePar":{"col":""},"children":[{"members":7,"height":111.7254754274991,"edgePar":{"col":""},"children":[{"members":5,"height":90.05300503011016,"edgePar":{"col":""},"children":[{"members":3,"height":67.44508807708144,"edgePar":{"col":""},"children":[{"members":2,"height":42.9150194771979,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"1","edgePar":{"col":""}},{"members":1,"height":0,"label":"51","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"60","edgePar":{"col":""}}]},{"members":2,"height":25.7554199876577,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"66","edgePar":{"col":""}},{"members":1,"height":0,"label":"56","edgePar":{"col":""}}]}]},{"members":2,"height":56.17053143372658,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"45","edgePar":{"col":""}},{"members":1,"height":0,"label":"54","edgePar":{"col":""}}]}]},{"members":3,"height":84.8882125155301,"edgePar":{"col":""},"children":[{"members":2,"height":51.06202264015929,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"10","edgePar":{"col":""}},{"members":1,"height":0,"label":"28","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"25","edgePar":{"col":""}}]}]},{"members":5,"height":102.1418010161001,"edgePar":{"col":""},"children":[{"members":3,"height":68.96520330048033,"edgePar":{"col":""},"children":[{"members":2,"height":35.31259168071766,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"15","edgePar":{"col":""}},{"members":1,"height":0,"label":"24","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"53","edgePar":{"col":""}}]},{"members":2,"height":66.76942993185611,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"9","edgePar":{"col":""}},{"members":1,"height":0,"label":"18","edgePar":{"col":""}}]}]}]},{"members":13,"height":133.8016790214624,"edgePar":{"col":""},"children":[{"members":7,"height":127.3872679322813,"edgePar":{"col":""},"children":[{"members":5,"height":104.9660367436614,"edgePar":{"col":""},"children":[{"members":4,"height":59.21291140248974,"edgePar":{"col":""},"children":[{"members":2,"height":28.48936803008635,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"64","edgePar":{"col":""}},{"members":1,"height":0,"label":"69","edgePar":{"col":""}}]},{"members":2,"height":45.36537251888021,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"59","edgePar":{"col":""}},{"members":1,"height":0,"label":"30","edgePar":{"col":""}}]}]},{"members":1,"height":0,"label":"35","edgePar":{"col":""}}]},{"members":2,"height":50.6588381854741,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"27","edgePar":{"col":""}},{"members":1,"height":0,"label":"68","edgePar":{"col":""}}]}]},{"members":6,"height":94.75434416600854,"edgePar":{"col":""},"children":[{"members":5,"height":81.87792044737698,"edgePar":{"col":""},"children":[{"members":3,"height":65.27710092952131,"edgePar":{"col":""},"children":[{"members":2,"height":26.22568922283765,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"36","edgePar":{"col":""}},{"members":1,"height":0,"label":"47","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"39","edgePar":{"col":""}}]},{"members":2,"height":39.47660456509079,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"29","edgePar":{"col":""}},{"members":1,"height":0,"label":"14","edgePar":{"col":""}}]}]},{"members":1,"height":0,"label":"40","edgePar":{"col":""}}]}]}]},{"members":5,"height":147.4576565370105,"edgePar":{"col":""},"children":[{"members":4,"height":83.62337503854351,"edgePar":{"col":""},"children":[{"members":2,"height":26.29603129506052,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"8","edgePar":{"col":""}},{"members":1,"height":0,"label":"42","edgePar":{"col":""}}]},{"members":2,"height":64.61729643722816,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"23","edgePar":{"col":""}},{"members":1,"height":0,"label":"6","edgePar":{"col":""}}]}]},{"members":1,"height":0,"label":"26","edgePar":{"col":""}}]}]},{"members":23,"height":259.3533751180843,"edgePar":{"col":""},"children":[{"members":18,"height":205.498712518996,"edgePar":{"col":""},"children":[{"members":13,"height":179.028827902609,"edgePar":{"col":""},"children":[{"members":7,"height":160.4156415137334,"edgePar":{"col":""},"children":[{"members":5,"height":119.7149792045337,"edgePar":{"col":""},"children":[{"members":3,"height":54.1445166093534,"edgePar":{"col":""},"children":[{"members":2,"height":46.40492119909579,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"41","edgePar":{"col":""}},{"members":1,"height":0,"label":"5","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"63","edgePar":{"col":""}}]},{"members":2,"height":60.69688933716886,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"62","edgePar":{"col":""}},{"members":1,"height":0,"label":"71","edgePar":{"col":""}}]}]},{"members":2,"height":70.86449064336269,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"70","edgePar":{"col":""}},{"members":1,"height":0,"label":"61","edgePar":{"col":""}}]}]},{"members":6,"height":114.4763330130152,"edgePar":{"col":""},"children":[{"members":4,"height":73.60044190177622,"edgePar":{"col":""},"children":[{"members":2,"height":53.44784707801921,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"13","edgePar":{"col":""}},{"members":1,"height":0,"label":"22","edgePar":{"col":""}}]},{"members":2,"height":67.69150483845578,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"57","edgePar":{"col":""}},{"members":1,"height":0,"label":"34","edgePar":{"col":""}}]}]},{"members":2,"height":106.3887222660673,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"49","edgePar":{"col":""}},{"members":1,"height":0,"label":"38","edgePar":{"col":""}}]}]}]},{"members":5,"height":130.9309016360974,"edgePar":{"col":""},"children":[{"members":3,"height":78.37387378291847,"edgePar":{"col":""},"children":[{"members":2,"height":56.58846734399147,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"19","edgePar":{"col":""}},{"members":1,"height":0,"label":"20","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"32","edgePar":{"col":""}}]},{"members":2,"height":71.90499840100645,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"58","edgePar":{"col":""}},{"members":1,"height":0,"label":"17","edgePar":{"col":""}}]}]}]},{"members":5,"height":106.7666312979721,"edgePar":{"col":""},"children":[{"members":4,"height":87.53704012372498,"edgePar":{"col":""},"children":[{"members":2,"height":41.29669252004518,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"31","edgePar":{"col":""}},{"members":1,"height":0,"label":"55","edgePar":{"col":""}}]},{"members":2,"height":58.73248496445329,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"67","edgePar":{"col":""}},{"members":1,"height":0,"label":"50","edgePar":{"col":""}}]}]},{"members":1,"height":0,"label":"16","edgePar":{"col":""}}]}]}]},{"members":15,"height":256.2168015447539,"edgePar":{"col":""},"children":[{"members":14,"height":226.2444409129949,"edgePar":{"col":""},"children":[{"members":10,"height":160.9425841056675,"edgePar":{"col":""},"children":[{"members":6,"height":108.6872214843153,"edgePar":{"col":""},"children":[{"members":3,"height":49.71444089075328,"edgePar":{"col":""},"children":[{"members":2,"height":47.73418701059209,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"7","edgePar":{"col":""}},{"members":1,"height":0,"label":"46","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"21","edgePar":{"col":""}}]},{"members":3,"height":49.92322522894004,"edgePar":{"col":""},"children":[{"members":2,"height":31.83165958345867,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"3","edgePar":{"col":""}},{"members":1,"height":0,"label":"37","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"65","edgePar":{"col":""}}]}]},{"members":4,"height":120.5182445017711,"edgePar":{"col":""},"children":[{"members":3,"height":79.72710169304239,"edgePar":{"col":""},"children":[{"members":2,"height":56.35523977521989,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"4","edgePar":{"col":""}},{"members":1,"height":0,"label":"43","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"48","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"11","edgePar":{"col":""}}]}]},{"members":4,"height":95.90670563636985,"edgePar":{"col":""},"children":[{"members":3,"height":74.98271485626321,"edgePar":{"col":""},"children":[{"members":2,"height":58.78208720351749,"edgePar":{"col":""},"children":[{"members":1,"height":0,"label":"44","edgePar":{"col":""}},{"members":1,"height":0,"label":"12","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"2","edgePar":{"col":""}}]},{"members":1,"height":0,"label":"33","edgePar":{"col":""}}]}]},{"members":1,"height":0,"label":"52","edgePar":{"col":""}}]}]},"cols":null,"matrix":{"data":["1512.674","1524.384","1550.272","1519.778","1520.064","1484.809","1535.872","1538.771","1499.614","1500.203","1470.825","1502.422","1552.086","1554.813","1497.017","1510.311","1546.6","1587.39","1520.529","1450.36","1495.721","1537.923","1570.521","1513.036","1444.486","1530.772","1551.612","1557.362","1561.707","1476.497","1542.961","1528.345","1515.117","1581.542","1493.441","1509.718","1562.821","1630.966","1574.578","1535.784","1510.31","1549.582","1615.124","1603.743","1499.313","1471.34","1558.421","1582.483","1599.76","1483.543","1549.137","1543.86","1488.241","1510.86","1525.459","1536.726","1540.516","1507.378","1490.563","1508.036","1500.488","1546.412","1513.738","1490.201","1561.6","1555.108","1569.199","1527.779","1523.801","1560.756","1550.743","1613.5","1499.668","1528.623","1519.976","1515.381","1522.163","1549.306","1579.991","1563.193","1517.275","1530.186","1549.375","1567.99","1538.705","1513.663","1547.654","1562.427","1530.073","1576.959","1488.522","1538.032","1551.046","1542.845","1544.699","1493.836","1479.832","1522.868","1595.191","1591.78","1574.401","1523.803","1594.235","1624.777","1553.16","1534.861","1546.655","1582.407","1607.537","1559.756","1515.031","1519.427","1543.375","1548.078","1593.711","1511.328","1532.106","1522.902","1538.917","1590.514","1555.849","1489.531","1534.594","1521.251","1586.335","1558.477","1537.436","1558.858","1577.911","1598.801","1526.505","1544.373","1539.883","1574.204","1588.11","1597.985","1533.507","1499.816","1547.639","1592.614","1605.62","1582.948","1570.682","1551.701","1569.055","1602.363","1583.391","1564.062","1527.576","1576.46","1656.878","1581.891","1563.533","1541.451","1530.855","1639.899","1592.775","1506.142","1522.832","1542.177","1686.622","1614.257","1532.883","1620.415","1636.313","1518.496","1512.511","1518.108","1472.042","1434.619","1514.434","1508.149","1476.58","1476","1454.051","1531.732","1482.158","1494.495","1506.822","1442.861","1512.07","1547.7","1442.78","1451.759","1505.654","1491.511","1498.824","1442.113","1427.363","1489.013","1535.079","1498.232","1420.915","1508.714","1510.011","1501.475","1442.908","1418.854","1495.55","1535.589","1478.852","1445.651","1504.982","1467.925","1438.985","1495.975","1451.247","1459.442","1479.817","1421.184","1452.775","1433.351","1474.953","1495.986","1473.419","1486.78","1402.231","1453.998","1459.837","1446.746","1499.106","1463.14","1407.709","1434.101","1431.955","1411.285","1414.801","1437.393","1430.88","1451.392","1430.18","1476.434","1526.244","1540.464","1490.514","1418.932","1443.237","1522.301","1542.325","1534.726","1483.987","1475.706","1498.658","1532.788","1520.37","1419.619","1495.99","1503.409","1477.818","1490.809","1429.406","1476.126","1537.742","1470.325","1432.114","1496.45","1491.699","1495.5","1459.557","1403.805","1491.805","1492.476","1467.113","1432.857","1416.63","1437.987","1491.543","1488.531","1455.351","1396.509","1434.667","1530.149","1468.124","1421.003","1415.264","1480.456","1553.328","1434.316","1406.201","1376.334","1595.654","1666.951","1635.637","1607.148","1632.065","1593.183","1624.902","1622.456","1622.513","1622.344","1589.062","1629.602","1660.642","1611.83","1651.672","1576.638","1628.427","1608.515","1616.084","1557.216","1579.51","1614.27","1615.832","1596.16","1576.034","1595.384","1623.269","1651.835","1600.968","1554.176","1656.962","1665.382","1664.901","1625.163","1656.474","1697.191","1662.55","1644.575","1613.229","1624.948","1659.095","1617.892","1644.616","1577.533","1618.839","1701.39","1685.219","1630.53","1589.735","1557.88","1609.256","1586.186","1645.451","1658.289","1682.258","1566.989","1607.744","1620.317","1640.35","1698.085","1561.309","1570.744","1627.21","1651.474","1634.446","1574.956","1604.629","1669.728","1715.076","1664.928","1691.675","1710.068","1712.641","1709.6","1718.96"],"x":[1512.674,1524.384,1550.272,1519.778,1520.064,1484.809,1535.872,1538.771,1499.614,1500.203,1470.825,1502.422,1552.086,1554.813,1497.017,1510.311,1546.6,1587.39,1520.529,1450.36,1495.721,1537.923,1570.521,1513.036,1444.486,1530.772,1551.612,1557.362,1561.707,1476.497,1542.961,1528.345,1515.117,1581.542,1493.441,1509.718,1562.821,1630.966,1574.578,1535.784,1510.31,1549.582,1615.124,1603.743,1499.313,1471.34,1558.421,1582.483,1599.76,1483.543,1549.137,1543.86,1488.241,1510.86,1525.459,1536.726,1540.516,1507.378,1490.563,1508.036,1500.488,1546.412,1513.738,1490.201,1561.6,1555.108,1569.199,1527.779,1523.801,1560.756,1550.743,1613.5,1499.668,1528.623,1519.976,1515.381,1522.163,1549.306,1579.991,1563.193,1517.275,1530.186,1549.375,1567.99,1538.705,1513.663,1547.654,1562.427,1530.073,1576.959,1488.522,1538.032,1551.046,1542.845,1544.699,1493.836,1479.832,1522.868,1595.191,1591.78,1574.401,1523.803,1594.235,1624.777,1553.16,1534.861,1546.655,1582.407,1607.537,1559.756,1515.031,1519.427,1543.375,1548.078,1593.711,1511.328,1532.106,1522.902,1538.917,1590.514,1555.849,1489.531,1534.594,1521.251,1586.335,1558.477,1537.436,1558.858,1577.911,1598.801,1526.505,1544.373,1539.883,1574.204,1588.11,1597.985,1533.507,1499.816,1547.639,1592.614,1605.62,1582.948,1570.682,1551.701,1569.055,1602.363,1583.391,1564.062,1527.576,1576.46,1656.878,1581.891,1563.533,1541.451,1530.855,1639.899,1592.775,1506.142,1522.832,1542.177,1686.622,1614.257,1532.883,1620.415,1636.313,1518.496,1512.511,1518.108,1472.042,1434.619,1514.434,1508.149,1476.58,1476,1454.051,1531.732,1482.158,1494.495,1506.822,1442.861,1512.07,1547.7,1442.78,1451.759,1505.654,1491.511,1498.824,1442.113,1427.363,1489.013,1535.079,1498.232,1420.915,1508.714,1510.011,1501.475,1442.908,1418.854,1495.55,1535.589,1478.852,1445.651,1504.982,1467.925,1438.985,1495.975,1451.247,1459.442,1479.817,1421.184,1452.775,1433.351,1474.953,1495.986,1473.419,1486.78,1402.231,1453.998,1459.837,1446.746,1499.106,1463.14,1407.709,1434.101,1431.955,1411.285,1414.801,1437.393,1430.88,1451.392,1430.18,1476.434,1526.244,1540.464,1490.514,1418.932,1443.237,1522.301,1542.325,1534.726,1483.987,1475.706,1498.658,1532.788,1520.37,1419.619,1495.99,1503.409,1477.818,1490.809,1429.406,1476.126,1537.742,1470.325,1432.114,1496.45,1491.699,1495.5,1459.557,1403.805,1491.805,1492.476,1467.113,1432.857,1416.63,1437.987,1491.543,1488.531,1455.351,1396.509,1434.667,1530.149,1468.124,1421.003,1415.264,1480.456,1553.328,1434.316,1406.201,1376.334,1595.654,1666.951,1635.637,1607.148,1632.065,1593.183,1624.902,1622.456,1622.513,1622.344,1589.062,1629.602,1660.642,1611.83,1651.672,1576.638,1628.427,1608.515,1616.084,1557.216,1579.51,1614.27,1615.832,1596.16,1576.034,1595.384,1623.269,1651.835,1600.968,1554.176,1656.962,1665.382,1664.901,1625.163,1656.474,1697.191,1662.55,1644.575,1613.229,1624.948,1659.095,1617.892,1644.616,1577.533,1618.839,1701.39,1685.219,1630.53,1589.735,1557.88,1609.256,1586.186,1645.451,1658.289,1682.258,1566.989,1607.744,1620.317,1640.35,1698.085,1561.309,1570.744,1627.21,1651.474,1634.446,1574.956,1604.629,1669.728,1715.076,1664.928,1691.675,1710.068,1712.641,1709.6,1718.96],"dim":[71,5],"rows":["1","51","60","66","56","45","54","10","28","25","15","24","53","9","18","64","69","59","30","35","27","68","36","47","39","29","14","40","8","42","23","6","26","41","5","63","62","71","70","61","13","22","57","34","49","38","19","20","32","58","17","31","55","67","50","16","7","46","21","3","37","65","4","43","48","11","44","12","2","33","52"],"cols":["Rating_2011","Rating_2012","Rating_2013","Rating_2014","Rating_2015"]},"title":null,"image":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAAAFCAYAAAAXIPF4AAAD/UlEQVQ4jVWTXUybdRTGf+/6QVukfBUolJZCWRnDGZTAgLDwUTPSJWSRCzMUzULUzcmNkhESLzRLTHDRaOIShx9kUYi7qhcaGGplRCYElo2MKaHQlFI+SxsgQPsOaPGi8BrO3f/JyfM855znL0TnvjwAEA11qBb/BADPHEJZNQAHY0MARFzLyKyZiFUtAKiGuyHXjJCWgzdqxxS8TejzX9A0nkEoqz6GxXe2ElZaOCpF9yfImy/F+Ne8zKdexfSwA3LNiIY6fnycSH1hBjkn+jlY80pYvj6BWvcNIq5l9lo+xC9aca+HqHXfQKxqQb3rjvnNNQMgpOVIGnjmYvjhbEfY0Tx+0XpMD0CW9VrXxyX+eyj0WghtxtwnJyEml7C0V05cngm5bB1ZRRVirg0A9a4blAKioY59WQq66Bjz6iZ0iZMIZdWElRZ00TGE+CQU2jCRwVGU6fv8tXOOhW0t8rJXSQw4GRQv8sdqHpXGJRR6LUJ8Ekt75QjyE5xK9iBfmYgtUxXldLaGhW0tuUleZBVVyFcmSHpuDU/YTGaRBdVwN4LBDEqB+dSrxKVoUUTWCSstLCnreaSuJE+3EesB5tVNbGa9zJM1Nda4xySOf49gMDMoXmRhW0ucQo8wtyUepKtcAIwsZ2NJ1pCucqHedeON2mm/9Tc3WyslDOD6vTzspUZqoz9IF6p9b4+ma2d5p+gR3/zzEjO+DW6WDEppiQyMsOSYxth1WXoDPHsaIL6zlf2eu8ismZBrjiWwrQHRUEf0g/cB0LQ1xK4PhByTBF1BjB01sRSMDeHrvC9x45kj5JjkSd8C5d/ZEcqq2e+5y7OnATRtDf976agh5JgEIO55HUuOaVKtqQRdQbIaC5CbHnZIX0b9Vj+6C9lEgR3A1DhEb8oy48XvIuSrAVicDdMIGPLV+EAi+72xAHmRAoC3d75gtL2f0IVsNG0NCGk5yJtzMFqHiAyMILNmIm++xMGal6DjDpqxIWTWzJgPIOgKEjcwgro5h/1D05rDxRzV4mwY4+G3j7iWARi1fY0hX42xowZN4xleAH6q7aOq/j4mx0fQcxfflTsszoYpbS9GrGoh2Pkmi7NhPF/50M+Pcr13AlNNKvZSI0LXmPcgX5/A7MrWMfH6wgwGplZxOt1ceb2Y/nEfrecLGJha5aj/jRc38YtWBqZWAcjXJ2BJ1uBeDzG7ssWMbwN7qZGKzAUufxaQuG02C06nG/90gPQCHSZrKieNSQA4nW5sNgszvg1J73brrySeTqPp2lnqCzNIV7mklN/6bZp5VxD/dIC+b08xspwtaTs/HebBg3OSxxnfBgCt5wtwr4fo6p1g5ucpTr5SiH86wOa/a8d28B/7EMRPkHbIiQAAAABJRU5ErkJggg==","rowcolors":null,"colcolors":null,"theme":null,"options":{"hm_width":null,"hm_height":1200,"xaxis_height":80,"yaxis_width":120,"xaxis_font_size":19.56811869688071,"yaxis_font_size":8.882077451968307,"xaxis_angle":60,"xaxis_location":"bottom","yaxis_location":"right","xaxis_title":null,"yaxis_title":null,"xaxis_title_font_size":14,"yaxis_title_font_size":14,"bins":16,"manual_breaks":false,"symbreaks":false,"print_values":false,"show_legend":false,"legend_scaler":1,"legend_title":null,"legend_location":"fl","legend_colors":["#A50026","#C62327","#E14730","#F46D43","#FB9957","#FEBF70","#FEE090","#FFF5AF","#F6FBD2","#E0F3F8","#BDE2EE","#99CAE1","#74ADD1","#5687BE","#4060AA","#313695"],"legend_bins":16,"legend_breaks":[1376.33444025392,1397.748509604536,1419.162578955151,1440.576648305767,1461.990717656382,1483.404787006998,1504.818856357614,1526.232925708229,1547.646995058845,1569.061064409461,1590.475133760076,1611.889203110692,1633.303272461308,1654.717341811923,1676.131411162539,1697.545480513154,1718.95954986377],"legend_type":"histogram","legend_fill":null,"brush_color":"#0000FF","na_color":"#777777","show_grid":false,"cellnote_row":null,"cellnote_col":null,"cellnote_val":"Value","cellnote_fontsize":12,"cellnote_color":"#222222","anim_duration":500,"rsc_labs":null,"csc_labs":null,"rsc_cols":null,"csc_cols":null,"rsc_colnames":null,"csc_colnames":null},"params":{"x":[[1512.67444846853,1524.38429708253,1550.27207284915,1519.7780417929,1520.06357435392],[1561.30875902952,1570.74389611103,1627.21023948102,1651.47367197939,1634.44632920583],[1576.63791960213,1628.42724839736,1608.51523890725,1616.08361927539,1557.2163739724],[1656.96201831395,1665.3824776172,1664.90117580739,1625.16326535425,1656.47391749356],[1514.43411886068,1508.14947843857,1476.57953302028,1476.00000220596,1454.05112906095],[1639.8985542767,1592.77510993975,1506.14156670333,1522.83178474057,1542.17726434036],[1595.65430605727,1666.95060639138,1635.63723543329,1607.14764940748,1632.06509023318],[1605.6204331177,1582.94790504378,1570.68229795798,1551.70054004674,1569.05465786663],[1555.1078567886,1569.19854819752,1527.7787602557,1523.80077313072,1560.75644491914],[1509.71784031169,1562.8205244272,1630.96593421075,1574.57827813814,1535.78398560703],[1701.38991054323,1685.2187777345,1630.52982908631,1589.7350837464,1557.87987446839],[1566.98877523302,1607.74436139635,1620.3165437361,1640.34993532929,1698.08476062686],[1478.85179111583,1445.65107793474,1504.98187979653,1467.92473152407,1438.98519145015],[1526.5049150039,1544.37345563264,1539.8832416206,1574.20439608446,1588.11034448848],[1549.13681374206,1543.85977978626,1488.24103296942,1510.86005935333,1525.45934327251],[1480.45560640429,1553.32828573041,1434.31615730159,1406.20069907906,1376.33444025392],[1429.40556595611,1476.12631089762,1537.741681863,1470.3253221136,1432.11419110617],[1550.74278843979,1613.49978926728,1499.66765571752,1528.62283910374,1519.97634593925],[1430.18002219685,1476.4338017454,1526.24381800319,1540.46447241793,1490.51370512921],[1418.93203809966,1443.23702321107,1522.30087172596,1542.32500860699,1534.72572798248],[1589.06242934521,1629.60229767264,1660.6423232838,1611.82957080678,1651.67182948902],[1495.97513208041,1451.24660514032,1459.44246528156,1479.81727028121,1421.18398715602],[1656.87764209445,1581.8912514508,1563.53295497089,1541.4511691175,1530.8549731291],[1536.72616511443,1540.51558383358,1507.37785549516,1490.5631257992,1508.03557223412],[1471.3398894551,1558.42061708834,1582.48287511866,1599.75961467429,1483.54343049066],[1686.62213213113,1614.2565323513,1532.88332567394,1620.41503463869,1636.31335678913],[1574.40149597503,1523.80303657426,1594.23549547306,1624.77690346162,1553.16010180199],[1510.30990414437,1549.58165005976,1615.1236322277,1603.74336384501,1499.31302365654],[1558.4768520169,1537.4355800111,1558.85780952639,1577.91082670512,1598.80106842693],[1488.52187764128,1538.03189088608,1551.04616446765,1542.84501103341,1544.69880275807],[1496.44987214584,1491.69854058294,1495.50016942319,1459.55745393397,1403.80524124735],[1483.98712332132,1475.70619178927,1498.65755632984,1532.78767754634,1520.37003142317],[1574.95622016406,1604.62881698707,1669.72804839429,1715.07649731947,1664.92826004451],[1486.78048669238,1402.23092570608,1453.99755407262,1459.83721166018,1446.74601780738],[1493.83644104974,1479.83166452604,1522.86838375384,1595.19112908394,1591.780486244],[1515.0312287571,1519.42702091569,1543.37535945497,1548.07831197217,1593.71140649371],[1579.51000821405,1614.2702485511,1615.83247121655,1596.15993315009,1576.03364945818],[1411.28539549387,1414.80101212856,1437.39345219228,1430.88043160432,1451.39245070255],[1555.8490420389,1489.53077056954,1534.59424883204,1521.25092457512,1586.33485278124],[1597.98500032975,1533.50698723227,1499.81603299404,1547.63881711105,1592.61414113649],[1518.49579859322,1512.51060353417,1518.10820715048,1472.04152875592,1434.61920249465],[1602.36266797743,1583.39148011706,1564.06168608165,1527.57589087254,1576.46007952382],[1697.19116734729,1662.54980643912,1644.57473872262,1613.22893532663,1624.94754259248],[1609.25599352881,1586.18552937609,1645.45104573771,1658.28863043249,1682.25779558028],[1530.77249563548,1551.61238900243,1557.36197712224,1561.70698735271,1476.49739666233],[1593.18290610251,1624.90164489328,1622.45585318748,1622.51263481242,1622.34408131677],[1511.32781709341,1532.10631420611,1522.90188912158,1538.9174388074,1590.51414918714],[1659.0953248619,1617.89185980108,1644.61585810405,1577.53325293967,1618.83897667987],[1499.10648831142,1463.13990598665,1407.70860118702,1434.10076875591,1431.9552113991],[1434.66728999672,1530.14930319956,1468.12443622149,1421.00284173873,1415.2636835915],[1484.80935965187,1535.87178750297,1538.77076686347,1499.61447262912,1500.20347050199],[1691.67530842287,1710.06774234641,1712.64058348823,1709.60012040407,1718.95954986377],[1500.48848156975,1546.41234253271,1513.73790526523,1490.20096915518,1561.59983250371],[1542.96143870694,1528.34470206231,1515.11665340196,1581.5417911021,1493.44101483545],[1491.8046603384,1492.4760762238,1467.11315763616,1432.85652842629,1416.62992048399],[1495.72104515261,1537.92346945028,1570.52099094794,1513.0364024491,1444.48649105825],[1452.77508698586,1433.35096279793,1474.95319980629,1495.98570960872,1473.41928002717],[1419.61859155146,1495.99027339962,1503.40930319442,1477.81765822422,1490.80933226226],[1513.6630734391,1547.65411484947,1562.42707347876,1530.07340407892,1576.95885653223],[1470.82453940017,1502.42175365881,1552.08590688683,1554.81332657619,1497.0170127248],[1501.4754281015,1442.90795647538,1418.8544291134,1495.55013302134,1535.58944377323],[1512.07001893565,1547.70040486256,1442.77961740998,1451.75946364358,1505.65351455269],[1531.73191143975,1482.1580046564,1494.49518878197,1506.82164632306,1442.86071464255],[1515.38090799704,1522.16274304648,1549.30635835698,1579.9908545394,1563.19285279073],[1595.38354109134,1623.26886162337,1651.83479324746,1600.9677022479,1554.17558422033],[1510.31072612236,1546.6004294301,1587.38970954708,1520.52896833624,1450.36024817785],[1437.98746993282,1491.5425149934,1488.53077095295,1455.35146427799,1396.50866473842],[1534.86083543358,1546.65503172294,1582.40697507086,1607.53690665576,1559.7562357607],[1517.27527162293,1530.18591998986,1549.3751104283,1567.98998753865,1538.70492569747],[1535.0793024726,1498.23193653291,1420.9148843586,1508.71391680647,1510.01050296972],[1491.5105208088,1498.82420260669,1442.11347273514,1427.36282041704,1489.01331276386]],"Rowv":[[[[[[[[1,51],[[15,24],53]],[9,18]],[[45,54],[56,66]]],[[6,23],[8,42]]],[[[[10,28],25],[27,68]],[[[[14,29],[[[30,59],[36,47]],[64,69]]],35],[39,40]]]],[[[[[[5,41],63],[16,[[31,55],[50,67]]]],[[[[13,22],34],57],[38,49]]],[[61,70],[62,71]]],[[17,58],[[19,20],[32,60]]]]],[[[[2,[12,44]],33],[[[3,37],65],[[7,46],21]]],[[[[[4,43],48],11],26],52]]],"Colv":true,"distfun":["function (x, method = \"euclidean\", diag = FALSE, upper = FALSE, ","    p = 2) ","{","    if (!is.na(pmatch(method, \"euclidian\"))) ","        method <- \"euclidean\"","    METHODS <- c(\"euclidean\", \"maximum\", \"manhattan\", \"canberra\", ","        \"binary\", \"minkowski\")","    method <- pmatch(method, METHODS)","    if (is.na(method)) ","        stop(\"invalid distance method\")","    if (method == -1) ","        stop(\"ambiguous distance method\")","    x <- as.matrix(x)","    N <- nrow(x)","    attrs <- if (method == 6L) ","        list(Size = N, Labels = dimnames(x)[[1L]], Diag = diag, ","            Upper = upper, method = METHODS[method], p = p, call = match.call(), ","            class = \"dist\")","    else list(Size = N, Labels = dimnames(x)[[1L]], Diag = diag, ","        Upper = upper, method = METHODS[method], call = match.call(), ","        class = \"dist\")","    .Call(C_Cdist, x, method, attrs, p)","}"],"hclustfun":["function (d, method = \"complete\", members = NULL) ","{","    METHODS <- c(\"ward.D\", \"single\", \"complete\", \"average\", \"mcquitty\", ","        \"median\", \"centroid\", \"ward.D2\")","    if (method == \"ward\") {","        message(\"The \\\"ward\\\" method has been renamed to \\\"ward.D\\\"; note new \\\"ward.D2\\\"\")","        method <- \"ward.D\"","    }","    i.meth <- pmatch(method, METHODS)","    if (is.na(i.meth)) ","        stop(\"invalid clustering method\", paste(\"\", method))","    if (i.meth == -1) ","        stop(\"ambiguous clustering method\", paste(\"\", method))","    n <- as.integer(attr(d, \"Size\"))","    if (is.null(n)) ","        stop(\"invalid dissimilarities\")","    if (is.na(n) || n > 65536L) ","        stop(\"size cannot be NA nor exceed 65536\")","    if (n < 2) ","        stop(\"must have n >= 2 objects to cluster\")","    len <- as.integer(n * (n - 1)/2)","    if (length(d) != len) ","        (if (length(d) < len) ","            stop","        else warning)(\"dissimilarities of improper length\")","    if (is.null(members)) ","        members <- rep(1, n)","    else if (length(members) != n) ","        stop(\"invalid length of members\")","    storage.mode(d) <- \"double\"","    hcl <- .Fortran(C_hclust, n = n, len = len, method = as.integer(i.meth), ","        ia = integer(n), ib = integer(n), crit = double(n), members = as.double(members), ","        nn = integer(n), disnn = double(n), diss = d)","    hcass <- .Fortran(C_hcass2, n = n, ia = hcl$ia, ib = hcl$ib, ","        order = integer(n), iia = integer(n), iib = integer(n))","    structure(list(merge = cbind(hcass$iia[1L:(n - 1)], hcass$iib[1L:(n - ","        1)]), height = hcl$crit[1L:(n - 1)], order = hcass$order, ","        labels = attr(d, \"Labels\"), method = METHODS[i.meth], ","        call = match.call(), dist.method = attr(d, \"method\")), ","        class = \"hclust\")","}"],"dendrogram":"row","reorderfun":["function (d, w) ","reorder(d, w)"],"k_row":null,"k_col":null,"symm":false,"revC":null,"scale":"none","scale.by.range":false,"na.rm":true,"na.value":null,"digits":3,"cellnote":null,"cellnote_scale":false,"labRow":null,"labCol":["Rating_2011","Rating_2012","Rating_2013","Rating_2014","Rating_2015"],"col":"RdYlBu","symbreaks":false,"na.color":"#777777","rng":null,"breaks":null,"RowSideColors":null,"ColSideColors":null,"RowColorsPalette":["blue","orange","black"],"ColColorsPalette":["cyan","maroon","grey"]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>

 ]]></description>
  <category>R</category>
  <category>College Football</category>
  <category>Cluster Analysis</category>
  <guid>https://brandonlebeau.org/posts/cluster-coaches.html</guid>
  <pubDate>Mon, 04 Dec 2017 06:00:00 GMT</pubDate>
</item>
<item>
  <title>Announcing simglm version 0.6.0: Power and Simulation of Generalized Linear Mixed Models</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/simglm-jsm.html</link>
  <description><![CDATA[ 




<p>The <code>simglm</code> package has an update on CRAN bumping the version up to 0.6.0. This update has added the ability to simulate count data (poisson) and also has fixed (I think) the Shiny app that comes with the package. As I have not posted about this package since the first CRAN release (v 0.5.0), I plan to give an overview of all that the package offers in addition to the new additions.</p>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>The package can be installed directly from CRAN:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"simglm"</span>)</span></code></pre></div></div>
</div>
</section>
<section id="simglm-features" class="level2">
<h2 class="anchored" data-anchor-id="simglm-features"><code>simglm</code> Features</h2>
<p>The package allows for flexible simulation of general(-ized) linear (mixed) models with up to three levels of nesting. The flexibility comes from the ability to easily vary data generation procedures. For example one can use any R data generating function to simulate error, random effect, or covariate distributions. Other data generating options can include:</p>
<ul>
<li>heterogeneity of variance</li>
<li>missing data</li>
<li>ARIMA models for within error structure</li>
<li>flexible time specification for longitudinal models</li>
<li>unbalanced data generation for nested designs</li>
<li>correlated covariates</li>
<li>factor/categorical variable generation</li>
</ul>
<p>The primary functions for data generation within the package are <code>sim_reg</code> and <code>sim_glm</code>. The main distinction being that <code>sim_reg</code> is used for continuous outcomes whereas <code>sim_glm</code> is used for non-continuous outcomes. Currently <code>sim_glm</code> supports dichotomous outcomes (ie., 0/1; logistic) and count outcomes (poisson distributed).</p>
<p>Below are two examples using the <code>sim_reg</code> and <code>sim_glm</code> to generate a simple two level cross sectional model.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">fixed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act_o <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> income <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> grad_degree_f</span>
<span id="cb2-2">fixed_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.02</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>)</span>
<span id="cb2-3">random <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> </span>
<span id="cb2-4">random_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">random_var =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rand_gen =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>)</span>
<span id="cb2-5">cov_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dist_fun =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>,</span>
<span id="cb2-6">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level1'</span>)</span>
<span id="cb2-7">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span></span>
<span id="cb2-8">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb2-9">error_var <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb2-10">with_err_gen <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span></span>
<span id="cb2-11">data_str <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cross'</span></span>
<span id="cb2-12">fact_vars <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">numlevels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">36</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), </span>
<span id="cb2-13">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level1'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level1'</span>))</span>
<span id="cb2-14"></span>
<span id="cb2-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sim_reg</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> fixed, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed_param =</span> fixed_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">random =</span> random,</span>
<span id="cb2-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">random_param =</span> random_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov_param =</span> cov_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> p,</span>
<span id="cb2-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error_var =</span> error_var, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">with_err_gen =</span> with_err_gen, </span>
<span id="cb2-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data_str =</span> data_str, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fact_vars =</span> fact_vars)</span></code></pre></div></div>
</div>
<p>Similar values are used for the <code>sim_glm</code> function, however the within error is not specified.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">fixed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act_o <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> income <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> grad_degree_f</span>
<span id="cb3-2">fixed_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.02</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>)</span>
<span id="cb3-3">random <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> </span>
<span id="cb3-4">random_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">random_var =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rand_gen =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>)</span>
<span id="cb3-5">cov_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dist_fun =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>,</span>
<span id="cb3-6">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level1'</span>)</span>
<span id="cb3-7">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span></span>
<span id="cb3-8">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb3-9">data_str <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cross'</span></span>
<span id="cb3-10">fact_vars <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">numlevels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">36</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), </span>
<span id="cb3-11">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level1'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level1'</span>))</span>
<span id="cb3-12"></span>
<span id="cb3-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sim_glm</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> fixed, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed_param =</span> fixed_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">random =</span> random,</span>
<span id="cb3-14">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">random_param =</span> random_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov_param =</span> cov_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> p,</span>
<span id="cb3-15">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data_str =</span> data_str, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fact_vars =</span> fact_vars, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">outcome_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'logistic'</span>)</span></code></pre></div></div>
</div>
<p>You could easily simulate a count outcome by changing <code>outcome_type = 'logistic'</code> in the last example to <code>outcome_type = 'poisson'</code>.</p>
</section>
<section id="power" class="level2">
<h2 class="anchored" data-anchor-id="power">Power</h2>
<p>The package also includes wrappers around the simulation functions to explore empirical power under these frameworks. For example for a simple regression:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">fixed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> diff <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> numCourse <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>numCourse</span>
<span id="cb4-2">fixed_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>)</span>
<span id="cb4-3">cov_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dist_fun =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>),</span>
<span id="cb4-4">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>),</span>
<span id="cb4-5">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">opts =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb4-6">                              <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb4-7">                              <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)))</span>
<span id="cb4-8">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span></span>
<span id="cb4-9">error_var <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span></span>
<span id="cb4-10">with_err_gen <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span></span>
<span id="cb4-11"></span>
<span id="cb4-12">pow_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'(Intercept)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'act'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'diff'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'numCourse'</span>)</span>
<span id="cb4-13">alpha <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">01</span></span>
<span id="cb4-14">pow_dist <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"t"</span></span>
<span id="cb4-15">pow_tail <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb4-16">replicates <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span></span>
<span id="cb4-17"></span>
<span id="cb4-18">power_out <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sim_pow</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> fixed, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed_param =</span> fixed_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov_param =</span> cov_param,</span>
<span id="cb4-19">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error_var =</span> error_var, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">with_err_gen =</span> with_err_gen, </span>
<span id="cb4-20">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data_str =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pow_param =</span> pow_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> alpha,</span>
<span id="cb4-21">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pow_dist =</span> pow_dist, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pow_tail =</span> pow_tail, </span>
<span id="cb4-22">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replicates =</span> replicates, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">raw_power =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb4-23">power_out</span></code></pre></div></div>
</div>
<p>Where now the simulation function <code>sim_reg</code> replicates 50 times and the estimates are used to generate empirical power for each parameter in the model. This idea becomes more powerful when a Monte Carlo like varying of parameters are used. This can ensure a much larger, explorative, and descriptive power analysis. These analyses if done well with the coverage of the parameters varied, may be more appropriate/realistic based on the data to be collected (or more similar to the data that was collected for post-hoc power analyses). Below is a simple example of varying parameters in the power analysis.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">fixed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> diff <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> numCourse <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>numCourse</span>
<span id="cb5-2">fixed_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>)</span>
<span id="cb5-3">cov_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dist_fun =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>),</span>
<span id="cb5-4">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>),</span>
<span id="cb5-5">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">opts =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb5-6">                              <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb5-7">                              <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)))</span>
<span id="cb5-8">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb5-9">error_var <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb5-10">with_err_gen <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span></span>
<span id="cb5-11">pow_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'(Intercept)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'act'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'diff'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'numCourse'</span>)</span>
<span id="cb5-12">alpha <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">01</span></span>
<span id="cb5-13">pow_dist <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"t"</span></span>
<span id="cb5-14"></span>
<span id="cb5-15">pow_tail <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb5-16">replicates <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span></span>
<span id="cb5-17">terms_vary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>), </span>
<span id="cb5-18">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error_var =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>))</span>
<span id="cb5-19"></span>
<span id="cb5-20">power_out <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sim_pow</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> fixed, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed_param =</span> fixed_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov_param =</span> cov_param,</span>
<span id="cb5-21">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error_var =</span> error_var, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">with_err_gen =</span> with_err_gen, </span>
<span id="cb5-22">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data_str =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pow_param =</span> pow_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> alpha,</span>
<span id="cb5-23">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pow_dist =</span> pow_dist, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pow_tail =</span> pow_tail, </span>
<span id="cb5-24">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replicates =</span> replicates, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">terms_vary =</span> terms_vary, </span>
<span id="cb5-25">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">raw_power =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb5-26"></span>
<span id="cb5-27">power_out</span></code></pre></div></div>
</div>
<p>Similar syntax can be used for nested designs as well as with generalized models. These models and data types take more time to run compared to the single level designs above. Therefore, it is recommended to perform small simulations initially to ensure no errors and estimate how much time the simulation may take.</p>
</section>
<section id="shiny-app" class="level2">
<h2 class="anchored" data-anchor-id="shiny-app">Shiny App</h2>
<p>The package also comes with a Shiny app that contains most (but not all) of the features found in the full package. These will likely be implemented slowly over time. You can run the Shiny app locally with the following function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">simglm<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run_shiny</span>()</span></code></pre></div></div>
</div>
<p>One note, there are errors that occur in the stack trace, however as far as I can tell in my testing the app runs okay.</p>
<section id="jsm" class="level3">
<h3 class="anchored" data-anchor-id="jsm">JSM</h3>
<p>Of note to anyone attending JSM this year, I am talking about the <code>simglm</code> package <a href="https://ww2.amstat.org/meetings/jsm/2017/onlineprogram/ActivityDetails.cfm?SessionID=214411" class="uri">https://ww2.amstat.org/meetings/jsm/2017/onlineprogram/ActivityDetails.cfm?SessionID=214411</a>. Slides of this talk will be posted likely after the talk on my website.</p>
<p>Bugs and feature requests are welcomed and can be submitted directly to GitHub <a href="https://github.com/lebebr01/simglm/issues" class="uri">https://github.com/lebebr01/simglm/issues</a>.</p>


</section>
</section>

 ]]></description>
  <category>R</category>
  <category>Simglm</category>
  <category>Package</category>
  <guid>https://brandonlebeau.org/posts/simglm-jsm.html</guid>
  <pubDate>Mon, 24 Jul 2017 05:00:00 GMT</pubDate>
</item>
<item>
  <title>simglm submission to CRAN this week</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2017-05-23-simglm-submission-to-cran-this-week.html</link>
  <description><![CDATA[ 




<p>This is a quick note looking for any further feedback on the simglm package prior to CRAN submission later this week. The goal is to submit Thursday or Friday this week. The last few documentation finishing touches are happening now working toward a version 0.5.0 release on CRAN.</p>
<p>For those who have not seen this package yet, the aim is to simulate regression models (single level and multilevel models) as well as employ empirical power analyses based on Monte Carlo simulation. The package is relatively flexible in user control of inputs to generate data.</p>
<p>To install the package and also build the vignettes:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">devtools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lebebr01/simglm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">build_vignettes =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div></div>
</div>
<p>Then to generate a simple single level data set.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(simglm)</span>
<span id="cb2-2"></span>
<span id="cb2-3">fixed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> diff <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> numCourse <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>numCourse</span>
<span id="cb2-4">fixed_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb2-5">cov_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dist_fun =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>), </span>
<span id="cb2-6">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>),</span>
<span id="cb2-7">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov_param =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>),</span>
<span id="cb2-8">                                   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>),</span>
<span id="cb2-9">                                   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)))</span>
<span id="cb2-10">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span></span>
<span id="cb2-11">error_var <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb2-12">with_err_gen <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span></span>
<span id="cb2-13">temp_single <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sim_reg</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> fixed, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed_param =</span> fixed_param, </span>
<span id="cb2-14">                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov_param =</span> cov_param,</span>
<span id="cb2-15">                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error_var =</span> error_var, </span>
<span id="cb2-16">                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">with_err_gen =</span> with_err_gen, </span>
<span id="cb2-17">                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data_str =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>)</span>
<span id="cb2-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(temp_single)</span></code></pre></div></div>
</div>
<p>Then one can extend this to conduct of power analysis. The benefit of this approach is that you are able to generate data that hopefully more closely resembles data that is to be collected and can also evaluate assumption violations, sample size differences, and other conditions directly into the power analysis similar to a Monte Carlo simulation.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">fixed <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> diff <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> numCourse <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> act<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>numCourse</span>
<span id="cb3-2">fixed_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>)</span>
<span id="cb3-3">cov_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dist_fun =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>), </span>
<span id="cb3-4">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>),</span>
<span id="cb3-5">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">opts =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb3-6">                              <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb3-7">                              <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)))</span>
<span id="cb3-8">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb3-9">error_var <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb3-10">with_err_gen <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span></span>
<span id="cb3-11">pow_param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'(Intercept)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'act'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'diff'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'numCourse'</span>)</span>
<span id="cb3-12">alpha <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">01</span></span>
<span id="cb3-13">pow_dist <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"t"</span></span>
<span id="cb3-14">pow_tail <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb3-15">replicates <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb3-16">terms_vary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error_var =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>),</span>
<span id="cb3-17">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed_param =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>), </span>
<span id="cb3-18">                                      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>)),</span>
<span id="cb3-19">                <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov_param =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dist_fun =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>),</span>
<span id="cb3-20">                                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), </span>
<span id="cb3-21">                                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>)),</span>
<span id="cb3-22">                                  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dist_fun =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rnorm'</span>),</span>
<span id="cb3-23">                                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), </span>
<span id="cb3-24">                                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var_type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>))</span>
<span id="cb3-25">                                  )</span>
<span id="cb3-26">                   )</span>
<span id="cb3-27">power_out <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sim_pow</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed =</span> fixed, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed_param =</span> fixed_param, </span>
<span id="cb3-28">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cov_param =</span> cov_param,</span>
<span id="cb3-29">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error_var =</span> error_var, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">with_err_gen =</span> with_err_gen, </span>
<span id="cb3-30">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data_str =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"single"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pow_param =</span> pow_param, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> alpha,</span>
<span id="cb3-31">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pow_dist =</span> pow_dist, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pow_tail =</span> pow_tail, </span>
<span id="cb3-32">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replicates =</span> replicates, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">terms_vary =</span> terms_vary)</span>
<span id="cb3-33"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(power_out)</span></code></pre></div></div>
</div>
<p>Questions and feedback are welcomed by filing an issue on GitHub here: <a href="https://github.com/lebebr01/simglm/issues" class="uri">https://github.com/lebebr01/simglm/issues</a>.</p>



 ]]></description>
  <category>R</category>
  <category>Simglm</category>
  <category>Package</category>
  <guid>https://brandonlebeau.org/posts/2017-05-23-simglm-submission-to-cran-this-week.html</guid>
  <pubDate>Tue, 23 May 2017 05:00:00 GMT</pubDate>
</item>
<item>
  <title>Use CSS to format markdown or HTML files</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2017-01-03-use-css-to-format-markdown-or-html-files.html</link>
  <description><![CDATA[ 




<p>Markdown (and Rmarkdown) are great ways to quickly develop material without worrying about the formatting. The documents can then be compiled using the <code>knitr</code> or <code>rmarkdown</code> packages to output formats such as HTML, latex, or even word. The main drawback of this approach is that formatting of documents is limited to italics, bold, or strikethrough. Markdown does have support for inline HTML, therefore you can add your own formatting inline using CSS or other HTML attributes, however this moves away from the quick markdown flavor.</p>
<p>To help solve this problem, many R packages are useful for formatting tables, either through conditional formatting or otherwise. The most interesting to me is the <a href="https://renkun.me/formattable/">formattable</a> package. Other options include the <a href="http://davidgohel.github.io/ReporteRs/">ReporteRs</a> and <a href="https://cran.r-project.org/web/packages/condformat/index.html">condformat</a> packages. These packages however focus on table formatting. An option I started working on a few years ago, <a href="https://github.com/lebebr01/highlightHTML">highlightHTML</a>, is a relatively simple package that will help inject CSS automatically into an HTML document to take care of formatting of text and tables.</p>
<p>Since this package uses CSS for the formatting, knowledge of CSS is required to create the tags to be injected. This has the advantage of allowing users a lot of flexibility with the look they wish to achieve, however, it will be more difficult for users if they do not know CSS. Below is a short demo of functions of interest.</p>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>The package was published on CRAN a few days ago and can be installed using <code>install.packages</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'highlightHTML'</span>)</span></code></pre></div></div>
</div>
<p>To get the most out of the package, <code>rmarkdown</code> and <code>knitr</code> are useful to have installed as well, although not required.</p>
</section>
<section id="simple-example" class="level2">
<h2 class="anchored" data-anchor-id="simple-example">Simple Example</h2>
<p>Suppose you have a table like the following:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Color Name</th>
<th>Number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Blue</td>
<td>5</td>
</tr>
<tr class="even">
<td>Green</td>
<td>35</td>
</tr>
<tr class="odd">
<td>Orange</td>
<td>100</td>
</tr>
<tr class="even">
<td>Red</td>
<td>200</td>
</tr>
</tbody>
</table>
<p>You could then add some conditional formatting by adding the following tags to the table.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Color Name</th>
<th>Number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Blue</td>
<td>5 #bgblue</td>
</tr>
<tr class="even">
<td>Green</td>
<td>35</td>
</tr>
<tr class="odd">
<td>Orange</td>
<td>100</td>
</tr>
<tr class="even">
<td>Red</td>
<td>200 #bgred</td>
</tr>
</tbody>
</table>
<p>The addition of the <em>#bgblue</em> and <em>#bgred</em> indicates which cells will be changed. After turning the markdown document into an html file, this package can now be used to post-process the html file. The post-processing will add an id value for each cell with the <em>#bgblue</em> or <em>#bgred</em> and remove those from the table.</p>
<p>The function to use for the post-processing is <code>highlight_html</code> and requires three arguments, the input file, the output file, and the CSS tags themselves. This will look something like the following using an example file from the package:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(highlightHTML)</span>
<span id="cb2-2">file <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system.file</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'examples'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bgtable.html'</span>, </span>
<span id="cb2-3">                    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">package =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'highlightHTML'</span>)</span>
<span id="cb2-4">tags <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bgred {background-color: #FF0000;}"</span>, </span>
<span id="cb2-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bgblue {background-color: #0000FF;}"</span>)</span>
<span id="cb2-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">highlight_html</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">input =</span> file, </span>
<span id="cb2-7">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">output =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tempfile</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fileext =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".html"</span>), </span>
<span id="cb2-8">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tags =</span> tags,</span>
<span id="cb2-9">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">update_css =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, </span>
<span id="cb2-10">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">browse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb2-11">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">print =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div></div>
</div>
<p>This command will return an HTML file that automatically injects the CSS tags shown above. The new HTML file will add background color to the HTML file as such:</p>
<p><img src="https://brandonlebeau.org/post/2017-01-03-highlighthtml_files/highlight_table.png" class="img-fluid"></p>
</section>
<section id="formatting-text" class="level2">
<h2 class="anchored" data-anchor-id="formatting-text">Formatting Text</h2>
<p>The package also allows for the formatting of text with CSS as well. The following is markdown text that will be formatted:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1">Can highlight {#bgblack multiple words}.</span></code></pre></div></div>
<p>The key is the use of braces following by the CSS id to add to the HTML file. Example usage can be shown with an example file that comes with the package and generated with the following code:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">file <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system.file</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'examples'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bgtext.html'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">package =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'highlightHTML'</span>)</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Change background color and text color with CSS</span></span>
<span id="cb4-4">tags <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bgblack {background-color: black; color: white;}"</span>, </span>
<span id="cb4-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bgblue {background-color: #0000FF; color: white;}"</span>,</span>
<span id="cb4-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#colgreen {color: green;}"</span>)</span>
<span id="cb4-7"></span>
<span id="cb4-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Post-process HTML file</span></span>
<span id="cb4-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">highlight_html</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">input =</span> file, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">output =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tempfile</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fileext =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".html"</span>),</span>
<span id="cb4-10">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tags =</span> tags, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">update_css =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">browse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div></div>
</div>
<p>The HTML file would look as follows:</p>
<p><img src="https://brandonlebeau.org/post/2017-01-03-highlighthtml_files/highlight_text.png" class="img-fluid"></p>
</section>
<section id="markdown-to-html-directly" class="level2">
<h2 class="anchored" data-anchor-id="markdown-to-html-directly">Markdown to HTML Directly</h2>
<p>Finally, with help of the <code>rmarkdown</code> package, files can be rendered directly from markdown to an HTML file. Below is an example of this:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">file <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system.file</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'examples'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'mwe.md'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">package =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'highlightHTML'</span>)</span>
<span id="cb5-2">tags <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bgred {background-color: #FF0000; color: white;}"</span>,</span>
<span id="cb5-3">   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bgblue {background-color: #0000FF; color: white;}"</span>,</span>
<span id="cb5-4">   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bgblack {background-color: #000000; color: white;}"</span>,</span>
<span id="cb5-5">   <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#colgold {color: #FFD700;}"</span>)</span>
<span id="cb5-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">highlight_html</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">input =</span> file, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">output =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tempfile</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fileext =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.html'</span>),</span>
<span id="cb5-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tags =</span> tags, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">update_css =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">browse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">render =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div></div>
</div>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>The package has a few additional features including the ability to inject tags directly into R tables, see for an example of this. To come are a few basic CSS tags that will be built into the package using specific CSS ids. Bug reports are appreciated and can be logged on GitHub <a href="https://github.com/lebebr01/highlightHTML/issues" class="uri">https://github.com/lebebr01/highlightHTML/issues</a>.</p>
<p>Enjoy!</p>


</section>

 ]]></description>
  <category>R</category>
  <category>Package</category>
  <category>Highlighthtml</category>
  <category>Markdown</category>
  <category>Html</category>
  <guid>https://brandonlebeau.org/posts/2017-01-03-use-css-to-format-markdown-or-html-files.html</guid>
  <pubDate>Tue, 03 Jan 2017 06:00:00 GMT</pubDate>
</item>
<item>
  <title>Introduction of the pdfsearch package</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2016-12-02-introduction-of-the-pdfsearch-package.html</link>
  <description><![CDATA[ 




<p>I’m happy to introduce an add-on package, <code>pdfsearch</code>, that adds the ability to do keyword searches on pdf files. This add-on package uses the excellent <code>pdftools</code> package from the <a href="https://ropensci.org/">ropensci</a> project to read in pdf files and perform keyword searches based character strings of interest.</p>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>The package is currently only hosted on <a href="https://github.com/lebebr01/pdfsearch">github</a> and can be installed with the devtools library.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">devtools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lebebr01/pdfsearch'</span>)</span></code></pre></div></div>
</div>
</section>
<section id="basic-example" class="level2">
<h2 class="anchored" data-anchor-id="basic-example">Basic Example</h2>
<p>Doing a simple keyword search on a single pdf file uses the <code>keyword_search</code> function. The following is a simple example using a pdf from <a href="https://arxiv.org/">arXiv</a>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(pdfsearch)</span>
<span id="cb2-2"></span>
<span id="cb2-3">file <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system.file</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pdf'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1501.00450.pdf'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">package =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pdfsearch'</span>)</span>
<span id="cb2-4"></span>
<span id="cb2-5">key_res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword_search</span>(file, </span>
<span id="cb2-6">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keyword =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'repeated measures'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'mixed effects'</span>),</span>
<span id="cb2-7">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">path =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div></div>
</div>
<p>In the following example, the function <code>keyword_search</code> takes two required arguments, the path to the pdf file and the keyword(s) to search for in the pdf. The optional argument shown above, <code>path</code> tells the function to read in the raw pdf using the <code>pdftools</code> package.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(key_res)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>            keyword page_num line_num
1 repeated measures        1        9
2 repeated measures        2       31
3 repeated measures        2       58
4 repeated measures        2       60
5 repeated measures        3       70
6 repeated measures        6      169
7 repeated measures        6      180
8 repeated measures        6      185
9 repeated measures        9      315
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                line_text
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Not introduce more sophisticated experimental designs, specifi-           only would we miss potentially beneficial effects, we may also cally the repeated measures design, including the crossover           get false confidence about lack of negative effects. 
2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             We also discuss practical considfast iterations and testing many ideas can reap the most           erations to repeated measures design, with variants to the rewards.                                                           crossover design to study the carry over effect, including the “re-randomized” design (row 5 in table 1). 
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        To facilitate our illustration, in all the derivation repeated measures design in different stages of treatment          in this section we assume all users appear in all periods, assignment. 
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             We also restrict ourselves ing the repeated measures analysis, reporting a “per week”         to metrics that are defined as simple average and assume treatment effect, as show in row 3 “parallel” design in ta-        treatment and control have the same sample size. 
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   This way, various In fact, the crossover design is a type of repeated measures       designs considered can be examined in the same framework design commonly used in biomedical research to control for         and easily compared.
6                                                                                                                                                                                                                     FLEXIBLE AND SCALABLE REPEATED One way to see measurements are not missing at random is                MEASURES ANALYSIS VIA FORME to realize infrequent users are more likely to have missing         5.1 Review of Existing Methods values and the absence in a specific time window can still          It is common to analyze data from repeated measures design provide information on the user behavior and in reality there       with the repeated measures ANOVA model and the F-test, might be other factors causing user to be missing that are          under certain assumptions, such as normality, sphericity (honot even observed. 
7 \022P            P            \023          In our cases they are indicators of treatment assignment, k Xik Pk0 Xi k 0 0 Cov(Xi , Xi ) = Cov 0          P        ,                         periods of the measurement, user id, and any other covariate. k Iik     k 0 Ii k 0 0 \022           \023                         As an example, one possible model for repeated measures Xi Xi0                              using lme4’s formula syntax (Bates et al. 2012a;b) is = Cov       , Ii Ii0                                   Y ∼ 1 + IsT reatment + P eriod + (1|U serID), where the last equality is by dividing both numerator and de-       where the only difference of this model to the usual linnominator by the same total number of users who have ever           ear model behind two sample test is the extra random efappeared in the experiments. 
8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    In repeated measures data, users might appear in book treatment of the delta-method.                                 multiple periods, represented as multiple rows in the dataset. 
9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    PRACTICAL CONSIDERATIONS                                          ryover effect, the re-randomized design enables us to At the design stage, we face a few choices under the same               measure it directly and should be used here. framework of repeated measures design. 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 token_text
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                not, introduce, more, sophisticated, experimental, designs, specifi, only, would, we, miss, potentially, beneficial, effects, we, may, also, cally, the, repeated, measures, design, including, the, crossover, get, false, confidence, about, lack, of, negative, effects
2                                                                                                                                                                                                                                                                                                                                                                                                                                   we, also, discuss, practical, considfast, iterations, and, testing, many, ideas, can, reap, the, most, erations, to, repeated, measures, design, with, variants, to, the, rewards, crossover, design, to, study, the, carry, over, effect, including, the, re, randomized, design, row, 5, in, table, 1
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            to, facilitate, our, illustration, in, all, the, derivation, repeated, measures, design, in, different, stages, of, treatment, in, this, section, we, assume, all, users, appear, in, all, periods, assignment
4                                                                                                                                                                                                                                                                                                                                                                                                                                              we, also, restrict, ourselves, ing, the, repeated, measures, analysis, reporting, a, per, week, to, metrics, that, are, defined, as, simple, average, and, assume, treatment, effect, as, show, in, row, 3, parallel, design, in, ta, treatment, and, control, have, the, same, sample, size
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    this, way, various, in, fact, the, crossover, design, is, a, type, of, repeated, measures, designs, considered, can, be, examined, in, the, same, framework, design, commonly, used, in, biomedical, research, to, control, for, and, easily, compared
6                                             flexible, and, scalable, repeated, one, way, to, see, measurements, are, not, missing, at, random, is, measures, analysis, via, forme, to, realize, infrequent, users, are, more, likely, to, have, missing, 5.1, review, of, existing, methods, values, and, the, absence, in, a, specific, time, window, can, still, it, is, common, to, analyze, data, from, repeated, measures, design, provide, information, on, the, user, behavior, and, in, reality, there, with, the, repeated, measures, anova, model, and, the, f, test, might, be, other, factors, causing, user, to, be, missing, that, are, under, certain, assumptions, such, as, normality, sphericity, honot, even, observed
7 p, p, in, our, cases, they, are, indicators, of, treatment, assignment, k, xik, pk0, xi, k, 0, 0, cov, xi, xi, cov, 0, p, periods, of, the, measurement, user, id, and, any, other, covariate, k, iik, k, 0, ii, k, 0, 0, as, an, example, one, possible, model, for, repeated, measures, xi, xi0, using, lme4, s, formula, syntax, bates, et, al, 2012a, b, is, cov, ii, ii0, y, 1, ist, reatment, p, eriod, 1, u, serid, where, the, last, equality, is, by, dividing, both, numerator, and, de, where, the, only, difference, of, this, model, to, the, usual, linnominator, by, the, same, total, number, of, users, who, have, ever, ear, model, behind, two, sample, test, is, the, extra, random, efappeared, in, the, experiments
8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     in, repeated, measures, data, users, might, appear, in, book, treatment, of, the, delta, method, multiple, periods, represented, as, multiple, rows, in, the, dataset
9                                                                                                                                                                                                                                                                                                                                                                                                                                                                               practical, considerations, ryover, effect, the, re, randomized, design, enables, us, to, at, the, design, stage, we, face, a, few, choices, under, the, same, measure, it, directly, and, should, be, used, here, framework, of, repeated, measures, design</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(key_res<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>line_text, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "Not introduce more sophisticated experimental designs, specifi-           only would we miss potentially beneficial effects, we may also cally the repeated measures design, including the crossover           get false confidence about lack of negative effects. "

[[2]]
[1] "We also discuss practical considfast iterations and testing many ideas can reap the most           erations to repeated measures design, with variants to the rewards.                                                           crossover design to study the carry over effect, including the “re-randomized” design (row 5 in table 1). "</code></pre>
</div>
</div>
<p>The output includes the keyword, the page number it is located, the line number the keyword was found, and the line of text. By default, only the line matching the keyword is returned. If the context of the result is desired, there is an optional argument <code>surround_lines</code> that can include the lines around the line of the matching keyword.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">key_res <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword_search</span>(file, </span>
<span id="cb7-2">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keyword =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'repeated measures'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'mixed effects'</span>),</span>
<span id="cb7-3">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">path =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, </span>
<span id="cb7-4">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">surround_lines =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb7-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(key_res<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>line_text, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "This limits the number of candidate variations              is, we wish to be able to detect the effect when there is any. to be evaluated, and the speed new feature iterations. "                                                                                  
[2] "We             Running under powered experiments have many perils. "                                                                                                                                                                                                 
[3] "Not introduce more sophisticated experimental designs, specifi-           only would we miss potentially beneficial effects, we may also cally the repeated measures design, including the crossover           get false confidence about lack of negative effects. "
[4] "Statistical design and related variants, to increase KPI sensitivity with         power increases with larger effect size, and smaller variances. the same traffic size and duration of experiment. "                                                                
[5] "In this pa-         Let us look at these aspects in turn. per we present FORME (Flexible Online Repeated Measures Experiment), a flexible and scalable framework for these de-          While the actual effect size from a potential new feature may signs. "       

[[2]]
[1] "This poses"                                                                                                                                                                                                                                                                                                                                 
[2] "a limitation to any online experimentation platform, where         within-subject variation. "                                                                                                                                                                                                                                              
[3] "We also discuss practical considfast iterations and testing many ideas can reap the most           erations to repeated measures design, with variants to the rewards.                                                           crossover design to study the carry over effect, including the “re-randomized” design (row 5 in table 1). "
[4] "1.1    Motivation To improve sensitivity of measurement, apart from accurate         1.2     Main Contributions implementation and increase sample size and duration, we           In this paper, we propose a framework called FORME (Flexcan employ statistical methods to reduce variance. "                                             
[5] "Using           ible Online Repeated Measures Experiment). "                                                                                                                                                                                                                                                                                </code></pre>
</div>
</div>
</section>
<section id="directory-search" class="level2">
<h2 class="anchored" data-anchor-id="directory-search">Directory Search</h2>
<p>This package also has the ability to loop over a directory of pdf files in a single run. To do this, the <code>keyword_directory</code> function is of interest. Much of the arguments are the same, except a directory is specified instead of a single path to the location of the pdf files.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># find directory</span></span>
<span id="cb9-2">directory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system.file</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pdf'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">package =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pdfsearch'</span>)</span>
<span id="cb9-3"></span>
<span id="cb9-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># do search over two files</span></span>
<span id="cb9-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword_directory</span>(directory, </span>
<span id="cb9-6">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keyword =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'repeated measures'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'measurement error'</span>),</span>
<span id="cb9-7">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">surround_lines =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">full_names =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID       pdf_name           keyword page_num line_num
1   1 1501.00450.pdf repeated measures        1        9
2   1 1501.00450.pdf repeated measures        2       31
3   1 1501.00450.pdf repeated measures        2       58
4   1 1501.00450.pdf repeated measures        2       60
5   1 1501.00450.pdf repeated measures        3       70
6   1 1501.00450.pdf repeated measures        6      169
7   1 1501.00450.pdf repeated measures        6      180
8   1 1501.00450.pdf repeated measures        6      185
9   1 1501.00450.pdf repeated measures        9      315
10  2 1610.00147.pdf measurement error        1        2
11  2 1610.00147.pdf measurement error        1       10
12  2 1610.00147.pdf measurement error        1       12
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     line_text
1                                                                                                                                                                                                                                                                                                                                                                                                                                                              We             Running under powered experiments have many perils. , Not introduce more sophisticated experimental designs, specifi-           only would we miss potentially beneficial effects, we may also cally the repeated measures design, including the crossover           get false confidence about lack of negative effects. , Statistical design and related variants, to increase KPI sensitivity with         power increases with larger effect size, and smaller variances. the same traffic size and duration of experiment. 
2                                                                                                                                                                                                                                                                   a limitation to any online experimentation platform, where         within-subject variation. , We also discuss practical considfast iterations and testing many ideas can reap the most           erations to repeated measures design, with variants to the rewards.                                                           crossover design to study the carry over effect, including the “re-randomized” design (row 5 in table 1). , 1.1    Motivation To improve sensitivity of measurement, apart from accurate         1.2     Main Contributions implementation and increase sample size and duration, we           In this paper, we propose a framework called FORME (Flexcan employ statistical methods to reduce variance. 
3                                                                                                                                                                                                                                                                                                                                                                                                                                                        In the Table 1: Repeated Measures Designs                        following section we assume the minimum experimentation “period” to be one full week, and may extend to up to two In this paper we extend the idea further by employing the          weeks. , To facilitate our illustration, in all the derivation repeated measures design in different stages of treatment          in this section we assume all users appear in all periods, assignment. , The traditional A/B test can be analyzed us-           i.e. no missing measurement. 
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             The traditional A/B test can be analyzed us-           i.e. no missing measurement. , We also restrict ourselves ing the repeated measures analysis, reporting a “per week”         to metrics that are defined as simple average and assume treatment effect, as show in row 3 “parallel” design in ta-        treatment and control have the same sample size. , We furble 1. 
5                                                                                                                                                                                                                                                                                                This way              average treatment effect (ATE) δ = µT − µC which is a each user serves as his/her own control in the measurement.        fixed effects in the model in this section. , This way, various In fact, the crossover design is a type of repeated measures       designs considered can be examined in the same framework design commonly used in biomedical research to control for         and easily compared., We will proceed to show, with theoretical derivations, that        2.1    Two Sample T-test given the same total traffic                                       Let X denote the observed average metric value in control group and Y denote that in the treatment group. 
6             5.  , FLEXIBLE AND SCALABLE REPEATED One way to see measurements are not missing at random is                MEASURES ANALYSIS VIA FORME to realize infrequent users are more likely to have missing         5.1 Review of Existing Methods values and the absence in a specific time window can still          It is common to analyze data from repeated measures design provide information on the user behavior and in reality there       with the repeated measures ANOVA model and the F-test, might be other factors causing user to be missing that are          under certain assumptions, such as normality, sphericity (honot even observed. , Instead of throwing away data points             mogeneity of variances in differences between each pair of where user appeared in only one period and is exposed to            within-subject values), equal time points between subjects, only one of the two treatments, in practice, we included an         and no missing data. 
7  X and Z are covariates in the model. , \022P            P            \023          In our cases they are indicators of treatment assignment, k Xik Pk0 Xi k 0 0 Cov(Xi , Xi ) = Cov 0          P        ,                         periods of the measurement, user id, and any other covariate. k Iik     k 0 Ii k 0 0 \022           \023                         As an example, one possible model for repeated measures Xi Xi0                              using lme4’s formula syntax (Bates et al. 2012a;b) is = Cov       , Ii Ii0                                   Y ∼ 1 + IsT reatment + P eriod + (1|U serID), where the last equality is by dividing both numerator and de-       where the only difference of this model to the usual linnominator by the same total number of users who have ever           ear model behind two sample test is the extra random efappeared in the experiments. , Thanks to the central limit            fect(clustered by UserID) to model user “baseline”. 
8                                                                                                                                                                                                                                                                                                                                                                                                                                                                           (2013, Appendix B) for            Random effect makes modeling within-subject variability a similar example; also see (Van der Vaart 2000) for a text         possible. , In repeated measures data, users might appear in book treatment of the delta-method.                                 multiple periods, represented as multiple rows in the dataset. , As a result, rows of the dataset are not independent but 4.2    Metrics Beyond Average                                       with dependencies clustered by user. 
9                                                                                                                                                                                                                                                                                                                                                                                                                                           • Re-randomized: If we suspect the presence of car7. , PRACTICAL CONSIDERATIONS                                          ryover effect, the re-randomized design enables us to At the design stage, we face a few choices under the same               measure it directly and should be used here. framework of repeated measures design. , Experimenters should           • Wash-out and decide: If we have little informause domain knowledge and past experiments to inform the                 tion to judge carry over effect, we can run the first design. 
10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Data Fusion for Correcting Measurement Errors Tracy Schifeling, Jerome P. , Reiter, Maria DeYoreo∗ arXiv:1610.00147v1 [stat.ME] 1 Oct 2016 Abstract Often in surveys, key items are subject to measurement errors. , Given just the data, it can be difficult to determine the distribution of this error process, and hence to obtain accurate inferences that involve the error-prone variables. 
11                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     In doing so, we account for the informative sampling design used to select the National Survey of College Graduates. , We also present a process for assessing the sensitivity of various analyses to different choices for the measurement error models. , Supplemental material is available online. 
12                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Supplemental material is available online. , KEY WORDS: fusion, imputation, measurement error, missing, survey. , ∗ This research was supported by The National Science Foundation under award SES-11-31897. 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          token_text
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        we, running, under, powered, experiments, have, many, perils, not, introduce, more, sophisticated, experimental, designs, specifi, only, would, we, miss, potentially, beneficial, effects, we, may, also, cally, the, repeated, measures, design, including, the, crossover, get, false, confidence, about, lack, of, negative, effects, statistical, design, and, related, variants, to, increase, kpi, sensitivity, with, power, increases, with, larger, effect, size, and, smaller, variances, the, same, traffic, size, and, duration, of, experiment
2                                                                                                                                                                                                                                                                                                                                         a, limitation, to, any, online, experimentation, platform, where, within, subject, variation, we, also, discuss, practical, considfast, iterations, and, testing, many, ideas, can, reap, the, most, erations, to, repeated, measures, design, with, variants, to, the, rewards, crossover, design, to, study, the, carry, over, effect, including, the, re, randomized, design, row, 5, in, table, 1, 1.1, motivation, to, improve, sensitivity, of, measurement, apart, from, accurate, 1.2, main, contributions, implementation, and, increase, sample, size, and, duration, we, in, this, paper, we, propose, a, framework, called, forme, flexcan, employ, statistical, methods, to, reduce, variance
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  in, the, table, 1, repeated, measures, designs, following, section, we, assume, the, minimum, experimentation, period, to, be, one, full, week, and, may, extend, to, up, to, two, in, this, paper, we, extend, the, idea, further, by, employing, the, weeks, to, facilitate, our, illustration, in, all, the, derivation, repeated, measures, design, in, different, stages, of, treatment, in, this, section, we, assume, all, users, appear, in, all, periods, assignment, the, traditional, a, b, test, can, be, analyzed, us, i.e, no, missing, measurement
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    the, traditional, a, b, test, can, be, analyzed, us, i.e, no, missing, measurement, we, also, restrict, ourselves, ing, the, repeated, measures, analysis, reporting, a, per, week, to, metrics, that, are, defined, as, simple, average, and, assume, treatment, effect, as, show, in, row, 3, parallel, design, in, ta, treatment, and, control, have, the, same, sample, size, we, furble, 1
5                                                                                                                                                                                                                                                                                                                                   this, way, average, treatment, effect, ate, δ, µt, µc, which, is, a, each, user, serves, as, his, her, own, control, in, the, measurement, fixed, effects, in, the, model, in, this, section, this, way, various, in, fact, the, crossover, design, is, a, type, of, repeated, measures, designs, considered, can, be, examined, in, the, same, framework, design, commonly, used, in, biomedical, research, to, control, for, and, easily, compared, we, will, proceed, to, show, with, theoretical, derivations, that, 2.1, two, sample, t, test, given, the, same, total, traffic, let, x, denote, the, observed, average, metric, value, in, control, group, and, y, denote, that, in, the, treatment, group
6  5, flexible, and, scalable, repeated, one, way, to, see, measurements, are, not, missing, at, random, is, measures, analysis, via, forme, to, realize, infrequent, users, are, more, likely, to, have, missing, 5.1, review, of, existing, methods, values, and, the, absence, in, a, specific, time, window, can, still, it, is, common, to, analyze, data, from, repeated, measures, design, provide, information, on, the, user, behavior, and, in, reality, there, with, the, repeated, measures, anova, model, and, the, f, test, might, be, other, factors, causing, user, to, be, missing, that, are, under, certain, assumptions, such, as, normality, sphericity, honot, even, observed, instead, of, throwing, away, data, points, mogeneity, of, variances, in, differences, between, each, pair, of, where, user, appeared, in, only, one, period, and, is, exposed, to, within, subject, values, equal, time, points, between, subjects, only, one, of, the, two, treatments, in, practice, we, included, an, and, no, missing, data
7                                                                                                                                                                     x, and, z, are, covariates, in, the, model, p, p, in, our, cases, they, are, indicators, of, treatment, assignment, k, xik, pk0, xi, k, 0, 0, cov, xi, xi, cov, 0, p, periods, of, the, measurement, user, id, and, any, other, covariate, k, iik, k, 0, ii, k, 0, 0, as, an, example, one, possible, model, for, repeated, measures, xi, xi0, using, lme4, s, formula, syntax, bates, et, al, 2012a, b, is, cov, ii, ii0, y, 1, ist, reatment, p, eriod, 1, u, serid, where, the, last, equality, is, by, dividing, both, numerator, and, de, where, the, only, difference, of, this, model, to, the, usual, linnominator, by, the, same, total, number, of, users, who, have, ever, ear, model, behind, two, sample, test, is, the, extra, random, efappeared, in, the, experiments, thanks, to, the, central, limit, fect, clustered, by, userid, to, model, user, baseline
8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             2013, appendix, b, for, random, effect, makes, modeling, within, subject, variability, a, similar, example, also, see, van, der, vaart, 2000, for, a, text, possible, in, repeated, measures, data, users, might, appear, in, book, treatment, of, the, delta, method, multiple, periods, represented, as, multiple, rows, in, the, dataset, as, a, result, rows, of, the, dataset, are, not, independent, but, 4.2, metrics, beyond, average, with, dependencies, clustered, by, user
9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         re, randomized, if, we, suspect, the, presence, of, car7, practical, considerations, ryover, effect, the, re, randomized, design, enables, us, to, at, the, design, stage, we, face, a, few, choices, under, the, same, measure, it, directly, and, should, be, used, here, framework, of, repeated, measures, design, experimenters, should, wash, out, and, decide, if, we, have, little, informause, domain, knowledge, and, past, experiments, to, inform, the, tion, to, judge, carry, over, effect, we, can, run, the, first, design
10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      data, fusion, for, correcting, measurement, errors, tracy, schifeling, jerome, p, reiter, maria, deyoreo, arxiv, 1610.00147v1, stat.me, 1, oct, 2016, abstract, often, in, surveys, key, items, are, subject, to, measurement, errors, given, just, the, data, it, can, be, difficult, to, determine, the, distribution, of, this, error, process, and, hence, to, obtain, accurate, inferences, that, involve, the, error, prone, variables
11                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         in, doing, so, we, account, for, the, informative, sampling, design, used, to, select, the, national, survey, of, college, graduates, we, also, present, a, process, for, assessing, the, sensitivity, of, various, analyses, to, different, choices, for, the, measurement, error, models, supplemental, material, is, available, online
12                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          supplemental, material, is, available, online, key, words, fusion, imputation, measurement, error, missing, survey, this, research, was, supported, by, the, national, science, foundation, under, award, ses, 11, 31897</code></pre>
</div>
</div>
<p>Two relavent arguments for the <code>keyword_directory</code> function are <code>full_names</code> and <code>recursive</code>. These functions ask whether the full path for the pdf files in the directory will be used and whether subfolders within the directory will also be searched.</p>
</section>
<section id="uses-for-pdfsearch" class="level2">
<h2 class="anchored" data-anchor-id="uses-for-pdfsearch">Uses for pdfsearch</h2>
<p>This package may be extremely useful when conducting research syntheses or meta analyses, particularly when screening articles for inclusion into the research synthesis or meta analysis. This aim is hopeful to be explored later in more depth.</p>
<section id="limitations" class="level3">
<h3 class="anchored" data-anchor-id="limitations">Limitations</h3>
<p>The limitations of the package and the quality of text matches will depend on the pdfs being searched. For example, words that wrap across lines (i.e.&nbsp;hyphenated words) will not be included in the matches as entire words are currently being searched to be matched.</p>
</section>
</section>
<section id="moving-forward" class="level2">
<h2 class="anchored" data-anchor-id="moving-forward">Moving Forward</h2>
<p>The package will be submitted to CRAN next week, however, any bugs or problems can be submitted to the github site <a href="https://github.com/lebebr01/pdfsearch/issues" class="uri">https://github.com/lebebr01/pdfsearch/issues</a>.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>Pdfsearch</category>
  <category>Package</category>
  <guid>https://brandonlebeau.org/posts/2016-12-02-introduction-of-the-pdfsearch-package.html</guid>
  <pubDate>Fri, 02 Dec 2016 06:00:00 GMT</pubDate>
</item>
<item>
  <title>Speed test of sequence generation for unbalanced simulation</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2015-05-31-speed-test-of-sequence-generation-for-unbalance....html</link>
  <description><![CDATA[ 




<p>I have a simulation package that allows for the simulation of regression models including nested data structures. You can see the package on github here: <a href="https://github.com/lebebr01/simReg">simReg</a>. Over the weekend I updated the package to allow for the simulation of unbalanced designs. I’m hoping to put together a new vigenette soon highlighting the functionality.</p>
<p>I am working on a simulation that uses the unbalanced functionality and while simulating longitudinal data I’ve found the function is much slower than the cross sectional counterparts (and balanced designs). I’ve ran some additional testing and I believe I have the speed issues narrowed down to the fact that I am generating a time variable. Essentially, I have a vector of number of observations per cluster. The function then turns this vector of lengths into a time variable starting at 0 up to the maximum number of observations minus 1 by 1. As an example:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(x), <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(xx) (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>x[xx]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 1 2 3 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 0 1 2 3 4 5 6 7 8 0 1 2 3 4 5 6</code></pre>
</div>
</div>
<p>From the code above, you can see that there the number of observations is generated using <code>runif</code> which is saved to the object <code>x</code>. Then I use a combination of lapply, unlist, and the ‘:’ operator to generate the sequence. This is the same code used in my package above to generate the time variable.</p>
<p>As such, I was interested in testing various ways to generate the sequence and do a performance comparison. I compared the following ways, the <code>':'</code> operator, <code>seq.int</code>, <code>seq</code>, <code>do.call</code> with <code>mapply</code>, and <code>rep.int</code> for the balanced case as a comparison to how it was done before. This was all done with the great <code>microbenchmark</code> package.</p>
<p>Here are the results from the 7 comparisons:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(microbenchmark)</span>
<span id="cb3-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">microbenchmark</span>(</span>
<span id="cb3-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colon =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(x), <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(xx) (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>x[xx]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)),</span>
<span id="cb3-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seq.int =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(x), <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(xx) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq.int</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x[xx] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))),</span>
<span id="cb3-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seq =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(x), <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(xx) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x[xx] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))),</span>
<span id="cb3-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seq.int_mapply =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">do.call</span>(c, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mapply</span>(seq.int, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)),</span>
<span id="cb3-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seq_mapply =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">do.call</span>(c, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mapply</span>(seq, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)),</span>
<span id="cb3-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colon_mapply =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">do.call</span>(c, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mapply</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">':'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)),</span>
<span id="cb3-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rep.int =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep.int</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">times =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>), <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># balanced case for reference.</span></span>
<span id="cb3-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">times =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>L</span>
<span id="cb3-12">)</span></code></pre></div></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in microbenchmark(colon = unlist(lapply(1:length(x), function(xx) (1:x[xx]) - : less
accurate nanosecond times to avoid potential integer overflows</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Unit: nanoseconds
           expr    min       lq       mean   median       uq     max neval
          colon  34768  35793.0  38108.680  36285.0  36941.0  918851  1000
        seq.int  44813  46207.0  50598.592  46986.0  47867.5  826888  1000
            seq 557190 568895.5 593151.428 575927.0 584475.5 1492031  1000
 seq.int_mapply  42271  43952.0  47280.872  44854.0  46002.0  834186  1000
     seq_mapply 196226 200592.5 221808.032 203544.5 207009.0 3461835  1000
   colon_mapply  36859  38335.0  41831.480  39196.0  40098.0  957350  1000
        rep.int    984   1107.0   1247.056   1189.0   1271.0   10209  1000</code></pre>
</div>
</div>
<p>The results (in microseconds) show that this is where the significant slowdown is coming in my package implementing the unbalanced cases, although it appears that the ‘:’ operator is the second best alternative. For those that have not seen the significant speed bump of the <code>seq.int</code> and <code>rep.int</code> over the <code>seq</code> and <code>rep</code> alternatives should also pay close attention (compare lines 2 and 3 above).</p>
<p>I’d be interested in alternative procedures that I am not aware of as well. Although not a big deal when running the package once, doing it 50,000 times does add up.</p>
<p>Lastly, for those that are interested, we can show they are all equivalent methods (except for the <code>rep.int</code> case).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">identical</span>(</span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(x), <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(xx) (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>x[xx]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)),</span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(x), <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(xx) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq.int</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x[xx] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))),</span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(x), <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(xx) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x[xx] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))),</span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">do.call</span>(c, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mapply</span>(seq.int, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)),</span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">do.call</span>(c, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mapply</span>(seq, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)),</span>
<span id="cb6-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">do.call</span>(c, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mapply</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">':'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb6-8">)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>



 ]]></description>
  <category>R</category>
  <category>Sequence</category>
  <category>Speedtest</category>
  <guid>https://brandonlebeau.org/posts/2015-05-31-speed-test-of-sequence-generation-for-unbalance....html</guid>
  <pubDate>Sun, 31 May 2015 05:00:00 GMT</pubDate>
</item>
<item>
  <title>Remove leading 0 with ggplot2</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2015-03-23-remove-leading-0-with-ggplot2.html</link>
  <description><![CDATA[ 




<p>I recently had an occasion while working on a three variable interaction plot for a paper where I wanted to remove the leading 0’s in the x-axis text labels using <code>ggplot2</code>. This was primarily due to some space concerns I had for the x-axis labels. Unfortunately, I did not find an obvious way to do this in my first go around. After tickering a bit, I’ve found a workaround. The process is walked through below.</p>
<p>First, some simulated data.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Sim some data</span></span>
<span id="cb1-2">simdata <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2400</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">032</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">210</span>),</span>
<span id="cb1-3">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), </span>
<span id="cb1-4">                            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>)),</span>
<span id="cb1-5">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1600</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>),</span>
<span id="cb1-6">                                <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span>), </span>
<span id="cb1-7">                                <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span>)),</span>
<span id="cb1-8">                      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">facet =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span>))</span></code></pre></div></div>
</div>
<p>As shown below, initially there is no group differences, but there are facet differences. Exploring the interaction between the grouping variables shows there is a two variable interaction. Note: This example is not identical to the three variable interaction I originally described above, but assume here that the x variable is also important.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(simdata, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tapply</span>(y, group, mean))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>          1           2 
0.001475125 0.342294443 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(simdata, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tapply</span>(y, facet, mean))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>            1             2             3 
-0.0004435282  0.0016667522  0.4948340175 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(simdata, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tapply</span>(y, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">interaction</span>(group, facet), mean))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>          1.1           2.1           1.2           2.2           1.3 
 0.0057579127 -0.0072293980  0.0027065206  0.0004704595 -0.0043179816 
          2.3 
 0.9939860166 </code></pre>
</div>
</div>
<p>In the example in the paper, I aggregated the unique x values to the third decimal place. That is done with the following <code>dplyr</code> code. Note: The data did not need to be aggregated, but it is a bit easier to work with when plotting later.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># round value to .001 and aggregate</span></span>
<span id="cb8-2">simdata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_rd <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(simdata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># aggregate</span></span>
<span id="cb8-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span></code></pre></div></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">simdata_agg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> simdata <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(x_rd, group, facet) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(y))</span></code></pre></div></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'x_rd', 'group'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">simdata_agg </span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 950 × 4
# Groups:   x_rd, group [358]
    x_rd group facet        y
   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;
 1 0.032     1     1 -0.156  
 2 0.032     1     2  0.0546 
 3 0.032     2     1 -0.0216 
 4 0.032     2     2 -0.0949 
 5 0.033     1     1 -0.0937 
 6 0.033     1     3 -0.0118 
 7 0.033     2     1  0.0271 
 8 0.033     2     2 -0.0677 
 9 0.033     2     3  1.16   
10 0.034     1     1 -0.00662
# ℹ 940 more rows</code></pre>
</div>
</div>
<p>Now that the data is aggregated, it can be directly plotted with <code>ggplot2</code>. This is the base plot that contains the leading 0’s by default and treats the x variable as continuous (which it really is continuous).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb16-2">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(simdata_agg, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x_rd, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(group))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb16-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span>
<span id="cb16-4">p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_grid</span>(. <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> facet) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb16-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>), </span>
<span id="cb16-6">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">05</span>))</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://brandonlebeau.org/posts/2015-03-23-remove-leading-0-with-ggplot2_files/figure-html/plotwith0-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The plot above is a good start, but I was worried about the x-axis labels being too close together and ultimately being difficult to read. I decided I wanted to omit the leading 0’s to omit some space. This was useful in my scenario as the variable on the x-axis could only take on values between 0 and 1, therefore the leading 0 is not important.</p>
<p>One way to remove the leading 0 is to convert the continuous variable into a character variable and use a simple regular expression (with <code>gsub</code>) to remove the 0 at the beginning of the character string. Below is the code to do that and also the resulting plot. The key point of the plotting code below is the use of the <code>breaks</code> argument to <code>scale_x_discrete</code>. Without this all the unique character values will be plotted, not good.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_rd)</span>
<span id="cb17-2">simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"^0"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char)</span>
<span id="cb17-3">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(simdata_agg, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x_char, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(group))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb17-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span>
<span id="cb17-5">p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_grid</span>(. <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> facet) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb17-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_discrete</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.00'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.05'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.1'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.15'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.2'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.25'</span>))</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://brandonlebeau.org/posts/2015-03-23-remove-leading-0-with-ggplot2_files/figure-html/plotno0-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The plot above has a few flaws. First, there are values at the edge of each facet. This could be fixed with the <code>expand</code> argument to <code>scale_x_discrete</code>, but I still wanted to include the value of .00 on the x-axis. Secondly, the x-axis text labels are not uniformly formatted which is not ideal (e.g.&nbsp;.1 should be .10).</p>
<p>To fix this, some made up data needs to be added to the data frame. Some care needs to be done here as well as a value of .00 can not just be added to the x variable plotted. This would place a non-uniform gap between .00 and .05 (not shown, but try it for yourself by adapting the code below). Therefore, all values between 0 and .031 need to be manually added to the data frame to keep the spacing uniform. Finally, to not plot the made up values, I created a transparency variable called alpha. This variable was used to set the alpha values to 0 for the made up values and 1 for the real values. <code>scale_alpha_discrete</code> was used to specify the range of alpha values, this is important otherwise the made up numbers will show up as a light gray. The final code to manually add the new data is shown below. Anyone have a less workaround procedure?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Reset aggregation vector</span></span>
<span id="cb18-2">simdata_agg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> simdata <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(x_rd, group, facet) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(y))</span></code></pre></div></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'x_rd', 'group'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create x_char variable again</span></span>
<span id="cb20-2">simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_rd)</span>
<span id="cb20-3">simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"^0"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char)</span>
<span id="cb20-4"></span>
<span id="cb20-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Needed formatting</span></span>
<span id="cb20-6">simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.00'</span>,</span>
<span id="cb20-7">                             simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char)</span>
<span id="cb20-8">simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.2'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.20'</span>,</span>
<span id="cb20-9">                             simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char)</span>
<span id="cb20-10">simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.1'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.10'</span>,</span>
<span id="cb20-11">                             simdata_agg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x_char)</span>
<span id="cb20-12"></span>
<span id="cb20-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Final plot</span></span>
<span id="cb20-14">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(simdata_agg, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x_char, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(group))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb20-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span>
<span id="cb20-16">p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb20-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_grid</span>(. <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> facet) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb20-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_discrete</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.00'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.05'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.10'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.15'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.20'</span>),</span>
<span id="cb20-19">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expand =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">05</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">05</span>))</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://brandonlebeau.org/posts/2015-03-23-remove-leading-0-with-ggplot2_files/figure-html/addmadeupvalues-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>



 ]]></description>
  <category>R</category>
  <category>Graphics</category>
  <category>Ggplot2</category>
  <guid>https://brandonlebeau.org/posts/2015-03-23-remove-leading-0-with-ggplot2.html</guid>
  <pubDate>Mon, 23 Mar 2015 05:00:00 GMT</pubDate>
</item>
<item>
  <title>Dodged bar charts, why not a line graph?</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2014-08-05-dodged-bar-charts-why-not-a-line-graph.html</link>
  <description><![CDATA[ 




<p>I often see graphs that are poorly implemented in that they do not achieve their goal. One such type of graph that I see are dodged bar charts. Here is an example of a dodged bar chart summarizing the number of all star players by team (focusing specifically on the AL central division) and year from the <code>Lahman</code> r package:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(Lahman)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(RColorBrewer)</span>
<span id="cb1-5"></span>
<span id="cb1-6">AllstarFull<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>selected <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-7"></span>
<span id="cb1-8">numAS <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> AllstarFull  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(yearID <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2006</span>, lgID <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'AL'</span>, teamID <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MIN'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'CLE'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'DET'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'CHA'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KCA'</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(teamID, yearID) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">number =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(selected))</span>
<span id="cb1-12"></span>
<span id="cb1-13">b <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(numAS, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> teamID, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> number, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(yearID))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span>
<span id="cb1-14">b <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stat =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodge"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb1-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_brewer</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Year"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dark2"</span>) </span></code></pre></div></div>
<p><img src="https://brandonlebeau.org/posts/2014-08-05-dodged-bar-charts-why-not-a-line-graph_files/figure-html/bar-1.png" class="img-fluid" width="672"></p>
<p>Note: If you are curious from the above graph, there appears to be two typos in the teamIDs, where CHA should be CHW (Chicago White Sox) and KCA should be KCR (Kansas City Royals).</p>
<p>The plot above can be good for a few things, predominantly for comparison within a team. It is more difficult to compare between teams (although not impossible). One way to possibly improve the plot would be to add the number either above each bar or inside of each bar. This can be done in <code>ggplot2</code> with the <code>geom_text</code> function. For example:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">b <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(numAS, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> teamID, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> number, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(yearID))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span>
<span id="cb2-2">b <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stat =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodge"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_brewer</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Year"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dark2"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> number), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">position_dodge</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>), </span>
<span id="cb2-5">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>)</span></code></pre></div></div>
<pre><code>Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Dark2 is 8
Returning the palette you asked for with that many colors</code></pre>
<p><img src="https://brandonlebeau.org/posts/2014-08-05-dodged-bar-charts-why-not-a-line-graph_files/figure-html/bartext-1.png" class="img-fluid" width="672"></p>
<p>A better alternative to a dodged bar chart in my opinion would be a simple line graph. The line graph simplifies the graph to only include one variable on the x-axis and uses colors or shapes to differentiate the teams. See below.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">l <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(numAS, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> yearID, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> number, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> teamID, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> teamID))</span>
<span id="cb4-2">l <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expand =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_brewer</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Team"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dark2"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_shape_discrete</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Team"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xlab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Year"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div></div>
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
<p><img src="https://brandonlebeau.org/posts/2014-08-05-dodged-bar-charts-why-not-a-line-graph_files/figure-html/line-1.png" class="img-fluid" width="672"></p>
<p>This presentation makes it much easier to compare teams within a single year and also see how the teams have changed over time. In my opinion this is a much simpler graphic and usually is a better option to serve the purpose for the graphic. As always though, the best graphic is one that conveys the message in the simplest, easiest to understand form. As always, you could improve this by making it interactive with <code>rCharts</code>. You could see my post on <code>rCharts</code> <a href="educate-r.org/2014/02/15/rcharts/">here</a> and <a href="educate-r.org/2014/03/03/rChartsslidy/">here</a>.</p>



 ]]></description>
  <category>R</category>
  <category>Graphics</category>
  <category>Ggplot2</category>
  <category>Trend</category>
  <guid>https://brandonlebeau.org/posts/2014-08-05-dodged-bar-charts-why-not-a-line-graph.html</guid>
  <pubDate>Tue, 05 Aug 2014 05:00:00 GMT</pubDate>
</item>
<item>
  <title>Format Markdown Documents in R</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2014-07-30-format-markdown-documents-in-r.html</link>
  <description><![CDATA[ 




<p>Have you ever used a markdown file to create an html file? Have you ever wanted to quickly format the subsequent html file to add some color or other aspects? If your answer is yes to both of those questions, this package may be of interest to you.</p>
<p>The <strong><a href="https://github.com/lebebr01/highlightHTML">highlightHTML</a></strong> package aims to develop a flexible approach to add formatting to an html document by injecting CSS into the file. To do this, tags are created within the markdown document telling the R routine where to look for these tags. If you are familiar with the Twitterverse, this package will be equally comfortable. The tags take the form of the hashtags on Twitter. As an example, #bgblue, would be a command to change the background to blue.</p>
<p>The next thing needed by the package is to tell how much of the word, sentence, or header that should be affected by the tag. To do this, add braces before the tag and include all the content you want to be affected by the tag. For example, {#bggold this example will have a blue background}.</p>
<p>Once any tags you want to include are in the markdown document, then the document can be converted into a html file using programs such as <em>knitr</em>, <em>pandoc</em>, the RStudio “knit HTML” button (or any others). Once the resulting html file is compiled, then run the html file through the <strong>highlightHTML</strong> package and the html file is searched for the tags, the tags are changed to CSS ids, and by default the CSS tags will be inserted automatically back into the document.</p>
<section id="minimal-example" class="level3">
<h3 class="anchored" data-anchor-id="minimal-example">Minimal Example</h3>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td>A</td>
<td>ma</td>
<td>rk</td>
<td>do</td>
<td>wn</td>
<td style="text-align: right;">d</td>
<td>oc</td>
<td>um</td>
<td>en</td>
<td>t that looks like the following:</td>
</tr>
<tr class="even">
<td>`` #</td>
<td>`m Te</td>
<td>ar st</td>
<td>kd o</td>
<td>ow f</td>
<td style="text-align: right;">n {#</td>
<td>co</td>
<td>lg</td>
<td>ol</td>
<td>d highlightHTML} package</td>
</tr>
<tr class="odd">
<td>Ca</td>
<td>n</td>
<td>hi</td>
<td>gh</td>
<td>li</td>
<td style="text-align: right;">gh</td>
<td>t</td>
<td>{#</td>
<td>bg</td>
<td>black multiple words}.</td>
</tr>
<tr class="even">
<td>Ev</td>
<td>en</td>
<td>t</td>
<td>ab</td>
<td>le</td>
<td style="text-align: right;">s:</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>| |- | | | |</td>
<td>Co – Bl Gr Or Re</td>
<td>lo – ue ee an d</td>
<td>r –</td>
<td>Na –</td>
<td style="text-align: right;">me –</td>
<td>| -| | | | |</td>
<td>N – 5 3 1 2</td>
<td>um –</td>
<td>ber | ——–| #bgblue | | | #bgred |</td>
</tr>
<tr class="even">
<td>``</td>
<td>`</td>
<td></td>
<td></td>
<td></td>
<td style="text-align: right;"></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Yo</td>
<td>u</td>
<td>wo</td>
<td>ul</td>
<td>d</td>
<td style="text-align: right;">th</td>
<td>en</td>
<td>c</td>
<td>on</td>
<td>vert the markdown above into a html file (I hit the knit HTML button in RStudio for this file), then run the following commands in R (assuming the highlightHTML package is not installed):</td>
</tr>
<tr class="even">
<td>::</td>
<td>:</td>
<td>{.</td>
<td>ce</td>
<td>ll</td>
<td style="text-align: right;">}</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>`` li in li</td>
<td>`{ br st br</td>
<td>.r ar al ar</td>
<td>. y( l_ y(</td>
<td>ce de gi hi</td>
<td style="text-align: right;">ll vt th gh</td>
<td>-c oo ub li</td>
<td>od ls (r gh</td>
<td>e} ) ep tH</td>
<td></td>
</tr>
<tr class="even">
<td>ta</td>
<td>gs</td>
<td>&lt;</td>
<td>-</td>
<td>c(</td>
<td style="text-align: right;">“#”# TM</td>
<td>bg co L(</td>
<td>re lg in up</td>
<td>d ol pu da</td>
<td>{background-color: red;}“,”#bgblue {background-color: blue;}“, d {color: gold;}”, “#bgblack {background-color: black; color: white;}”) t = “path/to/infile.html”, output = “path/to/outfile.html”, teCSS = TRUE, tags = tags, browse = TRUE)</td>
</tr>
<tr class="odd">
<td>Th ![</td>
<td>is ](</td>
<td>c /p</td>
<td>om os</td>
<td>ma t/</td>
<td style="text-align: right;">nd 20</td>
<td>w 14</td>
<td>il -0</td>
<td>l 7-</td>
<td>process the html file, look for tags, change the tags to CSS ids, inject the CSS into the document, and lastly open the output file in the browser to see how it looks. The example above would look like the following after the above commands: 30-highlightHTML_figs/mwe.png)</td>
</tr>
<tr class="even">
<td>Yo</td>
<td>u</td>
<td>ca</td>
<td>n</td>
<td>al</td>
<td style="text-align: right;">so</td>
<td>g</td>
<td>o</td>
<td>to</td>
<td>this link to see the post-processed file: <a href="educate-r.org/mwe.html">educate-r.org/mwe.html</a>.</td>
</tr>
<tr class="odd">
<td>##</td>
<td>#</td>
<td>Up</td>
<td>co</td>
<td>mi</td>
<td style="text-align: right;">ng</td>
<td>F</td>
<td>ea</td>
<td>tu</td>
<td>res</td>
</tr>
</tbody>
</table>
<p>Currently the package assumes that you know CSS and can supply your own tags. In the future I’d like to relax this and allow for some basic tags that work without needing to supply the CSS. I’m hoping to allow background color and text color changes to be made without needing to specify the CSS. For example, when specifying #bgblue in the markdown file, the R program knows that you want the background color (bg) to be blue.</p>
<p>Try it out and let me know of new features or bugs as you work through the package.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>Highlighthtml</category>
  <category>Package</category>
  <category>Css</category>
  <category>Markdown</category>
  <category>Html</category>
  <guid>https://brandonlebeau.org/posts/2014-07-30-format-markdown-documents-in-r.html</guid>
  <pubDate>Wed, 30 Jul 2014 05:00:00 GMT</pubDate>
</item>
<item>
  <title>AERA Preview</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2014-04-02-aera-preview.html</link>
  <description><![CDATA[ 




<p>The American Educational Research Association (AERA) annual conference is this weekend in Philadelphia. I was lucky to have a paper accepted into the conference. I am presenting a meta analysis that I have been working on for the past two years or so titled: Model misspecification and assumption violations with the linear mixed model: A meta analysis.</p>
<p>In this paper, I have compiled numerous monte carlo studies perform a quantitative synthesis of the literature. I have focused primarily on longitudinal linear mixed models as that was what my dissertation topic, and practically speaking, I already had many monte carlo studies in hand making the task a bit simpler.</p>
<p>Here is a sneak peak of some of the results from my paper in the form of an interactive chart using the <em>rChart</em> package to get started. Here is my r code to generate the initial chart:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(rCharts)</span>
<span id="cb1-2">h1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hPlot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fitSerCor2"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"avgt1e"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"missRE"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> intmean)</span>
<span id="cb1-3">h1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">yAxis</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Empirical Type I Error Rate"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.00</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tickInterval =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>)</span>
<span id="cb1-4">h1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xAxis</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fitted Serial Correlation Structure"</span>),</span>
<span id="cb1-5">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">categories =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ind"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA"</span>))</span>
<span id="cb1-6">h1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verticalAlign =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"top"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">align =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">layout =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vertical"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Miss RE"</span>))</span>
<span id="cb1-7">h1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'chart1'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include_assets =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cdn =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div></div>
</div>
<p>As in one of my prior posts about <em>rCharts</em> I manually added a few features to the Javascript manually. I find that easier than bundling lists upon lists to achieve the desired result. Below is the final image:</p>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
<script type="text/javascript" src="https://code.highcharts.com/highcharts-more.js"></script>
<script type="text/javascript" src="https://code.highcharts.com/modules/exporting.js"></script>
<style>
  .rChart {
    display: block;
    margin-left: auto; 
    margin-right: auto;
    width: 800px;
    height: 600px;
    font-size: 200%;
  }  
  </style>
<div id="chart1" class="rChart highcharts">

</div>
<script type="text/javascript">
    (function($){
        $(function () {
            var chart = new Highcharts.Chart({
 "dom": "chart1",
"width":            800,
"height":            400,
"credits": {
 "href": null,
"text": null 
},
"exporting": {
 "enabled": false 
},
"title": {
 "text": null 
},
"yAxis": [
 {
 "title": {
 "text": "Empirical Type I Error Rate",
   style: {
   fontWeight: 'bold',
   fontSize: '20px'
   }
},
labels: {
  style: {
   fontSize: '18px'
  }
 },
"min":              0,
"max":            0.2,
"tickInterval":           0.05 
} 
],
"series": [
 {
 "data": [
 [
 "Ind",
0.0519
],
 [
 "AR1",
0.0635
],
[
 "MA1",
0.0639
],
[
 "MA2",
0.0665
], 
[
 "ARMA",
0.0656
],
],
events: {
            mouseOver: function () {
                this.update({
                    color: 'black'
                });                
            },
            mouseOut: function () {
                this.update({
                    color: '#e41a1c'
                }); 
            }
        },
"color": "#e41a1c",
"name": "0",
"type": null,
"marker": {
 "radius":              6
} 
},
{
 "data": [
 [
 "Ind",
0.1837
],
 [
 "AR1",
0.0864
],
[
 "MA1",
0.1155
],
[
 "MA2",
0.0999
], 
[
 "ARMA",
0.0896
],
],
events: {
            mouseOver: function () {
                this.update({
                    color: 'black'
                });                
            },
            mouseOut: function () {
                this.update({
                    color: '#377eb8'
                }); 
            }
        },
"color": "#377eb8",
"name": "1",
"type": null,
"marker": {
 "radius":              6
} 
} 
],
"xAxis": [
 {
 "title": {
 "text": "Fitted Serial Correlation Structure",
 style:{
   fontWeight: 'bold',
   fontSize: '20px'
 }
},
labels: {
 style: {
  fontSize: '18px',
  fontWeight: 'bold'
 }
},
"categories": [ "Ind", "AR1", "MA1", "MA2", "ARMA" ] 
} 
],
"subtitle": {
 "text": null 
},
"legend": {
 "verticalAlign": "top",
"align": "right",
"layout": "vertical",
symbolWidth: 40,
"title": {
 "text": "Miss RE" 
} 
},
"plotOptions": {
 "series": {
 "lineWidth":              4 
} 
},
"id": "chart1",
"chart": {
 "renderTo": "chart1",
  zoomType: "y",
   "style": {
 fontSize: "24px"
 },
 resetZoomButton: {
  position: {
   align: 'left'
  }
 }
} 
});
        });
    })(jQuery);
</script>
<p>If anyone is attending AERA this year and wants to listen to my presentation as well as others dealing with Methodological Considerations in Modeling Latent Growth (the title of the session) stop by the Convention Center on Sunday, April 6th from 4:05 to 5:35 pm in room 117. Even if you do not want to hear about modeling latent growth, but would rather talk about r, perhaps we can meetup somewhere else.</p>



 ]]></description>
  <category>R</category>
  <category>Rcharts</category>
  <category>Javascript</category>
  <category>Aera</category>
  <guid>https://brandonlebeau.org/posts/2014-04-02-aera-preview.html</guid>
  <pubDate>Wed, 02 Apr 2014 05:00:00 GMT</pubDate>
</item>
<item>
  <title>Evolution of Code</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2014-03-27-evolution-of-code.html</link>
  <description><![CDATA[ 




<p>Recently while scraping some data from the college football data warehouse site, I started to realize the evolution of my code. To preface this, I am definitely not a trained programmer, just a self taught junky who enjoys doing it when I have time. I’ve slowly evolved my programming skills from simply statistics languages like r or SPSS, to some other languages like LaTeX, HTML, CSS, Javascript, and I’ve started to work through some python.</p>
<p>Now back to my realization. As I mentioned, I was scraping some data from <a href="http://www.cfbdatawarehouse.com/">CFB Data Warehouse</a> for a project that I’m working on with a colleague and was adapting some code that was written about 3 years ago. The problem was that my old code was broken. The original code was about 100 lines of code just to select the correct table and format it. Here is a chunk of the original code to select the correct table.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##Identifying correct tables</span></span>
<span id="cb1-2">    tb <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"list"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tableNodes))</span>
<span id="cb1-3">      <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tableNodes)){</span>
<span id="cb1-4">        tb[[i]] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readHTMLTable</span>(tableNodes[[i]])</span>
<span id="cb1-5">      }</span>
<span id="cb1-6"></span>
<span id="cb1-7">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##Tables that are the correct length</span></span>
<span id="cb1-8">    tabNum <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nrow=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tableNodes), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb1-9">    tabNum[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sapply</span>(tb, length)</span>
<span id="cb1-10">    tabNum[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tableNodes)</span>
<span id="cb1-11"></span>
<span id="cb1-12">   Num <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">subset</span>(tabNum, tabNum[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb1-13"></span>
<span id="cb1-14">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##Selecting and combining tables</span></span>
<span id="cb1-15"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(Num) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>){</span>
<span id="cb1-16">   tb1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tb[[Num[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]]]</span>
<span id="cb1-17">   tb1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Other <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb1-18">   tb2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tb[[Num[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>]]]</span>
<span id="cb1-19">   tb2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Other <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-20">   tab <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbind</span>(tb1, tb2)</span>
<span id="cb1-21"> } <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> { </span>
<span id="cb1-22">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(Num) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>){</span>
<span id="cb1-23">   tab <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tb[[Num[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]]]</span>
<span id="cb1-24">   tab<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Other <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-25"> } <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb1-26">  tab <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nrow=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)  </span>
<span id="cb1-27"> }</span>
<span id="cb1-28"> }</span></code></pre></div></div>
</div>
<p>This code was looped over many different pages and was run once for every page. Essentially the code is complicated and inconsistent, but at the time 3 years ago the code ran and that was enough for me. Extract the data from the website no matter how much code was needed to do the work. This was back in an era when I was just becoming familiar with much or <em>R</em>, the <em>XML</em> package, and attempting to scrape data from a messy/complicated site.</p>
<p>My new code to extract the tables looks like this:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># extracting tables</span></span>
<span id="cb2-2">  tabs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(Nodes), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(x) </span>
<span id="cb2-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readHTMLTable</span>(Nodes[[x]], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stringsAsFactors =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>))</span>
<span id="cb2-4">  </span>
<span id="cb2-5">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Combine tables</span></span>
<span id="cb2-6">  bowl <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">do.call</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rbind"</span>, tabs)</span></code></pre></div></div>
</div>
<p>Much cleaner, simpler, more consistent, and quite possibly quicker. The ability to focus on speed, readability, and consistency is something that comes later after one becomes more comfortable with the language. I have been focusing on this for awhile, but these stark differences and ease I was able to adapt my old code especially struck me this time. I haven’t decided if this evolution for me is <em>mastery</em> or <em>expert</em> status of the r language, but I now feel I have progressed to a point where I feel confident and am able to shift my focus from having code that works, to code that is now clean, consistent, and readable.</p>
<p>Has anyone else had similar epiphanies with their code?</p>
<p>Lastly, if you want to see the raw code, go to the github page: <a href="https://github.com/lebebr01/cfbFootball">https://github.com/lebebr01/cfbFootball</a>.</p>



 ]]></description>
  <category>R</category>
  <category>Code</category>
  <category>Xml</category>
  <guid>https://brandonlebeau.org/posts/2014-03-27-evolution-of-code.html</guid>
  <pubDate>Thu, 27 Mar 2014 05:00:00 GMT</pubDate>
</item>
<item>
  <title>Update to highlightHTML package</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2014-03-14-update-to-highlighthtml-package.html</link>
  <description><![CDATA[ 




<p>I’ve added a new functionality to my <code>highlightHTML</code> package. This package post-processes HTML files and injects CSS and adds tags to create some further customization (for example highlight cells of a HTML table). This is most useful when writing a document using markdown and converting it into a HTML document using a tool like knitr, slidify, or even pandoc.</p>
<p>Up to now, my package only worked with tables, see my old post that talks about this if you are interested: http://educate-r.org/2013/11/01/CondFormatMarkdown/. My update adds a similar functionality to text itself by including span tags in the document.</p>
<p>The following code will install the package with the new feature from github:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(devtools)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">repo =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'highlightHTML'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">username =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lebebr01'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ref =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'testing'</span>)</span></code></pre></div></div>
</div>
<p>Once the package is installed, the new function is called <code>highlightHTMLtext</code>. This function takes a HTML file as the input and post processes the file to add span tags to format text according to the CSS calls specified by the user. The function looks for {#id text} to add the span tags. The braces are used to define the text range that will use the id and the #id is the CSS id itself.</p>
<p>Here is an example using the HTML file that comes with the package and which can also be found in the help file.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(highlightHTML)</span>
<span id="cb2-2">file <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system.file</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'examples'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">package =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'highlightHTML'</span>)</span>
<span id="cb2-3">file1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(file, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bgtext.html"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>)</span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Change background color and text color with CSS</span></span>
<span id="cb2-6">tags <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bgblack {background-color: black; color: white;}"</span>,</span>
<span id="cb2-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bgblue {background-color: #0000FF; color: white;}"</span>)</span>
<span id="cb2-8"></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Post-process HTML file</span></span>
<span id="cb2-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">highlightHTMLtext</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">input =</span> file1, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">output =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">updateCSS =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb2-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tags =</span> tags, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">browse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div></div>
</div>
<p>If you run the above command, the file should open in your browser to see the result of the new HTML file. The result should have boxes of color in specific areas that we indicated by the {#id text} syntax in the raw markdown and HTML file.</p>
<p>My next step is to develop a master function to wrap these other functions so only one call would be needed to format text and tables. Let me know of any issues by going to the github page: https://github.com/lebebr01/highlightHTML</p>
<hr>
<section id="before-and-after-html" class="level3">
<h3 class="anchored" data-anchor-id="before-and-after-html">Before and After HTML</h3>
<p>Here is what the body of the HTML file looks like before running the function:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb3-1"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">body</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">h1</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>Test of Text<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">h1</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>Testing the ability to change the {#bgblue color} of the text.<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>Can also do {#bgblack multiple words of text}<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-7"></span>
<span id="cb3-8"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>{#bgblack Even entire paragraphs that you want to really stand out from the rest of the document.  More than color could also be changed, anything alterable by CSS.  Test out the function and get creative with the CSS}<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-9"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">body</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span></code></pre></div></div>
<p>This is what the HTML document looks like after running the function:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb4-1"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">body</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb4-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">h1</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>Test of Text<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">h1</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb4-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>Testing the ability to change the <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">span</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bgblue'</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span> color<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">span</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span> of the text.<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb4-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>Can also do <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">span</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bgblack'</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span> multiple words of text<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">span</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb4-5"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">span</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> id</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bgblack'</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span> Even entire paragraphs that you want to really stand out from the rest of the document.  More than color could also be changed, anything alterable by CSS.  Test out the function and get creative with the CSS<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">span</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">p</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb4-6"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">body</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span></code></pre></div></div>
<p>The braces identify the location of the span tags.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>Highlighthtml</category>
  <category>Markdown</category>
  <category>Html</category>
  <guid>https://brandonlebeau.org/posts/2014-03-14-update-to-highlighthtml-package.html</guid>
  <pubDate>Fri, 14 Mar 2014 05:00:00 GMT</pubDate>
</item>
<item>
  <title>rCharts in slidy</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2014-03-03-rcharts-in-slidy.html</link>
  <description><![CDATA[ 




<p>My last post I talked about using <code>rCharts</code> to create interactive graphics for my presentation. They seemed to go over pretty well in my interviews and helped me greatly as I did not need to remember or write down specific numbers to talk about. I use <em>slidy</em> to create my HTML slideshows and there was some interest to see exactly how I had these charts into a <em>slidy</em> html presentation.</p>
<p>First off, I did not use <code>rCharts</code> and <code>knitr</code> in tandem, but that would make the workflow a bit easier. The major thing you’d want to remember is to make sure to add the following chunk option: <code>results = 'asis'</code>. This will ensure that the raw html printed from <code>rCharts</code> will be included in the markdown file as is.</p>
<p>I personally just copy and pasted the javascript into my markdown presentation. This was easier for me as I edited many specific options in the raw Javascript to come to my final version. It would be possible to make all the edits directly through the <code>rCharts</code> framework, but it was easier for me to just look at the highcharts.js documentation to get the figure I was looking for.</p>
<p>For those who did not see my last post, here is the R code I used to create my graphic:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(rCharts)</span>
<span id="cb1-2"></span>
<span id="cb1-3">h1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hPlot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GenSerCor"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"percent"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"FitSerCor"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> converge)</span>
<span id="cb1-4">h1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">yAxis</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Convergence Rate"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tickInterval =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb1-5">h1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xAxis</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generated Serial Correlation Structure"</span>),</span>
<span id="cb1-6">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">categories =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ind"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA"</span>))</span>
<span id="cb1-7">h1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verticalAlign =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"top"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">align =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">layout =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vertical"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fitted SC"</span>))</span>
<span id="cb1-8">h1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plotOptions</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">series =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lineWidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb1-9">h1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'chart1'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include_assets =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cdn =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div></div>
</div>
<p>After I ran this command in R, I edited the resulting Javascript code that was printed from the last line of the R code above. My final Javascript code can be seen below.</p>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
<script type="text/javascript" src="https://code.highcharts.com/highcharts-more.js"></script>
<script type="text/javascript" src="https://code.highcharts.com/modules/exporting.js"></script>
<style>
  .rChart {
    display: block;
    margin-left: auto; 
    margin-right: auto;
    width: 800px;
    height: 400px;
    font-size: 200%;
  }  
  </style>
<div id="chart1" class="rChart highcharts">

</div>
<script type="text/javascript">
    (function($){
        $(function () {
            var chart = new Highcharts.Chart({
 "dom": "chart1",
"width":            800,
"height":            400,
"credits": {
 "href": null,
"text": null 
},
"exporting": {
 "enabled": false 
},
"title": {
 "text": null 
},
"yAxis": [
 {
 title: {
 text: "Convergence Rate",
  style: {
   fontWeight: 'bold',
   fontSize: '20px'
   }
 },
 labels: {
  formatter: function() {
   return this.value + '%';
  },
  style: {
   fontSize: '18px'
  }
 },
"min":              0,
"max":            100,
"tickInterval":             10 ,
minRange: 10
} 
],
"series": [
 {
 "data": [
 [
 "Ind",
         68.38 
],
[
 "AR1",
         64.88 
],
[
 "MA1",
         55.12 
],
[
 "MA2",
         61.98 
],
[
 "ARMA",
         42.17 
] 
],
events: {
            mouseOver: function () {
                this.update({
                    color: 'black'
                });                
            },
            mouseOut: function () {
                this.update({
                    color: '#e41a1c'
                }); 
            }
        },
"color": "#e41a1c",
"name": "AR1",
"type": null,
dashStyle: 'Solid',
"marker": {
 "radius":              6
} 
},
{
 "data": [
 [
 "Ind",
          65.1 
],
[
 "AR1",
         60.45 
],
[
 "MA1",
         63.68 
],
[
 "MA2",
         54.88 
],
[
 "ARMA",
          63.6 
] 
],
events: {
            mouseOver: function () {
                this.update({
                    color: 'black'
                });                
            },
            mouseOut: function () {
                this.update({
                    color: '#377eb8'
                }); 
            }
        },
"color": "#377eb8",
"name": "ARMA",
"type": null,
dashStyle: 'ShortDash',
"marker": {
 "radius":              6 
} 
},
{
 "data": [
 [
 "Ind",
         72.48 
],
[
 "AR1",
         93.88 
],
[
 "MA1",
         92.23 
],
[
 "MA2",
         95.62 
],
[
 "ARMA",
         98.37 
] 
],
events: {
            mouseOver: function () {
                this.update({
                    color: 'black'
                });                
            },
            mouseOut: function () {
                this.update({
                    color: '#4daf4a'
                }); 
            }
        },
"color": "#4daf4a",
"name": "Ind",
"type": null,
dashStyle: 'Dash',
"marker": {
 "radius":              6 
} 
},
{
 "data": [
 [
 "Ind",
         71.02 
],
[
 "AR1",
         81.37 
],
[
 "MA1",
         69.15 
],
[
 "MA2",
          84.5 
],
[
 "ARMA",
         88.02 
] 
],
events: {
            mouseOver: function () {
                this.update({
                    color: 'black'
                });                
            },
            mouseOut: function () {
                this.update({
                    color: '#984ea3'
                }); 
            }
        },
"color": "#984ea3",
"name": "MA1",
"type": null,
dashStyle: 'ShortDot',
"marker": {
 "radius":              6
} 
},
{
 "data": [
 [
 "Ind",
         67.23 
],
[
 "AR1",
         70.78 
],
[
 "MA1",
         65.93 
],
[
 "MA2",
         68.83 
],
[
 "ARMA",
          72.9 
] 
],
events: {
            mouseOver: function () {
                this.update({
                    color: 'black'
                });                
            },
            mouseOut: function () {
                this.update({
                    color: '#ff7f00'
                }); 
            }
        },
"color": "#ff7f00",
"name": "MA2",
"type": null,
dashStyle: 'DashDot',
"marker": {
 "radius":              6 
} 
} 
],
"xAxis": [
 {
 title: {
 text: "Generated Serial Correlation Structure",
  style:{
   fontWeight: 'bold',
   fontSize: '20px'
 }
},
labels: {
 style: {
  fontSize: '18px',
  fontWeight: 'bold'
 }
},
"categories": [ "Ind", "AR1", "MA1", "MA2", "ARMA" ] 
} 
],
"subtitle": {
 "text": null 
},
"legend": {
 "verticalAlign": "top",
"align": "right",
"layout": "vertical",
symbolWidth: 40,
"title": {
 "text": "Fitted SC" 
} 
},
"plotOptions": {
 "series": {
 "lineWidth":              4 
} 
},
"id": "chart1",
"chart": {
 "renderTo": "chart1", 
 zoomType: "y",
 "style": {
 fontSize: "24px"
 },
 resetZoomButton: {
  position: {
   align: 'left'
  }
 }
} 
});
        });
    })(jQuery);
</script>
<p>Once you have that in markdown format, you can turn it into a <em>slidy</em> html presentation with the following command in <em>pandoc</em>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pandoc</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-s</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--mathjax</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-i</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-t</span> slidy inputfile.md <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> outfile.html</span></code></pre></div></div>
<p>This gives you a file that looks something like this:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&lt;?xml</span> version="1.0" encoding="utf-8"<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">?&gt;</span></span>
<span id="cb3-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;!DOCTYPE</span> html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"</span>
<span id="cb3-3"> "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">html</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> xmlns</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"http://www.w3.org/1999/xhtml"</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-5"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">head</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-6">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">meta</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> http-equiv</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Content-Type"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> content</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text/html; charset=utf-8"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">/&gt;</span></span>
<span id="cb3-7">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">meta</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> http-equiv</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Content-Style-Type"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> content</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text/css"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">/&gt;</span></span>
<span id="cb3-8">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">meta</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"generator"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> content</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pandoc"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">/&gt;</span></span>
<span id="cb3-9">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">meta</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"author"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> content</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brandon LeBeau"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">/&gt;</span></span>
<span id="cb3-10">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">title</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>Impact of serial correlation structures on random effect misspecification with the linear mixed model.<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">title</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-11">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">style</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text/css"</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>code{<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">white-space</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">pre</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>}<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">style</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-12">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">link</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> rel</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stylesheet"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text/css"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> media</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"screen, projection, print"</span></span>
<span id="cb3-13"><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">    href</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stylesheets/slidy.css"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">/&gt;</span></span>
<span id="cb3-14"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> src</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stylesheets/slidy.js"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> charset</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"utf-8"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text/javascript"</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-15"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text/javascript'</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> src</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">stylesheets/jquery-1.9.1.min.js</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-16"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text/javascript'</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> src</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">stylesheets/highcharts.js</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-17"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text/javascript'</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> src</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">stylesheets/highcharts-more.js</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-18"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text/javascript'</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> src</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">stylesheets/exporting.js</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span> </span>
<span id="cb3-19"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">style</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.rChart</span> {</span>
<span id="cb3-21">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">display</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">block</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-22">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">margin-left</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">auto</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> </span>
<span id="cb3-23">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">margin-right</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">auto</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-24">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">width</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">px</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-25">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">height</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">px</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-26">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">font-size</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">%</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-27">  }  </span>
<span id="cb3-28">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">style</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-29"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> src</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text/javascript"</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span>MathJax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Hub</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Queue</span>([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Typeset"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>MathJax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Hub</span>])<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-30"> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;!--   &lt;script src="http://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"</span></span>
<span id="cb3-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    charset="utf-8" type="text/javascript"&gt;&lt;/script&gt; --&gt;</span></span>
<span id="cb3-32"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">head</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-33"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">body</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-34"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">div</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> id </span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'chart1'</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> class </span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rChart'</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">div</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-35"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text/javascript'</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-36">    (<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>($){</span>
<span id="cb3-37">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">$</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-38">            <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> chart <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> Highcharts<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Chart</span>({</span>
<span id="cb3-39"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dom"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chart1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-40"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"width"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>            <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-41"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"height"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>            <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">600</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-42"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"credits"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-43"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"href"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-44"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span> </span>
<span id="cb3-45">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-46"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exporting"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-47"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"enabled"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">false</span> </span>
<span id="cb3-48">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-49"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-50"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span> </span>
<span id="cb3-51">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-52"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yAxis"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [</span>
<span id="cb3-53"> {</span>
<span id="cb3-54"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">title</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-55"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">text</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Convergence Rate"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-56">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">style</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-57">   <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">fontWeight</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bold'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-58">   <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">fontSize</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'20px'</span></span>
<span id="cb3-59">   }</span>
<span id="cb3-60"> }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-61"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">labels</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-62">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">formatter</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>() {</span>
<span id="cb3-63">   <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">value</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'%'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-64">  }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-65">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">style</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-66">   <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">fontSize</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'18px'</span></span>
<span id="cb3-67">  }</span>
<span id="cb3-68"> }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-69"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"min"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>              <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-70"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"max"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>            <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-71"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tickInterval"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>             <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-72"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">minRange</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb3-73">} </span>
<span id="cb3-74">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-75"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"series"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [</span>
<span id="cb3-76"> {</span>
<span id="cb3-77"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [</span>
<span id="cb3-78"> [</span>
<span id="cb3-79"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ind"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-80">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">68.38</span> </span>
<span id="cb3-81">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-82">[</span>
<span id="cb3-83"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-84">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">64.88</span> </span>
<span id="cb3-85">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-86">[</span>
<span id="cb3-87"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-88">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">55.12</span> </span>
<span id="cb3-89">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-90">[</span>
<span id="cb3-91"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-92">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">61.98</span> </span>
<span id="cb3-93">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-94">[</span>
<span id="cb3-95"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-96">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">42.17</span> </span>
<span id="cb3-97">] </span>
<span id="cb3-98">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-99"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">events</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-100">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOver</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-101">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-102">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span></span>
<span id="cb3-103">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>                </span>
<span id="cb3-104">            }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-105">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOut</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-106">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-107">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#e41a1c'</span></span>
<span id="cb3-108">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> </span>
<span id="cb3-109">            }</span>
<span id="cb3-110">        }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-111"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"color"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#e41a1c"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-112"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-113"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-114"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dashStyle</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Solid'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-115"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"marker"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-116"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"radius"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>              <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span></span>
<span id="cb3-117">} </span>
<span id="cb3-118">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-119">{</span>
<span id="cb3-120"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [</span>
<span id="cb3-121"> [</span>
<span id="cb3-122"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ind"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-123">          <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">65.1</span> </span>
<span id="cb3-124">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-125">[</span>
<span id="cb3-126"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-127">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">60.45</span> </span>
<span id="cb3-128">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-129">[</span>
<span id="cb3-130"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-131">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">63.68</span> </span>
<span id="cb3-132">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-133">[</span>
<span id="cb3-134"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-135">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">54.88</span> </span>
<span id="cb3-136">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-137">[</span>
<span id="cb3-138"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-139">          <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">63.6</span> </span>
<span id="cb3-140">] </span>
<span id="cb3-141">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-142"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">events</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-143">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOver</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-144">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-145">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span></span>
<span id="cb3-146">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>                </span>
<span id="cb3-147">            }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-148">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOut</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-149">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-150">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#377eb8'</span></span>
<span id="cb3-151">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> </span>
<span id="cb3-152">            }</span>
<span id="cb3-153">        }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-154"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"color"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#377eb8"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-155"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-156"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-157"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dashStyle</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ShortDash'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-158"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"marker"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-159"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"radius"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>              <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span> </span>
<span id="cb3-160">} </span>
<span id="cb3-161">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-162">{</span>
<span id="cb3-163"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [</span>
<span id="cb3-164"> [</span>
<span id="cb3-165"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ind"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-166">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">72.48</span> </span>
<span id="cb3-167">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-168">[</span>
<span id="cb3-169"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-170">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">93.88</span> </span>
<span id="cb3-171">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-172">[</span>
<span id="cb3-173"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-174">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">92.23</span> </span>
<span id="cb3-175">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-176">[</span>
<span id="cb3-177"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-178">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">95.62</span> </span>
<span id="cb3-179">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-180">[</span>
<span id="cb3-181"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-182">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">98.37</span> </span>
<span id="cb3-183">] </span>
<span id="cb3-184">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-185"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">events</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-186">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOver</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-187">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-188">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span></span>
<span id="cb3-189">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>                </span>
<span id="cb3-190">            }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-191">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOut</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-192">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-193">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#4daf4a'</span></span>
<span id="cb3-194">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> </span>
<span id="cb3-195">            }</span>
<span id="cb3-196">        }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-197"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"color"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4daf4a"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-198"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ind"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-199"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-200"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dashStyle</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Dash'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-201"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"marker"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-202"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"radius"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>              <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span> </span>
<span id="cb3-203">} </span>
<span id="cb3-204">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-205">{</span>
<span id="cb3-206"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [</span>
<span id="cb3-207"> [</span>
<span id="cb3-208"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ind"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-209">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">71.02</span> </span>
<span id="cb3-210">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-211">[</span>
<span id="cb3-212"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-213">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">81.37</span> </span>
<span id="cb3-214">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-215">[</span>
<span id="cb3-216"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-217">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">69.15</span> </span>
<span id="cb3-218">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-219">[</span>
<span id="cb3-220"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-221">          <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">84.5</span> </span>
<span id="cb3-222">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-223">[</span>
<span id="cb3-224"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-225">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">88.02</span> </span>
<span id="cb3-226">] </span>
<span id="cb3-227">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-228"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">events</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-229">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOver</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-230">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-231">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span></span>
<span id="cb3-232">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>                </span>
<span id="cb3-233">            }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-234">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOut</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-235">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-236">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#984ea3'</span></span>
<span id="cb3-237">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> </span>
<span id="cb3-238">            }</span>
<span id="cb3-239">        }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-240"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"color"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#984ea3"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-241"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-242"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-243"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dashStyle</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ShortDot'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-244"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"marker"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-245"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"radius"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>              <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span></span>
<span id="cb3-246">} </span>
<span id="cb3-247">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-248">{</span>
<span id="cb3-249"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [</span>
<span id="cb3-250"> [</span>
<span id="cb3-251"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ind"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-252">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">67.23</span> </span>
<span id="cb3-253">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-254">[</span>
<span id="cb3-255"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-256">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">70.78</span> </span>
<span id="cb3-257">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-258">[</span>
<span id="cb3-259"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-260">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">65.93</span> </span>
<span id="cb3-261">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-262">[</span>
<span id="cb3-263"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-264">         <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">68.83</span> </span>
<span id="cb3-265">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-266">[</span>
<span id="cb3-267"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-268">          <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">72.9</span> </span>
<span id="cb3-269">] </span>
<span id="cb3-270">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-271"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">events</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-272">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOver</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-273">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-274">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span></span>
<span id="cb3-275">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span>                </span>
<span id="cb3-276">            }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-277">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">mouseOut</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> () {</span>
<span id="cb3-278">                <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">update</span>({</span>
<span id="cb3-279">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#ff7f00'</span></span>
<span id="cb3-280">                })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> </span>
<span id="cb3-281">            }</span>
<span id="cb3-282">        }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-283"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"color"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ff7f00"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-284"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-285"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-286"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dashStyle</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'DashDot'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-287"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"marker"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-288"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"radius"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>              <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span> </span>
<span id="cb3-289">} </span>
<span id="cb3-290">} </span>
<span id="cb3-291">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-292"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xAxis"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [</span>
<span id="cb3-293"> {</span>
<span id="cb3-294"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">title</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-295"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">text</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generated Serial Correlation Structure"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-296">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">style</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>{</span>
<span id="cb3-297">   <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">fontWeight</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bold'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-298">   <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">fontSize</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'20px'</span></span>
<span id="cb3-299"> }</span>
<span id="cb3-300">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-301"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">labels</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-302"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">style</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-303">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">fontSize</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'18px'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-304">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">fontWeight</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bold'</span></span>
<span id="cb3-305"> }</span>
<span id="cb3-306">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-307"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"categories"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [ <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ind"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MA2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA"</span> ] </span>
<span id="cb3-308">} </span>
<span id="cb3-309">]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-310"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"subtitle"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-311"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">null</span> </span>
<span id="cb3-312">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-313"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-314"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"verticalAlign"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"top"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-315"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"align"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-316"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"layout"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vertical"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-317"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">symbolWidth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-318"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-319"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fitted SC"</span> </span>
<span id="cb3-320">} </span>
<span id="cb3-321">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-322"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plotOptions"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-323"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"series"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-324"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lineWidth"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>              <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span> </span>
<span id="cb3-325">} </span>
<span id="cb3-326">}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-327"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chart1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-328"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chart"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-329"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"renderTo"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chart1"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb3-330"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">zoomType</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-331"> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"style"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-332"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">fontSize</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"24px"</span></span>
<span id="cb3-333"> }<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-334"> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">resetZoomButton</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-335">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">position</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb3-336">   <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">align</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'left'</span></span>
<span id="cb3-337">  }</span>
<span id="cb3-338"> }</span>
<span id="cb3-339">} </span>
<span id="cb3-340">})<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-341">        })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-342">    })(jQuery)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb3-343"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">script</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-344"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">div</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-345"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">body</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-346"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;/</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">html</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&gt;</span></span></code></pre></div></div>
<p>That should give you a html presentation with an interactive Javascript based figure.</p>



 ]]></description>
  <category>R</category>
  <category>Rcharts</category>
  <category>Javascript</category>
  <category>Html</category>
  <category>Slidy</category>
  <guid>https://brandonlebeau.org/posts/2014-03-03-rcharts-in-slidy.html</guid>
  <pubDate>Mon, 03 Mar 2014 06:00:00 GMT</pubDate>
</item>
<item>
  <title>Picking a gui interface for R</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2014-02-02-picking-a-gui-interface-for-r.html</link>
  <description><![CDATA[ 




<p>Recently I decided to switch statistical programs used for the master’s level introductory statistics course I teach here at the University of Arkansas. Historically this course has been taught with SPSS, but I am attempting the switch to R this semester.</p>
<p>My reasons for having students use the gui interface is primarily due to the lack of programming experience. A brief initial poll revealed that only one student had prior programming/code writing experience. Therefore, I did not want to have students become acclimated to the statistics content as well as the R code. The two primary gui systems/packages I explored were the <em>Deducer</em> package and <em>Rcmdr</em> package. Here are my initial thoughts on the switch.</p>
<section id="which-gui-to-use" class="level3">
<h3 class="anchored" data-anchor-id="which-gui-to-use">Which gui to use?</h3>
<p>This ultimately comes down to personal preference, however below I’ve highlighted my thoughts on pros/cons of each package.</p>
</section>
<section id="deducer" class="level1">
<h1>Deducer</h1>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Shows syntax of commands run</td>
<td>Uses Java</td>
</tr>
<tr class="even">
<td>Uses ggplot2 for plots</td>
<td>Menus differ from PC to MAC</td>
</tr>
<tr class="odd">
<td>Very interactive menu structures</td>
<td>rJava package can be troublesome</td>
</tr>
<tr class="even">
<td>Simple condensed data loading</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="rcmdr" class="level1">
<h1>Rcmdr</h1>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Shows syntax of commands run</td>
<td>Uses base graphics</td>
</tr>
<tr class="even">
<td>Does not use Java</td>
<td>Data loading structures not integrated</td>
</tr>
<tr class="odd">
<td>Very similar data menus across OS</td>
<td></td>
</tr>
</tbody>
</table>
<p>In general I prefer the <em>Deducer</em> package as it uses ggplot2 and has a more unified menu structure. For example, there are not differing menu options for loading data like in <em>Rcmdr</em>. Instead, <em>Deducer</em> has a single load data menu where it is possible to load many types of data including csv, txt, rda, etc. This is helpful for students who are not very familiar with differing file types. <em>Deducer</em> also uses ggplot2 for its graphics which I enjoy much more than base graphics. In my opinion they look better and the syntax is ultimately easier to create high quality graphics.</p>
<p>My biggest complaint of the <em>Deducer</em> package is that it uses Java. This is one more thing that the user needs to install and with my class we have had trouble on a few computers getting the <em>rJava</em> package to work properly. In general it is difficult to troubleshoot a student’s computer, especially when I am unable to recreate the problem on my own machine. Lastly, the differing look of <em>Deducer</em> has made it more difficult for me as I need to have two explanations, one for those on a PC and another for those on a Mac. Just tedious and has been difficult for me as I do not use Mac.</p>
<section id="concluding-thoughts" class="level3">
<h3 class="anchored" data-anchor-id="concluding-thoughts">Concluding thoughts</h3>
<p>I hope to write more about my experiences using both gui systems for my class, but upon initial inspection of them now I definitely prefer <em>Deducer</em>. The package just has not completely won me over as little problems have made me use both packages in my class so far. Does anyone else have experience using one or the other in a class before? I’d enjoy hearing any stories using these or different gui systems for R.</p>


</section>
</section>

 ]]></description>
  <category>R</category>
  <category>Gui</category>
  <guid>https://brandonlebeau.org/posts/2014-02-02-picking-a-gui-interface-for-r.html</guid>
  <pubDate>Sun, 02 Feb 2014 06:00:00 GMT</pubDate>
</item>
<item>
  <title>When I use plyr/dplyr</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2014-01-24-when-i-use-plyrdplyr.html</link>
  <description><![CDATA[ 




<p>My last post I talked about how I use the <em>data.table</em> package for aggregating and removing duplicate observations. Although I use the <em>data.table</em> package quite often, there are many times when I use <em>plyr</em> (and now the new <em>dplyr</em>) package, primarily because of its easy, intuitive syntax.</p>
<section id="arrange" class="level3">
<h3 class="anchored" data-anchor-id="arrange">Arrange</h3>
<p>One of my personal favorite functions in the <em>plyr</em> suite of basic functions is the <em>arrange</em> function. The base functions for sorting/ordering are more difficult to use. Not to mention there have been many times that I have used the <em>base::sort</em> function when I really need to use the <em>base::order</em> function (sort to me is the word I think of first). <em>arrange</em> is great due to the easy, general syntax used for it as shown below:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(dataframe, col1, col2, col3)</span></code></pre></div></div>
</div>
<p>When using the <em>base::order</em> function, this needs to be done through the indexing operators and is not nearly as intuitive to me. I always have to think for a second to get it right. Here are two general examples:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">dataframe[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">order</span>(dataframe<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>col1, dataframe<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>col2, dataframe<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>col3), ]</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span>(dataframe, dataframe[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">order</span>(col1, col2, col3), ])</span></code></pre></div></div>
</div>
<p>Both involve much more typing and are more difficult to read the code in my opinion.</p>
</section>
<section id="simple-intuitive-syntax" class="level3">
<h3 class="anchored" data-anchor-id="simple-intuitive-syntax">Simple, Intuitive syntax</h3>
<p>The other aspect of the <em>plyr</em> (and <em>dplyr</em>) suite of functions that keeps me coming back is their simple, intuitive syntax. For example, if I am teaching a student how to aggregate or sort, <em>plyr</em> is my go to package. Easy to explain, easy to understand. The common structure across all of the functions is brilliantly programmed and a standard for everyone else to replicate.</p>
</section>
<section id="new-bonus-use-with-dplyr" class="level3">
<h3 class="anchored" data-anchor-id="new-bonus-use-with-dplyr">New bonus use with <em>dplyr</em></h3>
<p>The new ability to use the <em>chain</em> function or alternatively the <em>%&gt;%</em> operator is a great addition to R. One of the difficulties with code readability in R is the whenever functions are nested together. By default R interprets from inside to out, not how most of us read written words let along code. The <em>chain</em> function and <em>%&gt;%</em> operator allows the user to write the functions in the order they will be processed by R, therefore the code can read from left to right.</p>
<p>Using the mtcars dataset, suppose we wanted to select the columns we wanted, aggregate the miles per gallon, and filter so we select the average miles per gallon greater than 20.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb3-2">mtcars <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(cyl, am) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(mpg, cyl, wt, am) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">avgmpg =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(mpg), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">avgwt =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(wt)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(avgmpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
# Groups:   cyl [2]
    cyl    am avgmpg avgwt
  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
1     4     0   22.9  2.94
2     4     1   28.1  2.04
3     6     1   20.6  2.76</code></pre>
</div>
</div>
<p>Compare the above syntax to:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(</span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb5-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(</span>
<span id="cb5-4">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(mtcars, cyl, am),</span>
<span id="cb5-5">      mpg, cyl, wt, am),</span>
<span id="cb5-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">avgmpg =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(mpg), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">avgwt =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(wt)),</span>
<span id="cb5-7">  avgmpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
# Groups:   cyl [2]
    cyl    am avgmpg avgwt
  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
1     4     0   22.9  2.94
2     4     1   28.1  2.04
3     6     1   20.6  2.76</code></pre>
</div>
</div>
<p>Both chunks give you the same result, however the first one is much easier to see the process taken to get to the end result. Much easier to adapt the code to add/remove parts of it.</p>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p>I use both <em>data.table</em> and <em>plyr</em>/<em>dplyr</em> packages. All of these packages are a great tool to for certian data problems. If I want to write a single line of code to do a lot of manipulations I will revert toward <em>data.table</em>. However, if I am writing code where I am doing more exploration or if I am collaborating with others I tend to write my code using <em>plyr</em>/<em>dplyr</em>. The versatility that both packages bring together in tandem is a great combination. I do not have time to be a complete package elitest, the correct tool for the right data problem.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>Plyr</category>
  <category>Dplyr</category>
  <guid>https://brandonlebeau.org/posts/2014-01-24-when-i-use-plyrdplyr.html</guid>
  <pubDate>Fri, 24 Jan 2014 06:00:00 GMT</pubDate>
</item>
<item>
  <title>Two of my favorite data.table features</title>
  <dc:creator>Brandon LeBeau</dc:creator>
  <link>https://brandonlebeau.org/posts/2014-01-06-two-of-my-favorite-datatable-features.html</link>
  <description><![CDATA[ 




<p>When I started to use the <em>data.table</em> package I was primarily using it to aggregate. I had read about <em>data.table</em> and its blazing speed compared to the other options from base or the <em>plyr</em> package especially with large amounts of data. As an example, I remember calculating averages or percentages while at Saint Paul Public Schools and while the calculations were running would walk away for 5 minutes to wait for them to finish. When using <em>data.table</em> to do the same calculations I didn’t need to wait 5 minutes to see the calculated values.</p>
<p>The speed of <em>data.table</em> is publicized widely, however there are two features found in <em>data.table</em> that are not talked about as frequently that I use very often.</p>
<section id="add-aggregated-variables-to-the-raw-data-file" class="level3">
<h3 class="anchored" data-anchor-id="add-aggregated-variables-to-the-raw-data-file">Add aggregated variables to the raw data file</h3>
<p>The ability to add aggregated variables to the raw data file can be very helpful in numerous data situations. At Saint Paul Public Schools I used this feature to give differing levels of data to external clients requesting data. I also used this feature when creating graphics. Outside of the district world, this feature is extremely helpful when fitting linear mixed models with <em>lme4</em> or <em>nlme</em>. Instead of creating a set of aggregated variables in a new data frame and merging back in, <em>data.table</em> allows you to do it one one command. Here is a small example:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># generate a small dataset</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1234</span>)</span>
<span id="cb1-3">smalldat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>), </span>
<span id="cb1-4">                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'a'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'b'</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">times =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>), </span>
<span id="cb1-5">                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># convert to data.frame to data.table</span></span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(data.table)</span>
<span id="cb1-9">smalldat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.table</span>(smalldat)</span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># convert aggregated variable into raw data file</span></span>
<span id="cb1-12">smalldat[, aggGroup1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(x), by <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> group1]</span>
<span id="cb1-13"></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print file</span></span>
<span id="cb1-15">smalldat</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>    group1 group2          x  aggGroup1
     &lt;int&gt; &lt;char&gt;      &lt;num&gt;      &lt;num&gt;
 1:      1      a -1.2070657 -0.3523537
 2:      1      b  0.2774292 -0.3523537
 3:      1      a  1.0844412 -0.3523537
 4:      1      b -2.3456977 -0.3523537
 5:      1      a  0.4291247 -0.3523537
 6:      2      b  0.5060559 -0.4139612
 7:      2      a -0.5747400 -0.4139612
 8:      2      b -0.5466319 -0.4139612
 9:      2      a -0.5644520 -0.4139612
10:      2      b -0.8900378 -0.4139612</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># aggregate with 2 variables</span></span>
<span id="cb3-2">smalldat[, aggGroup1<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">.2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(x), by <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(group1, group2)]</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print file</span></span>
<span id="cb3-5">smalldat</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>    group1 group2          x  aggGroup1 aggGroup1.2
     &lt;int&gt; &lt;char&gt;      &lt;num&gt;      &lt;num&gt;       &lt;num&gt;
 1:      1      a -1.2070657 -0.3523537   0.1021667
 2:      1      b  0.2774292 -0.3523537  -1.0341342
 3:      1      a  1.0844412 -0.3523537   0.1021667
 4:      1      b -2.3456977 -0.3523537  -1.0341342
 5:      1      a  0.4291247 -0.3523537   0.1021667
 6:      2      b  0.5060559 -0.4139612  -0.3102046
 7:      2      a -0.5747400 -0.4139612  -0.5695960
 8:      2      b -0.5466319 -0.4139612  -0.3102046
 9:      2      a -0.5644520 -0.4139612  -0.5695960
10:      2      b -0.8900378 -0.4139612  -0.3102046</code></pre>
</div>
</div>
<p>The key part of the syntax is the <code>:=</code>, which tells <em>data.table</em> to compute an aggregated variable and merge it back into the original data. This is very compact syntax to create aggregated variables that are automatically placed within the original data. The only drawback is the inability to create more than one aggregated variable at a time. If I wanted to created the mean and the median of x for each level of the variable <em>group1</em>, I would have to write two commands. If a lot of variables need to be aggregated in this fashion, it may be more concise to create an aggregated data set and merge back into the original. Below is an example of what I mean by aggregate then merge back:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(plyr)</span>
<span id="cb5-2"></span>
<span id="cb5-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># create aggregated data</span></span>
<span id="cb5-4">aggdat1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ddply</span>(smalldat, .(group1), summarize,</span>
<span id="cb5-5">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">aggGroup1plyr =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(x))</span>
<span id="cb5-6">aggdat12 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ddply</span>(smalldat, .(group1, group2), summarize, </span>
<span id="cb5-7">                <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">aggGroup1.1plyr =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(x))</span>
<span id="cb5-8"></span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># join back into data</span></span>
<span id="cb5-10">smalldat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join</span>(smalldat, aggdat1, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'group1'</span>)</span>
<span id="cb5-11">smalldat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join</span>(smalldat, aggdat12, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'group1'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'group2'</span>))</span>
<span id="cb5-12"></span>
<span id="cb5-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print data</span></span>
<span id="cb5-14">smalldat</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>    group1 group2          x  aggGroup1 aggGroup1.2 aggGroup1plyr
     &lt;int&gt; &lt;char&gt;      &lt;num&gt;      &lt;num&gt;       &lt;num&gt;         &lt;num&gt;
 1:      1      a -1.2070657 -0.3523537   0.1021667    -0.3523537
 2:      1      b  0.2774292 -0.3523537  -1.0341342    -0.3523537
 3:      1      a  1.0844412 -0.3523537   0.1021667    -0.3523537
 4:      1      b -2.3456977 -0.3523537  -1.0341342    -0.3523537
 5:      1      a  0.4291247 -0.3523537   0.1021667    -0.3523537
 6:      2      b  0.5060559 -0.4139612  -0.3102046    -0.4139612
 7:      2      a -0.5747400 -0.4139612  -0.5695960    -0.4139612
 8:      2      b -0.5466319 -0.4139612  -0.3102046    -0.4139612
 9:      2      a -0.5644520 -0.4139612  -0.5695960    -0.4139612
10:      2      b -0.8900378 -0.4139612  -0.3102046    -0.4139612
    aggGroup1.1plyr
              &lt;num&gt;
 1:       0.1021667
 2:      -1.0341342
 3:       0.1021667
 4:      -1.0341342
 5:       0.1021667
 6:      -0.3102046
 7:      -0.5695960
 8:      -0.3102046
 9:      -0.5695960
10:      -0.3102046</code></pre>
</div>
</div>
<p>The above code using plyr likely won’t take anymore time for R to run, however it does take more time to write out the code.</p>
</section>
<section id="removing-duplicate-observations" class="level3">
<h3 class="anchored" data-anchor-id="removing-duplicate-observations">Removing duplicate observations</h3>
<p>For most situations, using <em>data.table</em> has become my go to way to remove duplicate observations. This is especially useful when it does not matter which value of the variables you want to keep in the final data set (e.g.&nbsp;when values of the variables are repeated). The ability of <em>data.table</em> to create keyed values makes it extremely easy to remove duplicate observations based on those keyed variables.</p>
<p>Using the dataset created above:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set keys - this sorts the data based on these values</span></span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">setkeyv</span>(smalldat, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'group1'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'group2'</span>))</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># keep unique observations (I also remove the variable x)</span></span>
<span id="cb7-5">uniqdat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">subset</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(smalldat), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">select =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>x)</span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print data</span></span>
<span id="cb7-8">uniqdat</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;group1, group2&gt;
    group1 group2  aggGroup1 aggGroup1.2 aggGroup1plyr aggGroup1.1plyr
     &lt;int&gt; &lt;char&gt;      &lt;num&gt;       &lt;num&gt;         &lt;num&gt;           &lt;num&gt;
 1:      1      a -0.3523537   0.1021667    -0.3523537       0.1021667
 2:      1      a -0.3523537   0.1021667    -0.3523537       0.1021667
 3:      1      a -0.3523537   0.1021667    -0.3523537       0.1021667
 4:      1      b -0.3523537  -1.0341342    -0.3523537      -1.0341342
 5:      1      b -0.3523537  -1.0341342    -0.3523537      -1.0341342
 6:      2      a -0.4139612  -0.5695960    -0.4139612      -0.5695960
 7:      2      a -0.4139612  -0.5695960    -0.4139612      -0.5695960
 8:      2      b -0.4139612  -0.3102046    -0.4139612      -0.3102046
 9:      2      b -0.4139612  -0.3102046    -0.4139612      -0.3102046
10:      2      b -0.4139612  -0.3102046    -0.4139612      -0.3102046</code></pre>
</div>
</div>
<p>The code above first sets two keys for the data.table. The key acts as an identifier and the data are automatically sorted based on the key variables. This is one of the reasons why the <em>data.table</em> package can be so fast at doing many of its tasks. Then unique observations are kept. The <em>unique</em> function in the <em>data.table</em> package is similar to the same function in the base package, but when keys are defined for a data.table, the <em>unique</em> function automatically selects unique observations based on those key variables.</p>
<p>For more complicated cases, I tend to use a combination of <em>order</em> and <em>duplicated</em> from base R, however for easy cases where observations are repeated on the variables I want to keep, this is a quick and easy way to remove duplicate observations.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>Data.table</category>
  <guid>https://brandonlebeau.org/posts/2014-01-06-two-of-my-favorite-datatable-features.html</guid>
  <pubDate>Mon, 06 Jan 2014 06:00:00 GMT</pubDate>
</item>
</channel>
</rss>
